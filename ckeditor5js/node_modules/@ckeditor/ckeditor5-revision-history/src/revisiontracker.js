/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1e70=['_lastFrom','diffData','getOperations','clone','dataDowncast','createPositionAfter','_authorId','size','vid_start','getRootNames','name','_findInsertionIndex','reverse','from','elementEnd','_revisionDataBuilder','keys','init','_copyMarkers','_cloneOperation','_saveEmptyMetaData','element','isPendingUpdate','map','elementStart','finally','_operations','RevisionsRepository','history','processor','children','version','_getFromVersion','updateRevisions','editor','marker','offset','_startingRevisionId','_makeRevision','_createCurrentRevision','_getPreviousFrom','_idsRoots','source','RealTimeCollaborationClient','max','_update','_calculateMetaData','userId','_clone','_makeModelFromViewString','createPositionBefore','_pendingAction','_transformMarkers','root','baseVersion','_handleMarkerOperation','_getBaseVids','_source','plugins','resolve','type','push','_fixOperation','getLatestVersion','buildRevisionData','getAncestors','collaboration.channelId','remove','oldRange','_handleMoveOperation','vid_end','start','Users','_isInit','getOperation','getWalker','_insertChild','getTransformedByOperation','documentFragment','isEqual','_makeIdsRoot','newRange','_appendChild','_isPendingUpdate','split','NEGATIVE_INFINITY','Initial\x20revision','_revisionId','getRange','getRevision','define','_handleMergeOperation','sourcePosition','add','getAttribute','roots','targetPosition','_savedMetaData','_getState','filter','sendBufferedUpdates','_execute','update','toView','creatorId','getNodeByPath','markerToData','upcast','_markers','set','_saveMetaData','_processRootBeforeSave','_continueCurrentRevision','revision','saveRevision','ready','_startingVersion','currentRevision','_rootNames','Empty\x20document','getChildren','clear','_bufferedUpdates','_touchedMarkers','hasContent','getCurrentRevisionId','_applyOperations','dataToMarker','loadState','trim','data-revision-','initial','_handleInsertOperation','requires','createRevision','creator','getUser','isReady','data','getChild','has','conversion','authorsIds','offsetSize','PendingActions','previousPosition','_getVidAttributeName','values','_handleOperation','locale','startsWith','position','range','_fixRange','_lastTo','for','adapter','insertions','paragraph','rootName','delete','get','stringify','_getViewJson','pluginName','$graveyard','length','createdAt','initialData','_loadState','_replaceEditorDataWithRevisionData','createPositionAt','getRoot','getTime','toData','includes','_addPendingAction','editor-initial-data-replaced-with-revision-data','_loadRevisionData','document','markers','_removeMetaData','end','path','_handleSplitOperation','addRevisionData','insertionPosition','_fixPosition','keepParagraph','sort','_reset','_diffRoots','_initialRevisionId','setRevisionData','_setConversion','repository','vid','authors','insert','splitPosition','find','_removePendingAction','_setAttribute','fromVersion','$text','view','_bufferUpdate','merge','_removeRevisionMarkers','forEach','getData','string','slice','_baseRoots','_prepareViewToSave','toModel','reinsert','toVersion','editing','item','tableCell','_generateTape','deletions','revisionHistory.resumeUnsavedRevision','revision-start','createRangeIn','getMovedRangeStart','setSource','getRevisions','_baseIdsRoots','_touched','then','revision:','_markChanges','_loadedStateData','model','attributes','createPositionFromPath','getRevisionDocumentData','parent','config','childCount','graveyardPosition'];(function(_0x27e214,_0x1e7002){const _0x198a51=function(_0x2efb81){while(--_0x2efb81){_0x27e214['push'](_0x27e214['shift']());}};_0x198a51(++_0x1e7002);}(_0x1e70,0x10b));const _0x198a=function(_0x27e214,_0x1e7002){_0x27e214=_0x27e214-0x0;let _0x198a51=_0x1e70[_0x27e214];return _0x198a51;};import{Users as _0x10cad1}from'ckeditor5-collaboration/src/collaboration-core';import{Plugin as _0x4f0909,PendingActions as _0x4e5575}from'ckeditor5/src/core';import{logWarning as _0x46de1d,uid as _0x5e2cce}from'ckeditor5/src/utils';import{Position as _0x56f436,Range as _0x2cb92c,Element as _0xb89447,DocumentFragment as _0x2d8a24,ViewText as _0x44defc,ViewElement as _0x40dd9f,ViewContainerElement as _0x48a158,ViewAttributeElement as _0x219339,ViewEmptyElement as _0x4b838d,ViewRawElement as _0x1e3d4f,ViewUIElement as _0xd7b8e2,ViewDocumentFragment as _0x87dfb3}from'ckeditor5/src/engine';import _0x3a8a97 from'./revisionsrepository';import{getTranslation as _0x4445bc}from'./utils/common-translations';const T={'c':_0x48a158,'a':_0x219339,'e':_0x4b838d,'r':_0x1e3d4f,'u':_0xd7b8e2};export default class l extends _0x4f0909{static get[_0x198a('0x8c')](){return'RevisionTracker';}static get[_0x198a('0x6d')](){return[_0x10cad1,_0x3a8a97,_0x4e5575];}constructor(..._0x3a7980){super(..._0x3a7980),this['adapter']=null,this[_0x198a('0x55')](_0x198a('0x71'),!0x1),this[_0x198a('0x55')]('isEnabled',!0x0),this['currentRevision']=null;const _0xe76eeb=_0x5e2cce();this[_0x198a('0x21')]={'history':this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x9b')]['history'],'getLatestVersion':()=>Promise[_0x198a('0x23')](this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x9b')][_0x198a('0x7')]),'getCurrentRevisionId':()=>_0xe76eeb},this['_revisionDataBuilder']=new j(this[_0x198a('0xa')]),this[_0x198a('0xa8')]=this['editor'][_0x198a('0xd8')][_0x198a('0x89')](_0x198a('0x2a'))||_0x198a('0x6b'),this[_0x198a('0x55')](_0x198a('0xf1'),!0x1),this[_0x198a('0x62')]=new Map(),this[_0x198a('0xa')][_0x198a('0xd8')][_0x198a('0x42')](_0x198a('0xc7'),!0x0),this[_0x198a('0xd2')]=null,this[_0x198a('0xa')][_0x198a('0x75')][_0x198a('0x83')](_0x198a('0x53'))[_0x198a('0x67')]({'view':_0x198a('0x59')});}[_0x198a('0xec')](){this[_0x198a('0xab')]=this[_0x198a('0xa')]['plugins'][_0x198a('0x89')](_0x198a('0x3')),this[_0x198a('0xaa')](),this[_0x198a('0xa')]['data']['on'](_0x198a('0x5b'),()=>{const _0x23b5b0=this[_0x198a('0xab')][_0x198a('0x41')](0x0),_0x3c53a1=_0x23b5b0&&null===_0x23b5b0[_0x198a('0x6f')]?_0x23b5b0:null;if(this['_continueCurrentRevision']=!!_0x3c53a1&&this[_0x198a('0xa')][_0x198a('0xd8')]['get']('revisionHistory.resumeUnsavedRevision'),this[_0x198a('0xa')][_0x198a('0x22')][_0x198a('0x74')](_0x198a('0x13'))){const _0x14530a=this[_0x198a('0x21')]['getCurrentRevisionId'](),_0x3c7b83=this[_0x198a('0xab')][_0x198a('0x41')](_0x14530a);if(_0x3c7b83)this[_0x198a('0x5c')]=_0x3c7b83[_0x198a('0xb3')],this[_0x198a('0x58')]=!0x1;else{const _0x9b7fc2=this[_0x198a('0x21')][_0x198a('0x4')][_0x198a('0x2')][_0x198a('0xb0')](_0x2d8bb7=>!_0x2d8bb7[_0x198a('0x31')]),_0x4d5f22=_0x9b7fc2?_0x9b7fc2[_0x198a('0x1e')]:this[_0x198a('0x21')]['history'][_0x198a('0x7')];_0x23b5b0?(_0x23b5b0[_0x198a('0xc1')]<_0x4d5f22&&_0x23b5b0[_0x198a('0x15')]({'toVersion':_0x4d5f22}),this[_0x198a('0x58')]?(this[_0x198a('0x21')][_0x198a('0x65')]=()=>_0x3c53a1['id'],this['_startingVersion']=_0x3c53a1['fromVersion']):(this[_0x198a('0x5c')]=_0x23b5b0[_0x198a('0xc1')],this[_0x198a('0x58')]=!0x1)):(this[_0x198a('0x5c')]=_0x4d5f22,this[_0x198a('0x58')]=!0x1);}}else _0x3c53a1&&(this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x9b')][_0x198a('0x4')][_0x198a('0x7')]=Math[_0x198a('0x14')](_0x3c53a1[_0x198a('0xc1')],this[_0x198a('0xa')]['model'][_0x198a('0x9b')][_0x198a('0x4')][_0x198a('0x7')]),_0x3c53a1[_0x198a('0xb3')]===_0x3c53a1[_0x198a('0xc1')]?(0x0!==_0x3c53a1['fromVersion']&&(this[_0x198a('0x21')][_0x198a('0x65')]=()=>_0x3c53a1['id']),this['_continueCurrentRevision']=!0x1):this[_0x198a('0x58')]&&(this[_0x198a('0x21')]['getCurrentRevisionId']=()=>_0x3c53a1['id'],this['_startingVersion']=_0x3c53a1[_0x198a('0xb3')])),this[_0x198a('0x58')]||(this[_0x198a('0x5c')]=this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x9b')][_0x198a('0x7')]);this[_0x198a('0xea')][_0x198a('0xec')](this['_source'][_0x198a('0x4')]),this['_createInitialRevision'](this[_0x198a('0x5c')]),this[_0x198a('0xf')](this[_0x198a('0x5c')]),this[_0x198a('0x84')]&&this['sendBufferedUpdates']();}),this['bind'](_0x198a('0x71'))['to'](this,_0x198a('0x3b'),_0x47192e=>!_0x47192e);}async['afterInit'](){if(this[_0x198a('0xab')][_0x198a('0x8e')]>0x0){const _0x268060=this[_0x198a('0xab')][_0x198a('0x41')](0x0),_0x2f2542=await this[_0x198a('0xd6')](_0x268060);this[_0x198a('0x92')](_0x2f2542);}}[_0x198a('0xcb')](_0x2ee91a){this['_source']=_0x2ee91a;}async[_0x198a('0x4e')](){const _0x5a51ee=await this[_0x198a('0x21')][_0x198a('0x27')]();if(_0x5a51ee>this[_0x198a('0x5d')][_0x198a('0xc1')]){await this[_0x198a('0x91')]();const _0x3fc894=this[_0x198a('0x28')]({'revision':this[_0x198a('0x5d')],'to':_0x5a51ee});_0x3fc894['authors']=_0x3fc894[_0x198a('0x76')][_0x198a('0xf2')](_0xf2c361=>this[_0x198a('0xa')][_0x198a('0x22')][_0x198a('0x89')](_0x198a('0x30'))[_0x198a('0x70')](_0xf2c361)),this[_0x198a('0x5d')]['_update'](_0x3fc894);}}async[_0x198a('0x91')](){this[_0x198a('0x58')]&&!this[_0x198a('0xd2')]&&(await this['_loadRevisionData'](this[_0x198a('0x5d')]),this[_0x198a('0xea')][_0x198a('0x68')](this[_0x198a('0x5d')]),this[_0x198a('0xd2')]={'fromVersion':this[_0x198a('0x5d')][_0x198a('0xb3')],'authors':this[_0x198a('0x5d')][_0x198a('0xad')]['slice']()});}async[_0x198a('0x5a')](_0x153cb7={},_0x542ced=null){const _0x4d72a3=[];await this[_0x198a('0x91')](),this[_0x198a('0x58')]=!0x1,_0x542ced>this[_0x198a('0x5d')][_0x198a('0xc1')]&&(_0x542ced=null),null===_0x542ced&&(_0x542ced=await this[_0x198a('0x21')][_0x198a('0x27')]());const _0xe1d9d0=this['_getFromVersion'](_0x542ced),_0x55566e=this['buildRevisionData']({'from':_0xe1d9d0,'to':_0x542ced});if(this[_0x198a('0x5d')]['toVersion']<_0x542ced){const _0x5393a2=this[_0x198a('0x28')]({'revision':this['currentRevision'],'from':_0x542ced,'to':_0x542ced});_0x5393a2['authors']=[],_0x5393a2[_0x198a('0x76')]=[],_0x5393a2['id']=this[_0x198a('0x5d')]['id'],this[_0x198a('0x5d')][_0x198a('0x15')](_0x5393a2,!0x0),delete _0x5393a2['authors'],_0x4d72a3[_0x198a('0x25')](_0x5393a2);}_0x153cb7[_0x198a('0x50')]=this[_0x198a('0xa')][_0x198a('0x22')][_0x198a('0x89')](_0x198a('0x30'))['me']['id'],_0x153cb7[_0x198a('0xe5')]=_0x153cb7['name']||null,_0x153cb7['id']=_0x153cb7['id']||_0x5e2cce(),_0x153cb7={..._0x153cb7,..._0x55566e};const _0x154d4c=this['addRevisionData'](_0x153cb7);_0x4d72a3[_0x198a('0x25')](_0x153cb7);const _0xf5eabc=this['repository']['getIndex'](_0x154d4c);if(0x0!==_0xf5eabc){const _0x3c9d1b=this[_0x198a('0xab')][_0x198a('0x41')](_0xf5eabc-0x1);if(_0x3c9d1b[_0x198a('0xb3')]!==_0x542ced){const _0x165fe2=this[_0x198a('0xea')][_0x198a('0xba')](_0x542ced,_0x3c9d1b['toVersion']),_0x1395b3={'id':_0x3c9d1b['id'],'diffData':_0x165fe2[_0x198a('0xdc')],'authorsIds':_0x165fe2[_0x198a('0x76')],'authors':_0x165fe2[_0x198a('0x76')][_0x198a('0xf2')](_0x5256a7=>this[_0x198a('0xa')]['plugins'][_0x198a('0x89')](_0x198a('0x30'))[_0x198a('0x70')](_0x5256a7)),'fromVersion':_0x542ced};_0x3c9d1b===this[_0x198a('0x5d')]&&(_0x1395b3[_0x198a('0x8f')]=new Date(_0x153cb7['createdAt'][_0x198a('0x95')]()+0xa)),_0x3c9d1b['_update'](_0x1395b3,!0x0),delete _0x1395b3[_0x198a('0xad')],_0x4d72a3[_0x198a('0x25')](_0x1395b3);}}if(this[_0x198a('0x84')]){for(const _0x3c126a of _0x4d72a3)this['_bufferUpdate'](_0x3c126a['id'],_0x3c126a,!0x0);this[_0x198a('0x4c')]();}return _0x154d4c;}[_0x198a('0xa1')](_0x301afd){const _0x290348=this[_0x198a('0xab')][_0x198a('0x6e')](_0x301afd);return this[_0x198a('0x84')]&&_0x290348['on'](_0x198a('0x15'),(_0x45e8af,_0x26ea7a,_0x55158f)=>{_0x55158f||(this['_bufferUpdate'](_0x26ea7a['id'],_0x26ea7a,!0x0),this[_0x198a('0x4c')]());}),this[_0x198a('0xab')]['addRevision'](_0x290348,this[_0x198a('0xe6')](_0x290348)),_0x290348;}async[_0x198a('0xd6')](_0x5338bd){await this[_0x198a('0x9a')](_0x5338bd);const _0x2220c3={};for(const _0x231a0f in _0x5338bd[_0x198a('0xdc')]){const _0x3cec74=this['_removeRevisionMarkers'](JSON['parse'](_0x5338bd[_0x198a('0xdc')][_0x231a0f][_0x198a('0x85')])),_0x23fd3b=this[_0x198a('0xa')]['editing'][_0x198a('0xb5')][_0x198a('0x9b')],_0x6d548c=new _0x87dfb3(_0x23fd3b,_0x3cec74[_0x198a('0xf2')](_0x414200=>J(_0x414200,this[_0x198a('0xa')])));_0x2220c3[_0x231a0f]=this[_0x198a('0xa')][_0x198a('0x72')][_0x198a('0x5')][_0x198a('0x96')](_0x6d548c);}return _0x2220c3;}['sendBufferedUpdates'](){if(0x0===this[_0x198a('0x62')][_0x198a('0xe2')])return;if(this[_0x198a('0x3b')])return;let _0x4a4c0f=Array[_0x198a('0xe8')](this[_0x198a('0x62')][_0x198a('0x7b')]());this[_0x198a('0x62')]['clear']();for(let _0x11330a=0x0;_0x11330a<_0x4a4c0f[_0x198a('0x8e')];_0x11330a++){const _0xf643a2=_0x4a4c0f[_0x11330a];let _0x5eb358=!0x1;for(const _0x4522d6 of Object[_0x198a('0xeb')](_0xf643a2))void 0x0===_0xf643a2[_0x4522d6]?delete _0xf643a2[_0x4522d6]:'id'!==_0x4522d6&&(_0x5eb358=!0x0);_0x5eb358||(_0x4a4c0f[_0x11330a]=null);}if(_0x4a4c0f=_0x4a4c0f['filter'](_0x235b01=>null!==_0x235b01),!_0x4a4c0f[_0x198a('0x8e')])return;for(let _0x4d7f00=0x0;_0x4d7f00<_0x4a4c0f[_0x198a('0x8e')];_0x4d7f00++){const _0x1332e4=_0x4a4c0f[_0x4d7f00];void 0x0!==_0x1332e4['fromVersion']&&void 0x0===_0x1332e4['toVersion']&&(_0x1332e4[_0x198a('0xc1')]=this[_0x198a('0xab')]['getRevision'](_0x1332e4['id'])['toVersion']),void 0x0!==_0x1332e4[_0x198a('0xc1')]&&void 0x0===_0x1332e4['fromVersion']&&(_0x1332e4[_0x198a('0xb3')]=this[_0x198a('0xab')]['getRevision'](_0x1332e4['id'])[_0x198a('0xb3')]);}const _0x55324e=this[_0x198a('0xa')]['config'][_0x198a('0x89')](_0x198a('0x2a'));this[_0x198a('0x3b')]=!0x0,this[_0x198a('0x98')](),this[_0x198a('0x84')][_0x198a('0x9')](_0x4a4c0f,_0x55324e)[_0x198a('0x1')](()=>{this['_isPendingUpdate']=!0x1;})[_0x198a('0xcf')](_0x53c457=>{if(_0x53c457)for(const _0x13b66c of _0x53c457)this[_0x198a('0xa9')]({'id':_0x13b66c['id'],'createdAt':_0x13b66c[_0x198a('0x8f')]});this[_0x198a('0xb1')](),this[_0x198a('0x4c')]();});}[_0x198a('0x92')](_0x542a02){let _0x208671=this['editor'][_0x198a('0xd8')][_0x198a('0x89')](_0x198a('0x90'));if(void 0x0===_0x208671){_0x208671={};for(const _0x370a43 of this['editor']['model'][_0x198a('0x9b')][_0x198a('0xe4')]())_0x208671[_0x370a43]='';}'string'==typeof _0x208671&&(_0x208671={'main':_0x208671});let _0x2e6657=!0x1;for(const _0x3e1ea5 of Object['keys'](_0x208671))_0x542a02[_0x3e1ea5]&&(_0x208671[_0x3e1ea5]!==_0x542a02[_0x3e1ea5]&&''!==_0x208671[_0x3e1ea5][_0x198a('0x69')]()&&(_0x2e6657=!0x0),_0x208671[_0x3e1ea5]=_0x542a02[_0x3e1ea5]);_0x2e6657&&_0x46de1d(_0x198a('0x99')),this[_0x198a('0xa')][_0x198a('0xd8')][_0x198a('0x55')](_0x198a('0x90'),_0x208671);}['_addPendingAction'](){if(!this[_0x198a('0x1b')]){const _0x18fb5d=this[_0x198a('0xa')][_0x198a('0x22')]['get']('PendingActions');this[_0x198a('0x1b')]=_0x18fb5d[_0x198a('0x45')](_0x4445bc(this[_0x198a('0xa')][_0x198a('0x7d')],'PENDING_ACTION_REVISION_HISTORY'));}}[_0x198a('0xb1')](){this[_0x198a('0x1b')]&&(this['editor'][_0x198a('0x22')][_0x198a('0x89')](_0x198a('0x78'))[_0x198a('0x2b')](this[_0x198a('0x1b')]),this[_0x198a('0x1b')]=null);}[_0x198a('0xe6')](_0x3bd67e){const _0x37ef25=this[_0x198a('0xab')][_0x198a('0xcc')]();_0x37ef25[_0x198a('0xe7')]();let _0x825977=0x0;for(;_0x825977<_0x37ef25['length'];){const _0x1080dc=_0x37ef25[_0x825977];if(_0x1080dc===this[_0x198a('0x5d')]){_0x825977++;continue;}if(_0x1080dc['id']===this[_0x198a('0xa8')])break;const _0x4fd158=_0x3bd67e['toVersion']-_0x1080dc[_0x198a('0xc1')]||_0x3bd67e['fromVersion']-_0x1080dc[_0x198a('0xb3')];if(_0x4fd158>0x0)break;if(_0x4fd158<0x0)_0x825977++;else{if(!_0x3bd67e[_0x198a('0x6f')]&&_0x1080dc['creator'])break;if(_0x1080dc[_0x198a('0x6f')]||!_0x3bd67e[_0x198a('0x6f')]){if(_0x3bd67e[_0x198a('0x8f')]>_0x1080dc[_0x198a('0x8f')])break;_0x825977++;}else _0x825977++;}}return _0x825977;}[_0x198a('0xa9')](_0x626e4){const _0x4fe067=this['repository']['getRevision'](_0x626e4['id']);if(_0x626e4[_0x198a('0x8f')]&&(_0x626e4[_0x198a('0x8f')]=new Date(_0x626e4['createdAt'])),_0x626e4[_0x198a('0x76')]){const _0xc61c16=this['editor']['plugins'][_0x198a('0x89')](_0x198a('0x30'));_0x626e4[_0x198a('0xad')]=_0x626e4['authorsIds'][_0x198a('0xf2')](_0x151b59=>_0xc61c16[_0x198a('0x70')](_0x151b59));}_0x4fe067[_0x198a('0x15')](_0x626e4,!0x0);}[_0x198a('0x28')]({revision:_0x25a17c=null,from:_0x4b0fb6=null,to:_0x4a8642=null}){_0x4b0fb6=null!==_0x4b0fb6?_0x4b0fb6:_0x25a17c[_0x198a('0xb3')],_0x4a8642=null!==_0x4a8642?_0x4a8642:_0x25a17c[_0x198a('0xc1')];const _0xf9156=this[_0x198a('0xea')][_0x198a('0xba')](_0x4b0fb6,_0x4a8642),_0x563f4d={'diffData':_0xf9156[_0x198a('0xdc')],'authorsIds':_0xf9156[_0x198a('0x76')],'fromVersion':_0x4b0fb6,'toVersion':_0x4a8642};if(!_0x25a17c||_0x4a8642!==_0x25a17c[_0x198a('0xc1')]){const _0x2d73eb=_0x4a8642-0x1,_0x2902e2=this['_source'][_0x198a('0x4')][_0x198a('0x32')](_0x2d73eb);_0x563f4d[_0x198a('0x8f')]=_0x2902e2&&_0x2902e2['createdAt']||new Date();}if(this[_0x198a('0xd2')]&&_0x4b0fb6===this[_0x198a('0xd2')][_0x198a('0xb3')])for(const _0x3633d1 of this[_0x198a('0xd2')]['authors'])_0x563f4d['authorsIds'][_0x198a('0x97')](_0x3633d1['id'])||_0x563f4d[_0x198a('0x76')]['push'](_0x3633d1['id']);return _0x563f4d;}[_0x198a('0x9a')](_0x319502){if(!_0x319502||_0x319502[_0x198a('0xdc')])return Promise[_0x198a('0x23')]();{const _0x4116a8=this['editor']['config']['get'](_0x198a('0x2a'));return this['adapter']['getRevision']({'channelId':_0x4116a8,'revisionId':_0x319502['id']})[_0x198a('0xcf')](_0x88d0c3=>{_0x319502[_0x198a('0xdc')]=_0x88d0c3[_0x198a('0xdc')];});}}[_0x198a('0xb6')](_0x3fba2b,_0x2f74f5,_0x1d84cd){if(this[_0x198a('0x62')][_0x198a('0x74')](_0x3fba2b)){const _0x355b0f=this['_bufferedUpdates']['get'](_0x3fba2b);_0x2f74f5=_0x1d84cd?{..._0x355b0f,..._0x2f74f5}:{..._0x2f74f5,..._0x355b0f};}this['_bufferedUpdates'][_0x198a('0x55')](_0x3fba2b,_0x2f74f5);}[_0x198a('0x8')](_0x3323aa){const _0x419c9d=this['repository']['getRevisions']();_0x419c9d[_0x198a('0xe7')](),_0x419c9d['shift']();const _0x9ef636=_0x419c9d['find'](_0x13351b=>_0x13351b[_0x198a('0xc1')]<=_0x3323aa)['toVersion'];return _0x9ef636<this[_0x198a('0x5c')]?this['_startingVersion']:_0x9ef636;}['_createInitialRevision'](_0x4e8c3b){const _0x2548ce=this['repository'][_0x198a('0x41')](this['repository'][_0x198a('0x8e')]-0x1);if(_0x2548ce)this['_initialRevisionId']=_0x2548ce['id'];else{const _0x1b37dc=!this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x9b')][_0x198a('0x47')]['find'](_0x419b08=>this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x64')](_0x419b08)),_0x41dd12=this[_0x198a('0xa')]['plugins'][_0x198a('0x89')](_0x198a('0x30'))['me']['id'],_0x175032=_0x4445bc(this[_0x198a('0xa')]['locale'],_0x1b37dc?_0x198a('0x5f'):_0x198a('0x3e'));this[_0x198a('0xe')]({'from':_0x4e8c3b,'to':_0x4e8c3b,'id':this[_0x198a('0xa8')],'name':_0x175032,'creatorId':_0x41dd12});}}[_0x198a('0xf')](_0x552405){const _0x23ffc6=this[_0x198a('0x21')][_0x198a('0x65')]();this['currentRevision']=this[_0x198a('0xab')][_0x198a('0x41')](_0x23ffc6),this['currentRevision']||(this[_0x198a('0x5d')]=this[_0x198a('0xe')]({'from':_0x552405,'to':_0x552405,'id':_0x23ffc6,'name':'','creatorId':null}));}[_0x198a('0xe')]({name:_0x14fa61,from:_0x403f09,to:_0x52381f,creatorId:_0x3cf378,id:_0x4d5e59}){const _0x14aaed=this[_0x198a('0x28')]({'from':_0x403f09,'to':_0x52381f});_0x14aaed['name']=_0x14fa61,_0x14aaed['creatorId']=_0x3cf378,_0x14aaed['id']=_0x4d5e59;const _0x4365a8=this['addRevisionData'](_0x14aaed);return this['adapter']&&this[_0x198a('0xb6')](_0x14aaed['id'],_0x14aaed,!0x0),_0x4365a8;}[_0x198a('0xaa')](){this['editor'][_0x198a('0x75')][_0x198a('0x83')](_0x198a('0xdf'))[_0x198a('0x52')]({'model':'revision'});}[_0x198a('0xb8')](_0x41c991){return(_0x41c991=_0x41c991[_0x198a('0x4b')](_0x4ee5e4=>!_0x4ee5e4[_0x198a('0xe5')]||_0x198a('0xc8')!==_0x4ee5e4[_0x198a('0xe5')]&&'revision-end'!==_0x4ee5e4[_0x198a('0xe5')]))[_0x198a('0xb9')](_0x230462=>{_0x198a('0xbb')!=typeof _0x230462&&(_0x230462[_0x198a('0x6')]=this['_removeRevisionMarkers'](_0x230462[_0x198a('0x6')]),_0x230462['attributes']=_0x230462[_0x198a('0xd4')]['filter'](_0x25f3f9=>!_0x25f3f9[0x0][_0x198a('0x7e')](_0x198a('0x6a'))));}),_0x41c991;}}function J(_0x510d8e,_0xe4083a){const _0x5c3eba=_0xe4083a['editing'][_0x198a('0xb5')][_0x198a('0x9b')];if('string'==typeof _0x510d8e)return new _0x44defc(_0x5c3eba,_0x510d8e);{const _0x423aa3=_0x510d8e[_0x198a('0x6')][_0x198a('0xf2')](_0x18fefb=>J(_0x18fefb,_0xe4083a));return new(T[_0x510d8e[(_0x198a('0x24'))]]||_0x40dd9f)(_0x5c3eba,_0x510d8e[_0x198a('0xe5')],_0x510d8e[_0x198a('0xd4')],_0x423aa3);}}class j{constructor(_0x44dfb8){this['editor']=_0x44dfb8,this[_0x198a('0x49')]=new Map(),this[_0x198a('0xdb')]=-0x1,this[_0x198a('0x82')]=-0x1,this['_markers']=new Map(),this[_0x198a('0xa7')]=new Map(),this[_0x198a('0xbd')]=new Map(),this[_0x198a('0x11')]=new Map(),this['_baseIdsRoots']=new Map(),this[_0x198a('0xce')]=new Map(),this[_0x198a('0x63')]=new Map(),this[_0x198a('0x3f')]=0x1,this['_rootNames']=this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x9b')][_0x198a('0xe4')](),this[_0x198a('0x5e')]['push'](_0x198a('0x8d'));}[_0x198a('0xec')](_0x3b7e17){this[_0x198a('0x12')]=_0x3b7e17;const _0x1a9fe3=new Map();for(const _0x23ff18 of this[_0x198a('0x5e')]){const _0x448148=B(this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0x9b')][_0x198a('0x94')](_0x23ff18));_0x1a9fe3[_0x198a('0x55')](_0x23ff18,_0x448148);}const _0x18e15e=Array[_0x198a('0xe8')](this[_0x198a('0xa')][_0x198a('0xd3')]['markers'])['map'](_0x577f59=>[_0x577f59['name'],_0x577f59[_0x198a('0x40')]()]),_0x4dfa58=this[_0x198a('0x12')][_0x198a('0x7')];this[_0x198a('0x56')](_0x4dfa58,_0x1a9fe3,_0x18e15e),this[_0x198a('0xd')]=this['_revisionId'];}['getData'](_0x4305b1,_0x2694a8){if(this[_0x198a('0xdb')]===_0x4305b1&&this[_0x198a('0x82')]<=_0x2694a8)this[_0x198a('0x49')][_0x198a('0xe2')]>0x1&&this['_removeMetaData'](this[_0x198a('0x82')]),this[_0x198a('0x66')](this[_0x198a('0x82')],_0x2694a8,!0x0);else{if(!this[_0x198a('0x49')][_0x198a('0x74')](_0x4305b1)){const _0x2efaa1=this['_getPreviousFrom'](_0x4305b1);this['_calculateMetaData'](_0x2efaa1,_0x4305b1,!0x1);}this[_0x198a('0x16')](_0x4305b1,_0x2694a8,!0x0);}return this[_0x198a('0xdb')]=_0x4305b1,this[_0x198a('0x82')]=_0x2694a8,this['_getState']();}['loadState'](_0x328b1a){this['_reset'](),this['_lastFrom']=_0x328b1a[_0x198a('0xb3')],this[_0x198a('0x82')]=_0x328b1a['toVersion'];for(const _0x59415c in _0x328b1a[_0x198a('0xdc')]){const _0x464837=this[_0x198a('0x19')](_0x328b1a[_0x198a('0xdc')][_0x59415c][_0x198a('0xc6')]);_0x464837[_0x198a('0x87')]=_0x59415c,this[_0x198a('0xbd')][_0x198a('0x55')](_0x59415c,_0x464837);const _0x4b0fec=this[_0x198a('0x38')](_0x464837);this[_0x198a('0xcd')][_0x198a('0x55')](_0x59415c,_0x4b0fec);for(const [_0x12f847,_0x23f5ee]of _0x464837[_0x198a('0x9c')]){if(!_0x12f847[_0x198a('0x7e')]('revision:'))continue;const _0x42fa29=_0x12f847[_0x198a('0x3c')](':')[0x2];for(const _0x533091 of _0x23f5ee[_0x198a('0x33')]({'singleCharacters':!0x0})){const _0x4a6f5b=this[_0x198a('0x7a')](_0x533091),_0x4aa858=_0x198a('0xe9')==_0x533091[_0x198a('0x24')]?_0x533091[_0x198a('0x79')][_0x198a('0x9f')]['slice'](0x0,-0x1):_0x533091[_0x198a('0x79')][_0x198a('0x9f')],_0x21b5c0=_0x4b0fec[_0x198a('0x51')](_0x4aa858)[_0x198a('0x46')](_0x4a6f5b);this[_0x198a('0xce')][_0x198a('0x55')](_0x21b5c0,{'userId':_0x42fa29});}}}this['_startingRevisionId']=this[_0x198a('0x3f')];const _0x4b211c=[...Array(this['_revisionId'])['keys']()]['slice'](0x1)[_0x198a('0x4b')](_0xc1d46b=>!this[_0x198a('0xce')][_0x198a('0x74')](_0xc1d46b));let _0x8afa46=0x0;for(const _0x50ce2d in _0x328b1a['diffData']){const _0x41a89b=this[_0x198a('0x19')](_0x328b1a[_0x198a('0xdc')][_0x50ce2d][_0x198a('0x85')]);_0x41a89b[_0x198a('0x87')]=_0x50ce2d,this[_0x198a('0xa7')][_0x198a('0x55')](_0x50ce2d,_0x41a89b);const _0x157e97=this['_makeIdsRoot'](_0x41a89b,Number[_0x198a('0x3d')]);this[_0x198a('0x11')][_0x198a('0x55')](_0x50ce2d,_0x157e97);for(const [_0x1d4155,_0xf080de]of _0x41a89b['markers']){if(!_0x1d4155[_0x198a('0x7e')](_0x198a('0xd0')))continue;const _0x5a2dc2=_0x1d4155[_0x198a('0x3c')](':')[0x2];for(const _0x36f255 of _0xf080de[_0x198a('0x33')]({'singleCharacters':!0x0})){const _0x180b46=this[_0x198a('0x7a')](_0x36f255),_0x3d5257=this[_0x198a('0x3f')]++,_0x10dbfb=_0x198a('0xe9')==_0x36f255['type']?_0x36f255[_0x198a('0x79')]['path']['slice'](0x0,-0x1):_0x36f255[_0x198a('0x79')]['path'];_0x157e97[_0x198a('0x51')](_0x10dbfb)[_0x198a('0xb2')](_0x180b46,_0x3d5257),this[_0x198a('0xce')][_0x198a('0x55')](_0x3d5257,{'userId':_0x5a2dc2});}}for(const _0x45fa1b of this['editor']['model'][_0x198a('0xc9')](_0x41a89b)['getWalker']({'singleCharacters':!0x0})){const _0x117893=this[_0x198a('0x7a')](_0x45fa1b),_0x370d2f=_0x198a('0xe9')==_0x45fa1b[_0x198a('0x24')]?_0x45fa1b['previousPosition'][_0x198a('0x9f')][_0x198a('0xbc')](0x0,-0x1):_0x45fa1b[_0x198a('0x79')][_0x198a('0x9f')],_0x4b4bc0=_0x157e97[_0x198a('0x51')](_0x370d2f);_0x4b4bc0[_0x198a('0x46')](_0x117893)>0x0||_0x4b4bc0['_setAttribute'](_0x117893,_0x4b211c[_0x8afa46++]);}const _0x47f54c=new _0x2d8a24();_0x47f54c['rootName']=_0x198a('0x8d'),this['_baseRoots'][_0x198a('0x55')]('$graveyard',_0x47f54c),this[_0x198a('0xcd')][_0x198a('0x55')](_0x198a('0x8d'),this[_0x198a('0x38')](_0x47f54c,0x1));const _0x5a6c1c=new _0x2d8a24();_0x5a6c1c['rootName']=_0x198a('0x8d'),this['_diffRoots']['set'](_0x198a('0x8d'),_0x5a6c1c),this[_0x198a('0x11')][_0x198a('0x55')](_0x198a('0x8d'),this[_0x198a('0x38')](_0x5a6c1c,0x1));for(const [_0x5d56d1,_0x6ed3]of _0x41a89b[_0x198a('0x9c')])_0x5d56d1[_0x198a('0x7e')](_0x198a('0xd0'))||this['_markers']['set'](_0x5d56d1,_0x6ed3);}const _0x180106=Array[_0x198a('0xe8')](this['_diffRoots'])[_0x198a('0xf2')](([_0xfe936b,_0x46f011])=>[_0xfe936b,B(_0x46f011)]);this[_0x198a('0x56')](this[_0x198a('0x82')],_0x180106,this[_0x198a('0x54')]);}[_0x198a('0x19')](_0x45825b){const _0x59cc5e=JSON['parse'](_0x45825b),_0x47348f=this[_0x198a('0xa')][_0x198a('0xc2')][_0x198a('0xb5')][_0x198a('0x9b')],_0x2bc426=new _0x87dfb3(_0x47348f,_0x59cc5e[_0x198a('0xf2')](_0x1d135f=>J(_0x1d135f,this['editor'])));return this[_0x198a('0xa')]['data'][_0x198a('0xbf')](_0x2bc426);}['_saveEmptyMetaData'](){const _0x29da2f=new Map();for(const _0x989ca5 of this['_rootNames']){const _0x4063bf=new _0x2d8a24();_0x4063bf['rootName']=_0x989ca5,_0x29da2f[_0x198a('0x55')](_0x989ca5,_0x4063bf);}this[_0x198a('0x56')](Number['NEGATIVE_INFINITY'],_0x29da2f,[]);}[_0x198a('0x56')](_0x3ac23b,_0x2aa45b,_0x586bfe){const _0x514e12=new Map(_0x2aa45b),_0x480d80=new Map();for(const [_0x2d248b,_0x36dec5]of _0x586bfe)_0x480d80['set'](_0x2d248b,{'start':_0x36dec5['start'][_0x198a('0xde')](),'end':_0x36dec5['end'][_0x198a('0xde')](),'rootName':_0x36dec5['root'][_0x198a('0x87')]});this['_savedMetaData'][_0x198a('0x55')](_0x3ac23b,{'roots':_0x514e12,'markers':_0x480d80});}[_0x198a('0x9d')](_0x18a715){this[_0x198a('0x49')][_0x198a('0x88')](_0x18a715);}['reInit'](){this['_reset'](),this[_0x198a('0xdb')]=-0x1,this[_0x198a('0x82')]=-0x1,this[_0x198a('0x49')][_0x198a('0x61')](),this['init'](this[_0x198a('0x12')]);}[_0x198a('0xa6')](){this[_0x198a('0xce')][_0x198a('0x61')](),this['_touchedMarkers']['clear'](),this[_0x198a('0xa7')][_0x198a('0x61')](),this[_0x198a('0xbd')]['clear'](),this[_0x198a('0x11')][_0x198a('0x61')](),this[_0x198a('0xcd')][_0x198a('0x61')](),this[_0x198a('0x54')][_0x198a('0x61')](),this[_0x198a('0x3f')]=0x1,this[_0x198a('0xd')]=this[_0x198a('0x3f')];}['_makeIdsRoot'](_0x2b7c03,_0x768eb7=null){let _0x1164c5=null;_0x2b7c03['is'](_0x198a('0x36'))||(_0x1164c5=new _0xb89447(_0x2b7c03[_0x198a('0xe5')],{'vid_start':null===_0x768eb7?this[_0x198a('0x3f')]++:_0x768eb7++}));const _0x2ab746=[];for(const _0x247304 of _0x2b7c03[_0x198a('0x60')]())if(_0x247304['is'](_0x198a('0xf0'))){_0x2ab746['push'](this[_0x198a('0x38')](_0x247304,_0x768eb7));const _0x2493dd=_0x2ab746[_0x2ab746[_0x198a('0x8e')]-0x1];null!==_0x768eb7&&(_0x768eb7=_0x2493dd['is']('element',_0x198a('0xb4'))?_0x2493dd[_0x198a('0x46')](_0x198a('0xac'))+0x1:_0x2493dd['getAttribute']('vid_end')+0x1);}else for(let _0x1cc4d6=0x0;_0x1cc4d6<_0x247304['offsetSize'];_0x1cc4d6++)_0x2ab746[_0x198a('0x25')](new _0xb89447(_0x198a('0xb4'),{'vid':null===_0x768eb7?this[_0x198a('0x3f')]++:_0x768eb7++}));if(_0x2b7c03['is']('documentFragment')){const _0x2d6139=new _0x2d8a24(_0x2ab746);return _0x2d6139[_0x198a('0x87')]=_0x2b7c03[_0x198a('0x87')],_0x2d6139;}return _0x1164c5['_setAttribute'](_0x198a('0x2e'),null===_0x768eb7?this[_0x198a('0x3f')]++:_0x768eb7++),_0x1164c5[_0x198a('0x34')](0x0,_0x2ab746),_0x1164c5;}[_0x198a('0x16')](_0x117f10,_0x22e267,_0x124047){this[_0x198a('0xa6')]();const {roots:_0x310386,markers:_0x52d981}=this['_savedMetaData'][_0x198a('0x89')](_0x117f10);this['_baseRoots']=new Map(_0x310386);for(const [_0xcd65ba,_0x46ff67]of this[_0x198a('0xbd')])if(_0x198a('0x8d')!==_0xcd65ba&&(this['_diffRoots'][_0x198a('0x55')](_0xcd65ba,B(_0x46ff67)),_0x124047)){const _0x5ec97a=this['_revisionId'];this['_idsRoots'][_0x198a('0x55')](_0xcd65ba,this[_0x198a('0x38')](_0x46ff67)),this['_baseIdsRoots'][_0x198a('0x55')](_0xcd65ba,this[_0x198a('0x38')](_0x46ff67,_0x5ec97a));}this[_0x198a('0xd')]=this[_0x198a('0x3f')],this['_diffRoots']['set']('$graveyard',B(this[_0x198a('0xbd')][_0x198a('0x89')](_0x198a('0x8d')))),_0x124047&&this[_0x198a('0x11')][_0x198a('0x55')](_0x198a('0x8d'),this[_0x198a('0x38')](this[_0x198a('0xbd')]['get'](_0x198a('0x8d'))));for(const [_0x5776de,_0x494d04]of _0x52d981){const _0x555419=this['_baseRoots'][_0x198a('0x89')](_0x494d04[_0x198a('0x87')]),_0x44c2ea=this[_0x198a('0xa7')][_0x198a('0x89')](_0x494d04['rootName']),_0x2f8946=new _0x2cb92c(this['_fixPosition'](_0x494d04[_0x198a('0x2f')],_0x555419),this[_0x198a('0xa3')](_0x494d04[_0x198a('0x9e')],_0x555419)),_0xb85b4a=this[_0x198a('0x81')](_0x2f8946,_0x44c2ea);_0x555419[_0x198a('0x9c')][_0x198a('0x55')](_0x5776de,_0x2f8946),this[_0x198a('0x54')][_0x198a('0x55')](_0x5776de,_0xb85b4a);}this[_0x198a('0x66')](_0x117f10,_0x22e267,_0x124047);}[_0x198a('0x66')](_0x49dc50,_0x437649,_0x423ad7){for(const _0x28bc89 of this[_0x198a('0x12')][_0x198a('0xdd')](_0x49dc50,_0x437649))this['_handleOperation'](_0x28bc89,_0x423ad7);for(const _0x348885 of this[_0x198a('0xa7')]['values']())_0x348885[_0x198a('0x9c')][_0x198a('0x61')]();for(const [_0x2866f7,_0x5d98c5]of this[_0x198a('0x54')]){this[_0x198a('0xa7')][_0x198a('0x89')](_0x5d98c5[_0x198a('0x1d')][_0x198a('0x87')])[_0x198a('0x9c')]['set'](_0x2866f7,_0x5d98c5[_0x198a('0xde')]());}this[_0x198a('0x56')](_0x437649,Array[_0x198a('0xe8')](this[_0x198a('0xa7')])[_0x198a('0xf2')](([_0x465831,_0x262a40])=>[_0x465831,B(_0x262a40)]),this[_0x198a('0x54')]);}[_0x198a('0x10')](_0xf7e1ce){const _0x40d906=Array[_0x198a('0xe8')](this[_0x198a('0x49')]['keys']());_0x40d906[_0x198a('0xa5')]((_0x311854,_0xc01a89)=>_0x311854-_0xc01a89),_0x40d906[_0x198a('0xe7')]();for(const _0x538512 of _0x40d906)if(_0x538512<_0xf7e1ce)return _0x538512;return this[_0x198a('0xef')](),Number[_0x198a('0x3d')];}[_0x198a('0xed')](_0xe36cd6,_0x30e461){const _0x5c6949=Array[_0x198a('0xe8')](_0x30e461['markers'])['map'](([_0x2bc380,_0x4206ad])=>[_0x2bc380,this[_0x198a('0x81')](_0x4206ad,_0xe36cd6)]);_0xe36cd6[_0x198a('0x9c')]=new Map(_0x5c6949);}[_0x198a('0x1c')](_0x2ff51f){for(const _0x1ca6bf of this[_0x198a('0x54')][_0x198a('0x7b')]()){const _0x5631fe=_0x1ca6bf[_0x198a('0x35')](_0x2ff51f),_0x5adb93=_0x2cb92c['_createFromRanges'](_0x5631fe);_0x1ca6bf['start']=_0x5adb93[_0x198a('0x2f')],_0x1ca6bf[_0x198a('0x9e')]=_0x5adb93[_0x198a('0x9e')];}}[_0x198a('0x7c')](_0x4f50b3,_0x2e5862){const _0x34d3c9=this['_cloneOperation'](_0x4f50b3,this[_0x198a('0xa7')]);if(_0x198a('0xb')!==_0x4f50b3[_0x198a('0x24')]&&(_0x34d3c9[_0x198a('0x4d')](),this[_0x198a('0x1c')](_0x34d3c9)),_0x2e5862)switch(_0x34d3c9[_0x198a('0x24')]){case _0x198a('0xae'):this[_0x198a('0x6c')](_0x4f50b3);break;case'move':case _0x198a('0x2b'):case _0x198a('0xc0'):this[_0x198a('0x2d')](_0x4f50b3);break;case _0x198a('0xb7'):this[_0x198a('0x43')](_0x4f50b3);break;case'split':this[_0x198a('0xa0')](_0x4f50b3);break;case _0x198a('0xb'):this[_0x198a('0x1f')](_0x4f50b3);}}['_cloneOperation'](_0x4f8a57,_0x3500ba){const _0x2d9032=_0x4f8a57[_0x198a('0xde')]();return _0x2d9032['_authorId']=_0x4f8a57[_0x198a('0xe1')],this[_0x198a('0x26')](_0x2d9032,_0x3500ba),_0x2d9032;}[_0x198a('0x20')](_0x186960){return _0x186960[_0x198a('0xf2')](_0x48639e=>{const _0x19b771=this['_getVidAttributeName'](_0x48639e);return Number(_0x48639e['item'][_0x198a('0x46')](_0x19b771));});}[_0x198a('0xc5')](_0x45ca7a,_0x28c73a){if(_0x45ca7a['is'](_0x198a('0xf0'),_0x198a('0xb4')))_0x28c73a[_0x198a('0x25')]({'item':_0x45ca7a,'type':'text'});else{_0x45ca7a['is'](_0x198a('0xf0'))&&_0x28c73a[_0x198a('0x25')]({'item':_0x45ca7a,'type':_0x198a('0x0')});for(const _0x1ed18c of _0x45ca7a['getChildren']())this[_0x198a('0xc5')](_0x1ed18c,_0x28c73a);_0x45ca7a['is']('element')&&_0x28c73a[_0x198a('0x25')]({'item':_0x45ca7a,'type':'elementEnd'});}return _0x28c73a;}[_0x198a('0x4a')](){const _0xbb628=this[_0x198a('0xa')][_0x198a('0xd3')]['document']['getRootNames'](),_0x3bc9a4=new Map(this[_0x198a('0xce')]),_0x59bf5a=new Map(_0x3bc9a4),_0x5857d8=new Map(),_0x69e996={'insertions':{},'deletions':{}},_0x10127={'insertions':{},'deletions':{}},_0x389c1b=new Map();for(const _0x34f926 of _0xbb628){const _0x510b82=this['_diffRoots']['get'](_0x34f926),_0x5980ed=this[_0x198a('0xbd')][_0x198a('0x89')](_0x34f926);_0x69e996[_0x198a('0x85')][_0x34f926]=B(_0x510b82),_0x69e996[_0x198a('0xc6')][_0x34f926]=B(_0x5980ed),this['_copyMarkers'](_0x69e996[_0x198a('0xc6')][_0x34f926],_0x5980ed),this[_0x198a('0xed')](_0x69e996['insertions'][_0x34f926],_0x510b82),_0x10127['insertions'][_0x34f926]=this['_generateTape'](this[_0x198a('0x11')]['get'](_0x34f926),[]),_0x10127[_0x198a('0xc6')][_0x34f926]=this[_0x198a('0xc5')](this['_baseIdsRoots'][_0x198a('0x89')](_0x34f926),[]);}for(const _0x45e2b0 of _0xbb628){const _0x43ab5f=_0x10127[_0x198a('0x85')][_0x45e2b0];for(const _0x2a9fbd of _0x43ab5f){const _0x19e776=this[_0x198a('0x7a')](_0x2a9fbd),_0x4ffad0=_0x2a9fbd['item'][_0x198a('0x46')](_0x19e776);_0x59bf5a[_0x198a('0x88')](_0x4ffad0),_0x4ffad0>=this[_0x198a('0xd')]&&_0x5857d8[_0x198a('0x55')](_0x4ffad0,_0x3bc9a4[_0x198a('0x89')](_0x4ffad0));}}for(const _0x36c9d7 of _0xbb628){const _0x4d2f58=_0x10127[_0x198a('0x85')][_0x36c9d7],_0x840302=this['_getBaseVids'](_0x10127['deletions'][_0x36c9d7]);let _0x41e68e=0x0;for(const _0x122779 of _0x4d2f58){const _0x50b7e1=this[_0x198a('0x7a')](_0x122779),_0x3acea0=_0x122779[_0x198a('0xc3')][_0x198a('0x46')](_0x50b7e1);if(!_0x5857d8[_0x198a('0x74')](_0x3acea0)&&!_0x389c1b['has'](_0x3acea0)){if(_0x59bf5a[_0x198a('0x74')](_0x3acea0))_0x41e68e++;else{if(_0x3acea0!=_0x840302[_0x41e68e]){const _0x74eaf9=_0x3bc9a4[_0x198a('0x89')](_0x3acea0)||_0x3bc9a4[_0x198a('0x89')](_0x840302[_0x41e68e]);for(;_0x3acea0!=_0x840302[_0x41e68e];)_0x59bf5a[_0x198a('0x74')](_0x840302[_0x41e68e])||(_0x389c1b[_0x198a('0x55')](_0x840302[_0x41e68e],_0x74eaf9),_0x3bc9a4[_0x198a('0x55')](_0x840302[_0x41e68e],_0x74eaf9)),_0x41e68e++;}_0x41e68e++;}}}}for(const _0x107ff2 of _0xbb628){const _0x149960=_0x10127['insertions'][_0x107ff2];for(const _0x14076f of _0x149960){const _0x269e30=this[_0x198a('0x7a')](_0x14076f),_0x69d4a7=_0x14076f['item'][_0x198a('0x46')](_0x269e30);if(_0x389c1b[_0x198a('0x74')](_0x69d4a7)){const _0x3621d4=_0x389c1b[_0x198a('0x89')](_0x69d4a7);_0x59bf5a[_0x198a('0x74')](_0x69d4a7)||_0x59bf5a[_0x198a('0x55')](_0x69d4a7,{..._0x3621d4}),_0x5857d8['set'](_0x69d4a7,{..._0x3621d4});}}}for(const _0x5321fc of _0x59bf5a[_0x198a('0xeb')]())_0x5321fc>=this[_0x198a('0xd')]&&_0x59bf5a[_0x198a('0x88')](_0x5321fc);const _0x3899bd=new Map();for(const _0x2b69e1 of _0xbb628){let _0x3e8a1e=_0x10127[_0x198a('0x85')][_0x2b69e1];for(const _0x301c60 of _0x3e8a1e)if(_0x301c60[_0x198a('0xc3')]['is'](_0x198a('0xf0'),_0x198a('0xc4'))){const _0xb17319=this[_0x198a('0x7a')](_0x301c60),_0x300fc8=_0x301c60['item'][_0x198a('0x46')](_0xb17319);if(_0x5857d8[_0x198a('0x74')](_0x300fc8)){const _0x27941f=_0x301c60[_0x198a('0xc3')][_0x198a('0xd7')]['parent']['getAttribute']('vid_start'),_0x29fa34=_0x3899bd[_0x198a('0x89')](_0x27941f)||new Set();_0x29fa34[_0x198a('0x45')](_0x5857d8[_0x198a('0x89')](_0x300fc8)[_0x198a('0x17')]),_0x3899bd[_0x198a('0x55')](_0x27941f,_0x29fa34);}}_0x3e8a1e=_0x10127[_0x198a('0xc6')][_0x2b69e1];for(const _0x1f8678 of _0x3e8a1e)if(_0x1f8678[_0x198a('0xc3')]['is']('element','tableCell')){const _0x57fda7=this[_0x198a('0x7a')](_0x1f8678),_0x29a75f=_0x1f8678[_0x198a('0xc3')][_0x198a('0x46')](_0x57fda7);if(_0x59bf5a[_0x198a('0x74')](_0x29a75f)){const _0x4f07db=_0x1f8678[_0x198a('0xc3')][_0x198a('0xd7')][_0x198a('0xd7')]['getAttribute'](_0x198a('0xe3')),_0x5dccad=_0x3899bd['get'](_0x4f07db)||new Set();_0x5dccad['add'](_0x59bf5a[_0x198a('0x89')](_0x29a75f)[_0x198a('0x17')]),_0x3899bd['set'](_0x4f07db,_0x5dccad);}}for(const _0x1aff3c of _0x3899bd[_0x198a('0xeb')]())(_0x5857d8[_0x198a('0x74')](_0x1aff3c)||_0x59bf5a[_0x198a('0x74')](_0x1aff3c))&&_0x3899bd[_0x198a('0x88')](_0x1aff3c);}for(const _0x1f110a of _0xbb628){const _0x2700e2=_0x10127[_0x198a('0x85')][_0x1f110a];let _0x23ccd0=null,_0x25bdb5=null;for(const _0x25daca of _0x2700e2){const _0x1e3a9d=this['_getVidAttributeName'](_0x25daca),_0x3d6e62=_0x25daca[_0x198a('0xc3')][_0x198a('0x46')](_0x1e3a9d),_0x48ea5a=_0x3899bd[_0x198a('0x89')](_0x3d6e62);_0x48ea5a&&_0x198a('0x0')==_0x25daca[_0x198a('0x24')]&&(_0x23ccd0=Array[_0x198a('0xe8')](_0x48ea5a)[0x0],_0x25bdb5=_0x25daca[_0x198a('0xc3')][_0x198a('0x46')](_0x198a('0x2e'))),_0x23ccd0&&(_0x59bf5a[_0x198a('0x55')](_0x3d6e62,{'userId':_0x23ccd0}),_0x5857d8[_0x198a('0x55')](_0x3d6e62,{'userId':_0x23ccd0})),_0x3d6e62==_0x25bdb5&&(_0x23ccd0=null,_0x25bdb5=null);}}const _0x2258f5={},_0x2eea50=new Set();for(const _0x1425f3 of _0xbb628){const _0x2cc6aa=_0x69e996[_0x198a('0xc6')][_0x1425f3],_0x4f5746=_0x69e996[_0x198a('0x85')][_0x1425f3];for(const {userId:_0x1eeaac}of this['_touchedMarkers'][_0x198a('0x7b')]())null!==_0x1eeaac&&_0x2eea50[_0x198a('0x45')](_0x1eeaac);this[_0x198a('0xd1')](_0x4f5746,_0x10127[_0x198a('0x85')][_0x1425f3],_0x5857d8,'insertion',_0x2eea50),this[_0x198a('0xd1')](_0x2cc6aa,_0x10127[_0x198a('0xc6')][_0x1425f3],_0x59bf5a,'deletion',_0x2eea50),_0x2258f5[_0x1425f3]={'insertions':this[_0x198a('0xbe')](_0x4f5746),'deletions':this[_0x198a('0xbe')](_0x2cc6aa)};}return{'diffData':_0x2258f5,'authorsIds':Array['from'](_0x2eea50)};}[_0x198a('0x57')](_0x42b91b){for(const [,_0xab769a]of _0x42b91b['markers']){const _0x1ef80b=_0xab769a[_0x198a('0x2f')][_0x198a('0x29')]()[_0x198a('0x4b')](_0x521110=>_0x198a('0xc4')==_0x521110[_0x198a('0xe5')]);for(const _0x3d61c7 of _0x1ef80b)0x1==_0x3d61c7[_0x198a('0xd9')]&&_0x3d61c7['getChild'](0x0)['is'](_0x198a('0xf0'),_0x198a('0x86'))&&_0x3d61c7['getChild'](0x0)[_0x198a('0xb2')](_0x198a('0xa4'),!0x0);}}['_prepareViewToSave'](_0xa42b20){this[_0x198a('0x57')](_0xa42b20);const _0x231cac=this[_0x198a('0xa')][_0x198a('0x72')][_0x198a('0x4f')](_0xa42b20,{}),_0x5cc4b5=Array['from'](_0x231cac[_0x198a('0x60')]())['map'](_0x5d40da=>this[_0x198a('0x8b')](_0x5d40da));return JSON[_0x198a('0x8a')](_0x5cc4b5);}['_getViewJson'](_0x4582ed){if(_0x4582ed['is']('text'))return _0x4582ed[_0x198a('0x72')];return{'type':Object[_0x198a('0xeb')](T)[_0x198a('0xb0')](_0xb00526=>_0x4582ed instanceof T[_0xb00526]),'name':_0x4582ed[_0x198a('0xe5')],'attributes':Array[_0x198a('0xe8')](_0x4582ed['getAttributes']()),'children':Array[_0x198a('0xe8')](_0x4582ed[_0x198a('0x60')]())[_0x198a('0xf2')](_0x253d44=>this[_0x198a('0x8b')](_0x253d44))};}[_0x198a('0xd1')](_0x36c9a3,_0x2d775c,_0x34e75d,_0x470459,_0x4c8f65){let _0x43ca09=null,_0x1c3969=null,_0x39febf=0x0;const _0x31d07b=this[_0x198a('0xa')][_0x198a('0xd3')];for(let _0x4e2aa7=0x0;_0x4e2aa7<_0x2d775c['length'];_0x4e2aa7++){const _0x569524=this[_0x198a('0x7a')](_0x2d775c[_0x4e2aa7]),_0x3b864b=_0x2d775c[_0x4e2aa7][_0x198a('0xc3')][_0x198a('0x46')](_0x569524),_0x3c4d43=_0x34e75d['get'](_0x3b864b),_0x8d6627=_0x4e2aa7==_0x2d775c[_0x198a('0x8e')]-0x1;(!_0x43ca09&&_0x3c4d43&&(_0x43ca09=_0x3c4d43,_0x1c3969=_0x2d775c[_0x4e2aa7]),_0x43ca09&&(!_0x3c4d43||_0x3c4d43[_0x198a('0x17')]!=_0x43ca09[_0x198a('0x17')]))&&(_0x16bd9a(_0x3c4d43,q(_0x1c3969,_0x36c9a3,_0x31d07b),q(_0x2d775c[_0x4e2aa7],_0x36c9a3,_0x31d07b)),_0x43ca09=_0x3c4d43||null,_0x1c3969=_0x3c4d43?_0x2d775c[_0x4e2aa7]:null),_0x43ca09&&_0x8d6627&&_0x16bd9a(_0x3c4d43,q(_0x1c3969,_0x36c9a3,_0x31d07b),G(_0x2d775c[_0x4e2aa7],_0x36c9a3,_0x31d07b));}function _0x16bd9a(_0x33df12,_0x1005a3,_0x2a69b0){const _0x4b0177=_0x43ca09[_0x198a('0x17')],_0x2dbe21='revision:'+_0x470459+':'+_0x4b0177+':'+_0x39febf++,_0x2c054b=_0x31d07b['createRange'](_0x1005a3,_0x2a69b0);_0x36c9a3[_0x198a('0x9c')]['set'](_0x2dbe21,_0x2c054b),null!==_0x4b0177&&_0x4c8f65[_0x198a('0x45')](_0x4b0177);}}[_0x198a('0x7a')](_0x51214e){switch(_0x51214e[_0x198a('0x24')]){case'elementStart':return _0x198a('0xe3');case _0x198a('0xe9'):return _0x198a('0x2e');default:return _0x198a('0xac');}}['_fixOperation'](_0x185a79,_0x312557){_0x185a79[_0x198a('0x1e')]=null;for(const _0x415527 in _0x185a79){if(_0x185a79[_0x415527]instanceof _0x56f436){const _0x4dd211=_0x312557[_0x198a('0x89')](_0x185a79[_0x415527][_0x198a('0x1d')]['rootName']);_0x185a79[_0x415527]=this[_0x198a('0xa3')](_0x185a79[_0x415527],_0x4dd211);}if(_0x185a79[_0x415527]instanceof _0x2cb92c){const _0x547c13=_0x312557['get'](_0x185a79[_0x415527]['root']['rootName']);_0x185a79[_0x415527]=this[_0x198a('0x81')](_0x185a79[_0x415527],_0x547c13);}}_0x185a79[_0x198a('0x1d')]&&(_0x185a79['root']=_0x312557[_0x198a('0x89')](_0x185a79['root']['rootName']));}[_0x198a('0x81')](_0x115835,_0x2be847){return this[_0x198a('0xa')]['model']['createRange'](this['_fixPosition'](_0x115835[_0x198a('0x2f')],_0x2be847),this[_0x198a('0xa3')](_0x115835[_0x198a('0x9e')],_0x2be847));}[_0x198a('0xa3')](_0x22f84b,_0xbdd4b3){return this[_0x198a('0xa')][_0x198a('0xd3')][_0x198a('0xd5')](_0xbdd4b3,_0x22f84b[_0x198a('0x9f')],_0x22f84b['stickiness']);}['_handleInsertOperation'](_0x3d5a54){const _0x48d949=this[_0x198a('0x11')][_0x198a('0x89')](_0x3d5a54['position']['root'][_0x198a('0x87')]),_0x3231b6=this[_0x198a('0xa3')](_0x3d5a54[_0x198a('0x7f')],_0x48d949),_0x2f9bb4=null===_0x3d5a54[_0x198a('0xe1')]?null:_0x3d5a54[_0x198a('0xe1')]||this['editor'][_0x198a('0x22')][_0x198a('0x89')](_0x198a('0x30'))['me']['id'],_0x4a0e95=_0x3231b6[_0x198a('0xd7')],_0x329d49=this['_revisionId'],_0x306beb=[];for(const _0x3b97b5 of _0x3d5a54['nodes'])if(_0x3b97b5['is']('element'))_0x306beb[_0x198a('0x25')](this[_0x198a('0x38')](_0x3b97b5));else for(let _0x17b94d=0x0;_0x17b94d<_0x3b97b5[_0x198a('0x77')];_0x17b94d++)_0x306beb[_0x198a('0x25')](new _0xb89447('$text',{'vid':this['_revisionId']++}));const _0x52932c=this['_revisionId'];for(let _0x27f413=_0x329d49;_0x27f413<_0x52932c;_0x27f413++)this[_0x198a('0xce')][_0x198a('0x55')](_0x27f413,{'userId':_0x2f9bb4});_0x4a0e95[_0x198a('0x34')](_0x3231b6[_0x198a('0xc')],_0x306beb);}[_0x198a('0x2d')](_0x36b6bd){(_0x36b6bd=this['_cloneOperation'](_0x36b6bd,this['_idsRoots']))['_execute']();const _0x22bc53=null===_0x36b6bd['_authorId']?null:_0x36b6bd[_0x198a('0xe1')]||this['editor'][_0x198a('0x22')][_0x198a('0x89')](_0x198a('0x30'))['me']['id'],_0x2ea2a3=_0x36b6bd[_0x198a('0xca')](),_0x264fcf=_0x2ea2a3[_0x198a('0xd7')],_0x1703a8=_0x2ea2a3[_0x198a('0xc')];!function _0x20b10a(_0x3e73be,_0x52a28c,_0x2271e3,_0x556335){for(let _0x177a51=_0x2271e3;_0x177a51<_0x556335;_0x177a51++){const _0x25fc70=_0x52a28c[_0x198a('0x73')](_0x177a51);_0x25fc70['is'](_0x198a('0xf0'),_0x198a('0xb4'))?_0x3e73be['set'](_0x25fc70[_0x198a('0x46')](_0x198a('0xac')),{'userId':_0x22bc53}):(_0x3e73be[_0x198a('0x55')](_0x25fc70[_0x198a('0x46')](_0x198a('0xe3')),{'userId':_0x22bc53}),_0x20b10a(_0x3e73be,_0x25fc70,0x0,_0x25fc70[_0x198a('0xd9')]),_0x3e73be[_0x198a('0x55')](_0x25fc70['getAttribute'](_0x198a('0x2e')),{'userId':_0x22bc53}));}}(this[_0x198a('0xce')],_0x264fcf,_0x1703a8,_0x1703a8+_0x36b6bd['howMany']);}[_0x198a('0x43')](_0x47d439){const _0x347483=null===(_0x47d439=this[_0x198a('0xee')](_0x47d439,this[_0x198a('0x11')]))['_authorId']?null:_0x47d439[_0x198a('0xe1')]||this[_0x198a('0xa')][_0x198a('0x22')][_0x198a('0x89')](_0x198a('0x30'))['me']['id'],_0x4d865e=_0x47d439[_0x198a('0x48')]['parent'],_0x159274=_0x47d439[_0x198a('0x44')][_0x198a('0xd7')],_0x222cc9=_0x4d865e[_0x198a('0x46')](_0x198a('0x2e')),_0x4ec756=_0x159274[_0x198a('0x46')](_0x198a('0xe3'));_0x4d865e['_setAttribute'](_0x198a('0x2e'),_0x159274[_0x198a('0x46')](_0x198a('0x2e'))),_0x159274[_0x198a('0xb2')](_0x198a('0x2e'),_0x222cc9),this[_0x198a('0xce')][_0x198a('0x55')](_0x4ec756,{'userId':_0x347483}),this['_touched'][_0x198a('0x55')](_0x222cc9,{'userId':_0x347483}),_0x47d439[_0x198a('0x4d')]();}[_0x198a('0xa0')](_0x3dfba7){const _0x1078cf=null===(_0x3dfba7=this[_0x198a('0xee')](_0x3dfba7,this[_0x198a('0x11')]))[_0x198a('0xe1')]?null:_0x3dfba7['_authorId']||this[_0x198a('0xa')][_0x198a('0x22')]['get'](_0x198a('0x30'))['me']['id'],_0x535bd4=_0x3dfba7[_0x198a('0xda')],_0x5e53c7=_0x3dfba7[_0x198a('0xaf')][_0x198a('0xd7')];_0x3dfba7['_execute']();const _0x5ee22e=_0x5e53c7[_0x198a('0x46')]('vid_end'),_0x530938=_0x3dfba7[_0x198a('0xa2')]['nodeAfter'];if(_0x535bd4){const _0x515721=_0x530938['getAttribute']('vid_end'),_0x422458=_0x5e53c7['getAttribute'](_0x198a('0x2e'));_0x5e53c7[_0x198a('0xb2')]('vid_end',_0x515721),_0x530938[_0x198a('0xb2')]('vid_end',_0x422458),this[_0x198a('0xce')][_0x198a('0x55')](_0x5e53c7['getAttribute']('vid_end'),{'userId':_0x1078cf}),this[_0x198a('0xce')]['set'](_0x530938[_0x198a('0x46')](_0x198a('0xe3')),{'userId':_0x1078cf});}else{const _0x348e33=this[_0x198a('0x3f')]++,_0x2b683d=this['_revisionId']++;_0x5e53c7[_0x198a('0xb2')]('vid_end',_0x348e33),_0x530938[_0x198a('0xb2')]('vid_start',_0x2b683d),_0x530938[_0x198a('0xb2')](_0x198a('0x2e'),_0x5ee22e),this['_touched']['set'](_0x348e33,{'userId':_0x1078cf}),this[_0x198a('0xce')]['set'](_0x2b683d,{'userId':_0x1078cf});}}[_0x198a('0x1f')](_0x4c58ce){if(!_0x4c58ce['affectsData'])return;const _0xa59afc=(_0x4c58ce=this[_0x198a('0xee')](_0x4c58ce,this[_0x198a('0xa7')]))[_0x198a('0x2c')]?_0x4c58ce['oldRange'][_0x198a('0x1d')]:null,_0x127b8c=_0x4c58ce[_0x198a('0x39')]?_0x4c58ce[_0x198a('0x39')][_0x198a('0x1d')]:null;_0xa59afc&&this[_0x198a('0x54')][_0x198a('0x88')](_0x4c58ce['name']),_0x127b8c&&this[_0x198a('0x54')]['set'](_0x4c58ce[_0x198a('0xe5')],_0x4c58ce[_0x198a('0x39')][_0x198a('0xde')]());const _0x10f133=null===_0x4c58ce[_0x198a('0xe1')]?null:_0x4c58ce[_0x198a('0xe1')]||this['editor'][_0x198a('0x22')][_0x198a('0x89')](_0x198a('0x30'))['me']['id'],_0x3a4306=_0x4c58ce['name'];if(!this['_touchedMarkers'][_0x198a('0x74')](_0x3a4306))return void this['_touchedMarkers'][_0x198a('0x55')](_0x3a4306,{'range':_0x4c58ce[_0x198a('0x2c')],'userId':_0x10f133});const _0xcab262=this[_0x198a('0x63')][_0x198a('0x89')](_0x3a4306),_0x51658f=_0xcab262[_0x198a('0x80')],_0x589d90=_0x4c58ce[_0x198a('0x39')];null==_0x51658f&&null==_0x589d90||_0x51658f&&_0x589d90&&_0x51658f[_0x198a('0x37')](_0x589d90)?this[_0x198a('0x63')][_0x198a('0x88')](_0x4c58ce[_0x198a('0xe5')]):_0xcab262['userId']=_0x10f133;}}function B(_0x4f3c93){const _0x420083=new _0x2d8a24();_0x420083[_0x198a('0x87')]=_0x4f3c93[_0x198a('0x87')];for(const _0x24a77b of _0x4f3c93[_0x198a('0x60')]()){const _0x5a4de5=_0x24a77b[_0x198a('0x18')](!0x0);_0x420083[_0x198a('0x3a')](_0x5a4de5);}return _0x420083;}function q(_0x802ab6,_0x595168,_0x1236e2){const _0x72a6ea='elementEnd'==_0x802ab6[_0x198a('0x24')]?_0x1236e2[_0x198a('0x93')](_0x802ab6[_0x198a('0xc3')],'end'):_0x1236e2[_0x198a('0x1a')](_0x802ab6[_0x198a('0xc3')]);return _0x72a6ea[_0x198a('0x1d')]=_0x595168,_0x72a6ea;}function G(_0x2953a5,_0x2e5a86,_0xef642f){const _0x1cf9e7=_0x198a('0x0')==_0x2953a5[_0x198a('0x24')]?_0xef642f[_0x198a('0x93')](_0x2953a5['item'],0x0):_0xef642f[_0x198a('0xe0')](_0x2953a5[_0x198a('0xc3')]);return _0x1cf9e7[_0x198a('0x1d')]=_0x2e5a86,_0x1cf9e7;}