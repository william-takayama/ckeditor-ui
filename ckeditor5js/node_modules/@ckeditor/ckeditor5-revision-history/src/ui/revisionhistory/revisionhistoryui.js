/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x383c=['change:isOpen','isEnabled','set','saveButtonView','Revision\x20history','RevisionTracker','plugins','init','add','requires','length','children','isOpen','revisionName','focus','isReady','bind','panelView','remove','execute','isReadOnly','get','revisionHistory','config','submit','componentFactory','cancel','Open\x20revision\x20history','RevisionHistoryUI','pluginName','reset','showRevisionViewerCallback'];(function(_0x4d8ba3,_0x383c92){const _0x12fec4=function(_0x2de07d){while(--_0x2de07d){_0x4d8ba3['push'](_0x4d8ba3['shift']());}};_0x12fec4(++_0x383c92);}(_0x383c,0x1aa));const _0x12fe=function(_0x4d8ba3,_0x383c92){_0x4d8ba3=_0x4d8ba3-0x0;let _0x12fec4=_0x383c[_0x4d8ba3];return _0x12fec4;};import{Plugin as _0x1a3240}from'ckeditor5/src/core';import{ListView as _0x2ef004,ListItemView as _0x28aa03,ButtonView as _0x1911c9,createDropdown as _0x3c1042}from'ckeditor5/src/ui';import _0xf09417 from'../../revisiontracker';import _0x3504e0 from'./revisionhistorysaverevisionformview';import _0x3cd290 from'../../../theme/icons/revision-history.svg';import{getTranslation as _0x2950ec}from'../../utils/common-translations';export default class y extends _0x1a3240{static get[_0x12fe('0x13')](){return _0x12fe('0x12');}static get[_0x12fe('0x1f')](){return[_0xf09417];}[_0x12fe('0x1d')](){const _0x979b53=this['editor'],_0x36f399=_0x979b53[_0x12fe('0x1c')][_0x12fe('0xb')](_0x12fe('0x1b'));_0x979b53['ui'][_0x12fe('0xf')][_0x12fe('0x1e')](_0x12fe('0xc'),_0x4ada74=>{const _0xbe0f7d=_0x3c1042(_0x4ada74),_0x9965d=_0xbe0f7d[_0x12fe('0x7')][_0x12fe('0x1')],_0x2db05c=new _0x2ef004(_0x4ada74),_0x6e4a12=new _0x28aa03(_0x4ada74),_0x396adb=new _0x1911c9(_0x4ada74),_0x316ee9=new _0x28aa03(_0x4ada74),_0x35cd02=new _0x1911c9(_0x4ada74),_0x173194=new _0x3504e0(_0x4ada74);function _0x5cfbfa(){_0x9965d[_0x12fe('0x0')]&&_0x9965d[_0x12fe('0x8')](0x0),_0x9965d[_0x12fe('0x1e')](_0x2db05c);}function _0x484680(){_0xbe0f7d[_0x12fe('0x2')]=!0x1,_0x979b53['editing']['view'][_0x12fe('0x4')]();}return _0xbe0f7d[_0x12fe('0x6')](_0x12fe('0x17'))['to'](_0x36f399,_0x12fe('0x5'),_0x36f399,_0x12fe('0x17'),_0x979b53,_0x12fe('0xa'),(_0x166e5a,_0x18aaf0,_0x179290)=>_0x166e5a&&_0x18aaf0&&!_0x179290),_0xbe0f7d['buttonView']['set']({'icon':_0x3cd290,'label':_0x2950ec(_0x4ada74,_0x12fe('0x1a')),'tooltip':!0x0}),_0x396adb[_0x12fe('0x18')]({'label':_0x2950ec(_0x4ada74,'Save\x20current\x20revision'),'withText':!0x0}),_0x396adb[_0x12fe('0x6')](_0x12fe('0x17'))['to'](_0x36f399,_0x12fe('0x5'),_0x36f399,_0x12fe('0x17'),_0x979b53,_0x12fe('0xa'),(_0x1afe2e,_0x443dc1,_0x54c9f7)=>_0x1afe2e&&_0x443dc1&&!_0x54c9f7),_0x396adb['on'](_0x12fe('0x9'),()=>function(){_0x9965d['length']&&_0x9965d[_0x12fe('0x8')](0x0),(_0x173194[_0x12fe('0x14')](),_0x9965d[_0x12fe('0x1e')](_0x173194),_0x173194['focus']());}()),_0x35cd02[_0x12fe('0x18')]({'label':_0x2950ec(_0x4ada74,_0x12fe('0x11')),'withText':!0x0}),_0x35cd02['bind']('isEnabled')['to'](_0x36f399,_0x12fe('0x5'),_0x979b53,_0x12fe('0xa'),(_0x385dbc,_0x4aade2)=>_0x385dbc&&!_0x4aade2),_0x35cd02['on']('execute',()=>{_0x979b53[_0x12fe('0xd')][_0x12fe('0xb')]('revisionHistory')[_0x12fe('0x15')](),_0x484680();}),_0x6e4a12[_0x12fe('0x1')]['add'](_0x396adb),_0x316ee9[_0x12fe('0x1')]['add'](_0x35cd02),_0x2db05c['items']['addMany']([_0x6e4a12,_0x316ee9]),_0xbe0f7d['on'](_0x12fe('0x16'),()=>_0x5cfbfa()),_0x173194[_0x12fe('0x19')]['bind'](_0x12fe('0x17'))['to'](_0x36f399,'isReady',_0x36f399,_0x12fe('0x17'),_0x979b53,_0x12fe('0xa'),(_0x3b5c43,_0x17291f,_0x9b6168)=>_0x3b5c43&&_0x17291f&&!_0x9b6168),_0x173194['on'](_0x12fe('0xe'),()=>(_0x979b53[_0x12fe('0x1c')][_0x12fe('0xb')](_0xf09417)['saveRevision']({'name':_0x173194[_0x12fe('0x3')]}),void _0x484680())),_0x173194['on'](_0x12fe('0x10'),()=>_0x5cfbfa()),_0x173194['render'](),_0x5cfbfa(),_0xbe0f7d;});}}