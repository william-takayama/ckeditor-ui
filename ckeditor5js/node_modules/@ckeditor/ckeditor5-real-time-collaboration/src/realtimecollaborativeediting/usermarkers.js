/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x12ce=['editing','root','getContainedElement','user:range:','checkChild','element','set','change','editor','tableCell','reconvertMarker','$graveyard','commands','afterInit','applyOperation','user:range','markerName','$text','&#8203;<span\x20class=\x22ck-user__marker-line\x22><span\x20class=\x22ck-user__marker-dot\x22></span></span>','addMarker','has','update:user:range','getUserBySessionId','name','end','batch','for','change:range','ck-user__selection','start','plugins','getSelectionClass','conversion','getStart','getAttribute','editingDowncast','isInline','createRange','createUIElement','contenteditable','enqueueChange','data-session-id','priority','selection','requires','deletionPosition','marker','user:','getMarkerClass','rootName','getCustomProperty','toDomElement','get','model','parent','schema','ck-user__marker\x20','isObject','getFirstRange','getRange','hasContent','color','UserMarkers','getPositions','document','user:position:','split','mySessionId','delete','removeMarker','userPositionMarker','isLimit','nodeAfter','getNearestSelectionRange','span','detach','oldRange','hasDomSelection','newRange','markers','init'];(function(_0x56a014,_0x12cea5){const _0x476f03=function(_0x3afdee){while(--_0x3afdee){_0x56a014['push'](_0x56a014['shift']());}};_0x476f03(++_0x12cea5);}(_0x12ce,0x1d0));const _0x476f=function(_0x56a014,_0x12cea5){_0x56a014=_0x56a014-0x0;let _0x476f03=_0x12ce[_0x56a014];return _0x476f03;};import{Plugin as _0x148dfd}from'ckeditor5/src/core';import _0x493ea2 from'./sessions';import{LiveRange as _0x3f6cfb}from'ckeditor5/src/engine';import'../../theme/usermarkers.css';export default class G extends _0x148dfd{static get[_0x476f('0x42')](){return[_0x493ea2];}static get['pluginName'](){return _0x476f('0x3');}[_0x476f('0x15')](){const _0x3a6565=this[_0x476f('0x1e')],_0x1b8715=_0x3a6565[_0x476f('0x34')][_0x476f('0x4a')](_0x493ea2);_0x3a6565[_0x476f('0x36')]['for'](_0x476f('0x39'))['markerToElement']({'model':'user:position','view':(_0x3c867f,{writer:_0x2529bd})=>function(_0x387b2b,_0x166ce1,_0x1bf76d,_0x2b58a5){const _0x1ecf26=_0x387b2b[_0x476f('0x26')]['split'](':')[0x2],_0x1bde28=_0x1bf76d[_0x476f('0x2c')](_0x1ecf26);if(!_0x1bde28||_0x1ecf26===_0x1bf76d[_0x476f('0x8')])return;if(!_0x2b58a5[_0x476f('0x4b')]['schema'][_0x476f('0x1a')](_0x387b2b['markerRange'][_0x476f('0x33')],_0x476f('0x27')))return;const _0x45ad2f={'class':_0x476f('0x4e')+_0x1bde28[_0x476f('0x2')][_0x476f('0x46')](),'data-name':_0x1bde28['name'],'data-session-id':_0x1ecf26},_0x7ed020=_0x2b58a5[_0x476f('0x4b')]['markers'][_0x476f('0x4a')](_0x387b2b[_0x476f('0x26')])[_0x476f('0x37')](),_0x23d1ca=_0x7ed020[_0x476f('0xd')],_0x57ccff=_0x2b58a5[_0x476f('0x4b')][_0x476f('0x4d')];if(_0x23d1ca&&_0x57ccff[_0x476f('0x4f')](_0x23d1ca)&&_0x57ccff[_0x476f('0x3a')](_0x23d1ca)&&!_0x2b58a5[_0x476f('0x4b')]['markers']['get'](_0x476f('0x19')+_0x1ecf26)[_0x476f('0x0')]()['isCollapsed'])return;const _0x34b19c=_0x7ed020[_0x476f('0x4c')];_0x2b58a5[_0x476f('0x4b')]['schema'][_0x476f('0xc')](_0x34b19c)&&!_0x2b58a5[_0x476f('0x4b')][_0x476f('0x1')](_0x34b19c)&&(_0x45ad2f[_0x476f('0x3d')]=!0x1);const _0x28d3e0=function(_0x54abd8,_0x2414e6){const _0x563e65=_0x54abd8[_0x476f('0x3c')](_0x476f('0xf'),_0x2414e6);return _0x54abd8['setCustomProperty'](_0x476f('0xb'),!0x0,_0x563e65),_0x563e65['render']=function(_0x27fa42){const _0x37bebb=this[_0x476f('0x49')](_0x27fa42);return _0x37bebb['innerHTML']=_0x476f('0x28'),_0x37bebb;},_0x563e65['isSimilar']=function(_0x4dee85){return this[_0x476f('0x48')](_0x476f('0xb'))&&_0x4dee85[_0x476f('0x48')]('userPositionMarker')&&this[_0x476f('0x38')](_0x476f('0x3f'))==_0x4dee85[_0x476f('0x38')](_0x476f('0x3f'));},_0x563e65;}(_0x166ce1,_0x45ad2f);return _0x28d3e0[_0x476f('0x40')]=0x3e8+_0x1bde28['orderNumber'],_0x28d3e0;}(_0x3c867f,_0x2529bd,_0x1b8715,_0x3a6565)}),_0x3a6565['conversion'][_0x476f('0x30')](_0x476f('0x39'))['markerToHighlight']({'model':_0x476f('0x25'),'view':_0x109db=>function(_0x3ecc90,_0x321e28){const _0x120441=_0x3ecc90[_0x476f('0x26')]['split'](':')[0x2];if(_0x120441===_0x321e28[_0x476f('0x8')])return;const _0x2be0df=_0x321e28[_0x476f('0x2c')](_0x120441);if(!_0x2be0df)return{'id':_0x120441};return{'id':_0x120441,'classes':[_0x476f('0x32'),_0x2be0df[_0x476f('0x2')][_0x476f('0x35')]()],'attributes':{'data-session-id':_0x120441},'priority':0x7d0+_0x2be0df['orderNumber']};}(_0x109db,_0x1b8715)}),function(_0x5b94bb){const _0x35c4f7=_0x5b94bb[_0x476f('0x4b')],_0x2235c2=new Map(),_0x1a6070=_0x5b94bb['plugins'][_0x476f('0x4a')](_0x493ea2);_0x35c4f7['markers']['on'](_0x476f('0x2b'),(_0x266bbc,_0x4f45c2,_0x36f6cd,_0x3a9dd0)=>{if(!_0x3a9dd0&&_0x2235c2['get'](_0x4f45c2['name']))return _0x2235c2[_0x476f('0x4a')](_0x4f45c2['name'])[_0x476f('0x10')](),void _0x2235c2[_0x476f('0x9')](_0x4f45c2[_0x476f('0x2d')]);const _0x4776e3=_0x4f45c2[_0x476f('0x2d')][_0x476f('0x7')](':')[0x2];if(_0x4776e3===_0x1a6070[_0x476f('0x8')])return;const _0x27a2a0=_0x476f('0x6')+_0x4776e3;_0x35c4f7[_0x476f('0x14')][_0x476f('0x2a')](_0x27a2a0)&&_0x5b94bb[_0x476f('0x16')][_0x476f('0x20')](_0x27a2a0),_0x4f45c2['on'](_0x476f('0x31'),(_0x2e7fe8,_0x118555,_0x4fd7e6)=>{if(_0x476f('0x21')!=_0x118555[_0x476f('0x17')][_0x476f('0x47')]&&_0x476f('0x21')==_0x4f45c2[_0x476f('0x0')]()[_0x476f('0x17')][_0x476f('0x47')]&&!_0x2235c2[_0x476f('0x2a')](_0x4f45c2[_0x476f('0x2d')])){const _0x45cc0d=_0x35c4f7[_0x476f('0x4d')]['getNearestSelectionRange'](_0x4fd7e6[_0x476f('0x43')]);if(_0x45cc0d){const _0x2ffef3=_0x3f6cfb['fromRange'](_0x45cc0d);_0x2235c2[_0x476f('0x1c')](_0x4f45c2[_0x476f('0x2d')],_0x2ffef3),_0x2ffef3['on'](_0x476f('0x31'),(_0x1c3755,_0x26f29f,_0x2e3168)=>{if(_0x476f('0x21')==_0x2ffef3[_0x476f('0x17')][_0x476f('0x47')]){const _0x3ccce3=_0x35c4f7[_0x476f('0x4d')][_0x476f('0xe')](_0x2e3168[_0x476f('0x43')]);_0x3ccce3?(_0x2ffef3[_0x476f('0x33')]=_0x3ccce3[_0x476f('0x33')],_0x2ffef3['end']=_0x3ccce3[_0x476f('0x2e')]):(_0x2235c2[_0x476f('0x9')](_0x4f45c2[_0x476f('0x2d')]),_0x2ffef3[_0x476f('0x10')]());}});}}});}),_0x35c4f7['document']['on'](_0x476f('0x1d'),()=>{_0x2235c2['size']>0x0&&_0x35c4f7['enqueueChange']({'isUndoable':!0x1},_0x4537d0=>{for(const [_0x20c3c5,_0x4c70dd]of _0x2235c2)_0x476f('0x21')==_0x35c4f7[_0x476f('0x14')][_0x476f('0x4a')](_0x20c3c5)[_0x476f('0x0')]()[_0x476f('0x17')][_0x476f('0x47')]&&(ee(_0x20c3c5['split'](':')[0x2],_0x4c70dd['toRange'](),_0x35c4f7,_0x4537d0),_0x4c70dd[_0x476f('0x10')]());_0x2235c2['clear']();});});}(_0x3a6565);}[_0x476f('0x23')](){const _0x2cbddf=this[_0x476f('0x1e')],_0x120075=_0x2cbddf[_0x476f('0x22')][_0x476f('0x4a')]('undo');_0x120075&&_0x2cbddf[_0x476f('0x4b')]['on'](_0x476f('0x24'),(_0x32cbaf,_0x43c991)=>{const _0x4ad76a=_0x43c991[0x0];if(_0x476f('0x44')!=_0x4ad76a['type']||!_0x4ad76a['name']['startsWith'](_0x476f('0x45')))return;const _0x4e53ea=_0x4ad76a[_0x476f('0x2f')];_0x120075['_createdBatches'][_0x476f('0x2a')](_0x4e53ea)&&(_0x4ad76a[_0x476f('0x13')]=_0x4ad76a[_0x476f('0x11')]?_0x2cbddf[_0x476f('0x4b')]['createRange'](_0x4ad76a[_0x476f('0x11')][_0x476f('0x33')],_0x4ad76a[_0x476f('0x11')]['end']):null);},{'priority':'highest'});}['createUserMarkerOperations'](){const _0x5dc73a=this[_0x476f('0x1e')],_0x2c05d3=_0x5dc73a[_0x476f('0x4b')][_0x476f('0x5')],_0x15a648=_0x5dc73a['plugins'][_0x476f('0x4a')](_0x493ea2);_0x5dc73a['model'][_0x476f('0x3e')]({'isUndoable':!0x1},_0x3c6a52=>{const _0xe43826=_0x476f('0x19')+_0x15a648[_0x476f('0x8')],_0x53c52c=_0x476f('0x6')+_0x15a648[_0x476f('0x8')],_0x382915=_0x5dc73a[_0x476f('0x4b')][_0x476f('0x14')]['has'](_0xe43826);_0x5dc73a[_0x476f('0x16')]['view'][_0x476f('0x12')]?ee(_0x15a648[_0x476f('0x8')],_0x2c05d3[_0x476f('0x41')][_0x476f('0x50')](),_0x5dc73a['model'],_0x3c6a52):_0x382915&&(_0x3c6a52['removeMarker'](_0xe43826),_0x3c6a52[_0x476f('0xa')](_0x53c52c));});}}function ee(_0x27ffc6,_0x392d06,_0x4c06ae,_0x1a609d){const _0x46de47=_0x476f('0x19')+_0x27ffc6,_0x104cf3=_0x476f('0x6')+_0x27ffc6,_0x4c0b88=_0x392d06[_0x476f('0x18')]();let _0x1ab7ae=_0x392d06['start'];_0x4c0b88&&_0x4c0b88['is'](_0x476f('0x1b'),_0x476f('0x1f'))&&(_0x1ab7ae=function(_0x3bfad5,_0x5cfb47){for(const _0x49ce2c of _0x3bfad5[_0x476f('0x4')]())if(_0x5cfb47['schema'][_0x476f('0x1a')](_0x49ce2c,_0x476f('0x27')))return _0x49ce2c;}(_0x392d06,_0x4c06ae),_0x392d06=_0x1a609d['createRange'](_0x1ab7ae)),_0x1ab7ae=_0x1a609d[_0x476f('0x3b')](_0x1ab7ae),_0x4c06ae[_0x476f('0x14')][_0x476f('0x2a')](_0x46de47)?(_0x1a609d['updateMarker'](_0x46de47,{'range':_0x392d06}),_0x1a609d['updateMarker'](_0x104cf3,{'range':_0x1ab7ae})):(_0x1a609d[_0x476f('0x29')](_0x46de47,{'range':_0x392d06,'usingOperation':!0x0}),_0x1a609d[_0x476f('0x29')](_0x104cf3,{'range':_0x1ab7ae,'usingOperation':!0x0}));}