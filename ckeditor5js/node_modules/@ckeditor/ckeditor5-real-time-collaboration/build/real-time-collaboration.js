!function(t){const e=t.en=t.en||{};e.dictionary=Object.assign(e.dictionary||{},{CONNECTED_USERS:["1 connected user (me)","%0 connected users"],PENDING_ACTION_SENDING_DATA:"Sending data to the server.","Synchronization issue":"Synchronization issue","The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.":"The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.","The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.":"The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.","The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.":"The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.","The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.":"The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor."})}(window.CKEDITOR_TRANSLATIONS||(window.CKEDITOR_TRANSLATIONS={})),
/*!
 * @license Copyright (c) 2003-2022, CKSource Holding sp. z o.o. All rights reserved.
 * For licensing, see LICENSE.md.
 */(()=>{var __webpack_modules__={357:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s extends Error{constructor(t,e,s=null,r={}){super("cloud-services-internal-error: "+t),this.context=e,this.code=s,this.data=r,this.name="CKEditorError"}}e.default=s},8801:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});class s extends Error{constructor(t,e){super(),this.name="CKEditorCloudServicesServerError",this.stack=void 0,this.message=t,this.code=e.code,this.traceId=e.traceId}static fromPublicError(t){return new s(function(t){let e="cloud-services-server-error: "+t.message;return t.explanation&&(e+="\nExplanation: "+t.explanation),t.action&&(e+="\nAction: "+t.action),t.traceId&&(e+="\nTraceId: "+t.traceId),t.code&&(e+="\nCode: "+t.code),e}(t),t)}}e.default=s},7622:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e._SERVICE=void 0;const n=s(5003),i=s(2209),o=r(s(3596)),a=r(s(7026)),c=r(s(7839)),u=r(s(5132)),d=r(s(4148)),l=r(s(223)),h=r(s(2968)),f=r(s(7158)),p=r(s(357)),y=r(s(6314)),m=r(s(6148)),v=r(s(961));e._SERVICE=1;class x{constructor(t,e){if(!t)throw new TypeError('Param "bundleVersion" must be provided.');this._id=null!=e?e:(0,n.v4)(),this._isConnected=!1,this._bundleVersion=t}getId(){return this._id}isConnected(){return this._isConnected}connect(t,e={buffers:[],types:[]},s){const r=new c.default(this.getId(),e.buffers,e.types,this._bundleVersion,s);return this._connect(t,r)}reconnect(t,e){if(this.isConnected())throw new p.default("Cannot reconnect to already connected service.",t);return this._connect(t,new d.default(this.getId(),e,this._bundleVersion))}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}async getDocumentDetails(){const t=new v.default(this.getId());if(!this._wsGateway)throw new y.default("Collaborative Editing",this);const s=await this._wsGateway._sendRequest(e._SERVICE,v.default.TYPE,o.default.encode(t));return o.default.decode(s,m.default)}async sendOperations(t,s,r){if(!t||!t.types||!t.types.length)throw new p.default("Cannot send empty update.",this._wsGateway);const n="number"==typeof s?s:parseInt(s);if(!Number.isInteger(n)||n<0)throw new p.default("Base version not provided.",this._wsGateway);const i=new u.default(this.getId(),t.buffers,t.types,n,[],r);if(!this._wsGateway||!this._isConnected)throw new y.default("Collaborative Editing",this);const a=await this._wsGateway._sendRequest(e._SERVICE,u.default.TYPE,o.default.encode(i));return o.default.decode(a,l.default)}async getConnectedSessions(){if(!this._isConnected)throw new y.default("Collaborative Editing",this);return this._connectedSessions||(this._connectedSessions=await a.default.getConnectedSessions(this._wsGateway,this._id,e._SERVICE)),this._connectedSessions}static getConnectedSessions(t,s){return a.default.getConnectedSessions(t,s,e._SERVICE)}async _connect(t,s){if(this.isConnected())return;if(t.state!==f.default.STATE_CONNECTED)throw new p.default("WebSocket Gateway is not connected.",t);this._wsGateway=t,this.stopListening(t,"change:state");const r=await t._sendRequest(e._SERVICE,s.constructor.TYPE,o.default.encode(s)),n=o.default.decode(r,h.default);return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:f.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,n.channel),this._isConnected=!0,this.fire("connected"),n}_connectToChannel(t,s){this._channel=t._getChannel(e._SERVICE,s),this.listenTo(this._channel,this._channel.getEventName(u.default.TYPE),((t,e)=>{const s=o.default.decode(e,u.default);this.fire("operationsReceived",s.baseVersion,s.data,s.metadata)}))}_onWsGatewayStateChange(t){t===f.default.STATE_DISCONNECTED&&this.disconnect()}}x._SERVICE=e._SERVICE,(0,i.mix)(x,i.EmitterMixin),e.default=x},8677:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static toJSON({createdAt:t,...e}){const s={...e};return t instanceof Date&&(s.createdAt=t.toISOString()),s}static fromJSON({createdAt:t,...e}){const s={...e};return t&&(s.createdAt=new Date(t)),s}}e.default=i,i.DESCRIPTOR_NAME="OperationMetadataDescriptor",i.DESCRIPTOR={fields:{userId:{type:"string",id:1},type:{type:"string",id:2},createdAt:{type:"string",id:3}}}},6685:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{static prepareMetadataForOperations(t,e){if(!(t&&t.length&&e&&e.length))return[];const s=[];let r=0;for(const n of t)if(0!==n){if(!e[r])throw new Error("Missing metadata for a operation");s.push(e[r]),r++}else s.push(s[s.length-1]);return s}static removeUnnecessaryMetadata(t,e){if(!(t&&t.length&&e&&e.length))return[];const s=[];for(let r=0;r<t.length;r++)if(0!==t[r]){if(!e[r])throw new Error("Missing metadata for a operation");s.push(e[r])}return s}}},7839:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r,n=""){super(),this.id=t,this.buffers=e,this.types=s,this.bundleVersion=r,this.lastOperationId=n}toJSON(){return{id:this.id,buffers:this.buffers,types:this.types,bundleVersion:this.bundleVersion,lastOperationId:this.lastOperationId}}static fromJSON(t){return new i(t.id,t.buffers,t.types,t.bundleVersion,t.lastOperationId)}}e.default=i,i.TYPE="11",i.READABLE_TYPE_NAME="connectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4},lastOperationId:{type:"string",id:5}}}},4148:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s){super(),this.id=t,this.lastKnowVersion=e,this.bundleVersion=s}toJSON(){return{id:this.id,bundleVersion:this.bundleVersion,lastKnowVersion:this.lastKnowVersion}}static fromJSON(t){return new i(t.id,t.lastKnowVersion,t.bundleVersion)}}e.default=i,i.TYPE="12",i.READABLE_TYPE_NAME="reconnectToDocument",i.DESCRIPTOR_NAME="CollaborativeEditingReconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},bundleVersion:{type:"string",id:2},lastKnowVersion:{type:"uint32",id:3}}}},5132:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(6685)),o=r(s(8677));class a extends n.default{constructor(t,e,s,r,n=[],i=""){super(),this.id=t,this.buffers=e,this.types=s,this.baseVersion=r,this.metadata=n,this.lastOperationId=i}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.baseVersion,lastOperationId:this.lastOperationId}}toJSON(){return{id:this.id,buffers:this.buffers,types:this.types,baseVersion:this.baseVersion,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),lastOperationId:this.lastOperationId}}static fromJSON(t){return new a(t.id,t.buffers,t.types,t.baseVersion,i.default.prepareMetadataForOperations(t.types,t.metadata).map(o.default.fromJSON),t.lastOperationId)}}e.default=a,a.TYPE="13",a.READABLE_TYPE_NAME="updateDocument",a.DESCRIPTOR_NAME="CollaborativeEditingUpdateMessage",a.DESCRIPTOR={fields:{id:{type:"string",id:1},baseVersion:{type:"uint32",id:2},buffers:{rule:"repeated",type:"bytes",id:3},types:{rule:"repeated",type:"uint32",id:4},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:6},lastOperationId:{type:"string",id:7}}}},961:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.documentId=t}get data(){return{documentId:this.documentId}}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="14",i.READABLE_TYPE_NAME="getDocumentDetails",i.DESCRIPTOR_NAME="GetDocumentDetailsMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},environmentId:{type:"string",id:2}}}},2968:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(6685)),o=r(s(8677));class a extends n.default{constructor(t,e,s=[],r=[],n=0,i=[],o=null,a="",c="",u=null){super(),this.channel=t,this.version=e,this.buffers=s,this.types=r,this.offset=n,this.metadata=i,this.initData=o,this.sessionId=a,this.lastOperationId=c,this.sessionCreatedAt=u}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length,lastOperationId:this.lastOperationId,sessionCreatedAt:this.sessionCreatedAt}}get wereChangesApplied(){var t;return!(null===(t=this.types)||void 0===t?void 0:t.length)&&null===this.initData}toJSON(){var t;return{channel:this.channel,version:this.version,sessionId:this.sessionId,buffers:this.buffers,types:this.types,offset:this.offset,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),initData:null!==(t=this.initData)&&void 0!==t?t:"",isInitialized:"string"==typeof this.initData,lastOperationId:this.lastOperationId,sessionCreatedAt:this.sessionCreatedAt?this.sessionCreatedAt.toISOString():null}}static create(t){return new a(t.channel,t.version,t.buffers,t.types,t.offset,t.metadata,t.initData,t.sessionId,t.lastOperationId,t.sessionCreatedAt)}static fromJSON(t){var e;let s=null;return!0===t.isInitialized?s=null!==(e=t.initData)&&void 0!==e?e:"":"boolean"!=typeof t.isInitialized&&t.initData&&(s=t.initData),a.create({channel:t.channel,version:t.version,buffers:t.buffers,types:t.types,offset:t.offset,metadata:i.default.prepareMetadataForOperations(t.types,t.metadata).map(o.default.fromJSON),initData:s,sessionId:t.sessionId,lastOperationId:t.lastOperationId,sessionCreatedAt:t.sessionCreatedAt?new Date(t.sessionCreatedAt):null})}}e.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingConnectResponse",a.DESCRIPTOR={fields:{channel:{type:"string",id:1},offset:{type:"uint32",id:2},version:{type:"uint32",id:3},buffers:{rule:"repeated",type:"bytes",id:4},types:{rule:"repeated",type:"uint32",id:5},metadata:{rule:"repeated",type:o.default.DESCRIPTOR_NAME,id:7},initData:{type:"string",id:8},isInitialized:{type:"bool",id:9},sessionId:{type:"string",id:10},lastOperationId:{type:"string",id:11},sessionCreatedAt:{type:"string",id:12}}}},223:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(6685)),o=r(s(8677));class a extends n.default{constructor(t,e=[],s=[],r=[],n="",i=null){super(),this.version=t,this.buffers=e,this.types=s,this.metadata=r,this.lastOperationId=n,this.lastOperationAcceptedAt=i}get data(){return{buffers:this.buffers,types:this.types,baseVersion:this.version-this.types.length,lastOperationId:this.lastOperationId,lastOperationAcceptedAt:this.lastOperationAcceptedAt}}get wereChangesApplied(){var t;return!(null===(t=this.types)||void 0===t?void 0:t.length)}toJSON(){return{version:this.version,buffers:this.buffers,types:this.types,metadata:i.default.removeUnnecessaryMetadata(this.types,this.metadata).map(o.default.toJSON),lastOperationId:this.lastOperationId,lastOperationAcceptedAt:this.lastOperationAcceptedAt instanceof Date?this.lastOperationAcceptedAt.toISOString():this.lastOperationAcceptedAt}}static fromJSON(t){return new a(t.version,t.buffers,t.types,i.default.prepareMetadataForOperations(t.types,t.metadata).map(o.default.fromJSON),t.lastOperationId,t.lastOperationAcceptedAt?new Date(t.lastOperationAcceptedAt):null)}static create(t){return new a(t.version,t.buffers,t.types,t.metadata,t.lastOperationId,t.lastOperationAcceptedAt?new Date(t.lastOperationAcceptedAt):null)}}e.default=a,a.DESCRIPTOR_NAME="CollaborativeEditingResponse",a.DESCRIPTOR={fields:{version:{type:"uint32",id:1},buffers:{rule:"repeated",type:"bytes",id:2},types:{rule:"repeated",type:"uint32",id:3},metadata:{rule:"repeated",type:"OperationMetadataDescriptor",id:5},lastOperationId:{type:"string",id:6},lastOperationAcceptedAt:{type:"string",id:7}}}},6148:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e){super(),this.lastDocumentSession=t,this.currentDocumentSession=e}get data(){var t,e,s,r,n;return{lastDocumentSessionId:null===(t=this.lastDocumentSession)||void 0===t?void 0:t.id,lastDocumentSessionOperationId:null===(e=this.lastDocumentSession)||void 0===e?void 0:e.lastOperationId,currentDocumentSessionId:null===(s=this.currentDocumentSession)||void 0===s?void 0:s.id,currentDocumentSessionVersion:null===(r=this.currentDocumentSession)||void 0===r?void 0:r.version,currentDocumentSessionOperationId:null===(n=this.currentDocumentSession)||void 0===n?void 0:n.lastOperationId}}toJSON(){var t,e,s,r,n;return{lastDocumentSessionId:null===(t=this.lastDocumentSession)||void 0===t?void 0:t.id,lastDocumentSessionOperationId:null===(e=this.lastDocumentSession)||void 0===e?void 0:e.lastOperationId,currentDocumentSessionId:null===(s=this.currentDocumentSession)||void 0===s?void 0:s.id,currentDocumentSessionVersion:null===(r=this.currentDocumentSession)||void 0===r?void 0:r.version,currentDocumentSessionOperationId:null===(n=this.currentDocumentSession)||void 0===n?void 0:n.lastOperationId}}static fromJSON(t){const e=t.lastDocumentSessionId?{id:t.lastDocumentSessionId,lastOperationId:t.lastDocumentSessionOperationId}:void 0,s=t.currentDocumentSessionId?{lastOperationId:t.currentDocumentSessionOperationId,version:t.currentDocumentSessionVersion,id:t.currentDocumentSessionId}:void 0;return new i(e,s)}}e.default=i,i.DESCRIPTOR_NAME="GetDocumentDetailsResponse",i.DESCRIPTOR={fields:{lastDocumentSessionId:{type:"string",id:1},lastDocumentSessionOperationId:{type:"string",id:2},currentDocumentSessionId:{type:"string",id:3},currentDocumentSessionVersion:{type:"uint32",id:4},currentDocumentSessionOperationId:{type:"string",id:5}}}},6042:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e._SERVICE=void 0;const a=s(2209),c=o(s(3596)),u=o(s(5420)),d=o(s(2280)),l=o(s(6376)),h=o(s(7608)),f=o(s(6178)),p=o(s(5711)),y=o(s(7955)),m=o(s(939)),v=o(s(6523)),x=o(s(1926)),_=o(s(7952)),g=i(s(7158)),b=o(s(357)),w=o(s(7026)),O=o(s(6314)),S=o(s(8801));e._SERVICE=9;class E{constructor(t){this._documentId=t,this._isConnected=!1}get isConnected(){return this._isConnected}async connect(t){if(this._isConnected)return;if(t.state!==g.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new b.default("WebSocket Gateway is not connected.",t);const s=new l.default(this._documentId);this._wsGateway=t,this.stopListening(t,"change:state");const r=await t._sendRequest(e._SERVICE,l.default.TYPE,c.default.encode(s)),{channel:n,threads:i}=c.default.decode(r,h.default);return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:g.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,n),this._isConnected=!0,this.fire("connected"),i}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._connectedSessions&&(this._connectedSessions.disconnect(),this._connectedSessions=void 0),this.fire("disconnected"),this.stopListening())}async addComment(t,e,s,r){const n=new u.default(this._documentId,t,s,e,void 0,void 0,r),i=await this._sendRequest(u.default.TYPE,n);return c.default.decode(i,d.default)}async updateComment(t,e,s,r){const n=void 0!==r,i=new y.default(this._documentId,t,e,s,r,n);await this._sendRequest(y.default.TYPE,i)}async removeComment(t,e){const s=new f.default(this._documentId,t,e);await this._sendRequest(f.default.TYPE,s)}async removeCommentThread(t){const e=new p.default(this._documentId,t);await this._sendRequest(p.default.TYPE,e)}async getCommentThread(t,e=1){const s=new m.default(t,this._documentId);try{const t=await this._sendRequest(m.default.TYPE,s),{comments:e,commentThreadId:r}=c.default.decode(t,v.default);return{comments:e,commentThreadId:r}}catch(s){if(s instanceof S.default&&"404"===s.code&&e<5)return await(r=100*e,new Promise((t=>{setTimeout(t,r)}))),this.getCommentThread(t,e+1);if(s instanceof S.default)throw s;throw S.default.fromPublicError(s)}var r}async getDocumentThreads(){const t=new x.default(this._documentId),e=await this._sendRequest(x.default.TYPE,t),{threads:s}=c.default.decode(e,_.default);return{threads:s}}async getConnectedSessions(){if(!this._isConnected)throw new O.default("Comments",this);return this._connectedSessions||(this._connectedSessions=await w.default.getConnectedSessions(this._wsGateway,this._documentId,e._SERVICE)),this._connectedSessions}_connectToChannel(t,e){this._channel=t._getChannel(E._SERVICE,e),this._channel&&(this.listenTo(this._channel,this._channel.getEventName(u.default.TYPE),((t,e)=>{const s=c.default.decode(e,u.default);this.fire("commentAdded",s)})),this.listenTo(this._channel,this._channel.getEventName(f.default.TYPE),((t,e)=>{const s=c.default.decode(e,f.default);this.fire("commentRemoved",s)})),this.listenTo(this._channel,this._channel.getEventName(y.default.TYPE),((t,e)=>{const s=c.default.decode(e,y.default);this.fire("commentUpdated",s)})),this.listenTo(this._channel,this._channel.getEventName(p.default.TYPE),((t,e)=>{const s=c.default.decode(e,p.default);this.fire("commentThreadRemoved",s)})))}_onWsGatewayStateChange(t){t===g.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(t,s){if(!this._wsGateway||!this._isConnected)throw new O.default("Comments",this);return this._wsGateway._sendRequest(e._SERVICE,t,c.default.encode(s))}}E._SERVICE=e._SERVICE,(0,a.mix)(E,a.EmitterMixin),e.default=E},2529:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static toJSON(t){var e;return{...t,createdAt:null===(e=t.createdAt)||void 0===e?void 0:e.toISOString(),attributes:t.attributes?JSON.stringify(t.attributes):null}}static fromJSON(t){return{...t,createdAt:new Date(t.createdAt),attributes:t.attributes?JSON.parse(t.attributes):null}}}e.default=i,i.DESCRIPTOR_NAME="CommentDescriptor",i.DESCRIPTOR={fields:{commentId:{id:1,type:"string"},commentThreadId:{id:2,type:"string"},userId:{id:3,type:"string"},content:{id:4,type:"string"},documentId:{id:5,type:"string"},createdAt:{id:6,type:"string"},attributes:{id:7,type:"string"}}}},1578:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945)),i=r(s(2529));class o extends n.default{static toJSON(t){var e;return{...t,comments:null===(e=t.comments)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e;return{...t,comments:null===(e=t.comments)||void 0===e?void 0:e.map(i.default.fromJSON)}}}e.default=o,o.DESCRIPTOR_NAME="CommentsThreadDescriptor",o.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"CommentDescriptor",rule:"repeated",id:2}}}},5420:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r="",n,i="",o=null){super(),this.documentId=t,this.commentThreadId=e,this.content=s,this.commentId=r,this.userId=i,this.attributes=o,this.createdAt=n?new Date(n):""}toJSON(){return{commentThreadId:this.commentThreadId,content:this.content,documentId:this.documentId,commentId:this.commentId,createdAt:this.createdAt instanceof Date?this.createdAt.toISOString():this.createdAt,userId:this.userId,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.documentId,t.commentThreadId,t.content,t.commentId?t.commentId:void 0,t.createdAt?new Date(t.createdAt):void 0,t.userId?t.userId:void 0,t.attributes?JSON.parse(t.attributes):{})}}e.default=i,i.TYPE="91",i.READABLE_TYPE_NAME="addComment",i.DESCRIPTOR_NAME="CommentsV2AddCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},content:{type:"string",id:2},documentId:{type:"string",id:3},commentId:{type:"string",id:4},createdAt:{type:"string",id:5},userId:{type:"string",id:6},attributes:{type:"string",id:7}}}},6376:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="92",i.READABLE_TYPE_NAME="connectToComment",i.DESCRIPTOR_NAME="CommentsV2ConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},939:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e){super(),this.commentThreadId=t,this.documentId=e}toJSON(){return{commentThreadId:this.commentThreadId,documentId:this.documentId}}static fromJSON(t){return new i(t.commentThreadId,t.documentId)}}e.default=i,i.TYPE="93",i.READABLE_TYPE_NAME="getComment",i.DESCRIPTOR_NAME="CommentsV2GetCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},1926:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="94",i.READABLE_TYPE_NAME="getDocumentThreads",i.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},6178:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s){super(),this.documentId=t,this.commentThreadId=e,this.commentId=s}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId}}static fromJSON(t){return new i(t.documentId,t.commentThreadId,t.commentId)}}e.default=i,i.TYPE="95",i.READABLE_TYPE_NAME="removeComment",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},documentId:{type:"string",id:3}}}},5711:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e){super(),this.documentId=t,this.commentThreadId=e}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId}}static fromJSON(t){return new i(t.documentId,t.commentThreadId)}}e.default=i,i.TYPE="97",i.READABLE_TYPE_NAME="removeCommentThread",i.DESCRIPTOR_NAME="CommentsV2RemoveCommentThreadMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},documentId:{type:"string",id:2}}}},7955:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r,n=null,i=!1){super(),this.documentId=t,this.commentThreadId=e,this.commentId=s,this.content=r,this.attributes=n,this.isAttributesUpdated=i}toJSON(){return{documentId:this.documentId,commentThreadId:this.commentThreadId,commentId:this.commentId,content:this.content,attributes:this.attributes?JSON.stringify(this.attributes):null,isAttributesUpdated:this.isAttributesUpdated}}static fromJSON(t){return new i(t.documentId,t.commentThreadId,t.commentId,t.content,t.attributes?JSON.parse(t.attributes):null,t.isAttributesUpdated)}}e.default=i,i.TYPE="96",i.READABLE_TYPE_NAME="updateComment",i.DESCRIPTOR_NAME="CommentsV2UpdateCommentMessage",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},content:{type:"string",id:3},documentId:{type:"string",id:4},attributes:{type:"string",id:5},isAttributesUpdated:{type:"bool",id:6}}}},2280:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s){super(),this.commentThreadId=t,this.commentId=e,this.createdAt=new Date(s)}toJSON(){return{commentThreadId:this.commentThreadId,commentId:this.commentId,createdAt:this.createdAt.toISOString()}}static fromJSON(t){return new i(t.commentThreadId,t.commentId,t.createdAt)}}e.default=i,i.DESCRIPTOR_NAME="CommentsV2AddCommentResponse",i.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},commentId:{type:"string",id:2},createdAt:{type:"string",id:3}}}},7608:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1578));class o extends n.default{constructor(t,e,s){super(),this.channel=t,this._threads=e,this._threadsV2=s,this.threads=(null==s?void 0:s.length)?s:e}toJSON(){var t,e;return{channel:this.channel,threads:null===(t=this._threads)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),threadsV2:null===(e=this._threadsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(t.channel,null===(e=t.threads)||void 0===e?void 0:e.map((t=>JSON.parse(t))),null===(s=t.threadsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="CommentsV2ConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},threads:{type:"string",rule:"repeated",id:2},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:3}}}},6523:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(2529));class o extends n.default{constructor(t,e,s){super(),this.commentThreadId=t,this._comments=e,this._commentsV2=s,this.comments=(null==s?void 0:s.length)?s:e}toJSON(){var t,e;return{commentThreadId:this.commentThreadId,comments:null===(t=this._comments)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),commentsV2:null===(e=this._commentsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(t.commentThreadId,null===(e=t.comments)||void 0===e?void 0:e.map((t=>function(t){const e=JSON.parse(t);return{...e,createdAt:new Date(e.createdAt)}}(t))),null===(s=t.commentsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="CommentsV2GetCommentThreadResponse",o.DESCRIPTOR={fields:{commentThreadId:{type:"string",id:1},comments:{type:"string",rule:"repeated",id:2},commentsV2:{type:"CommentDescriptor",rule:"repeated",id:3}}}},7952:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1578));class o extends n.default{constructor(t,e){super(),this._threads=t,this._threadsV2=e,this.threads=(null==e?void 0:e.length)?e:t}toJSON(){var t,e;return{threads:null===(t=this._threads)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),threadsV2:null===(e=this._threadsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(null===(e=t.threads)||void 0===e?void 0:e.map((t=>function(t){var e;const s=JSON.parse(t),r={...s};return s.comments&&(r.comments=null===(e=s.comments)||void 0===e?void 0:e.map((t=>({...t,createdAt:new Date(t.createdAt)})))),r}(t))),null===(s=t.threadsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="CommentsV2GetDocumentThreadsResponse",o.DESCRIPTOR={fields:{threads:{type:"string",rule:"repeated",id:1},threadsV2:{type:"CommentsThreadDescriptor",rule:"repeated",id:2}}}},5945:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(...t){}}},6345:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{}e.default=i,i.DESCRIPTOR_NAME="KeyValueDescriptor",i.DESCRIPTOR={fields:{key:{type:"string",id:1},value:{type:"string",id:2}}}},8689:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e._SERVICE=void 0;const n=s(2209),i=r(s(3596)),o=s(7158),a=r(s(6052)),c=r(s(4910)),u=r(s(357));e._SERVICE=13;class d{static async isBundleUploaded(t,e){const s=new a.default(e);if(t.state!==o.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new u.default("WebSocket Gateway is not connected.",t);const r=await t._sendRequest(d._SERVICE,a.default.TYPE,i.default.encode(s));return i.default.decode(r,c.default).isUploaded}}d._SERVICE=e._SERVICE,(0,n.mix)(d,n.EmitterMixin),e.default=d},6052:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.bundleVersion=t}toJSON(){return{bundleVersion:this.bundleVersion}}static fromJSON(t){return new i(t.bundleVersion)}}e.default=i,i.TYPE="131",i.READABLE_TYPE_NAME="isEditorBundleUploaded",i.DESCRIPTOR_NAME="IsEditorBundleUploadedMessage",i.DESCRIPTOR={fields:{bundleVersion:{type:"string",id:1}}}},4910:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.isUploaded=t}toJSON(){return{isUploaded:this.isUploaded}}static fromJSON(t){return new i(t.isUploaded)}}e.default=i,i.DESCRIPTOR_NAME="IsEditorBundleUploadedResponse",i.DESCRIPTOR={fields:{isUploaded:{type:"bool",id:1}}}},6314:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(357));class i extends n.default{constructor(t,e){super(t+" Service is not connected.",e)}}e.default=i},3545:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{constructor(...t){super()}static fromJSON(t){throw new TypeError("Must be implemented in a child class!")}}e.default=i,i.TYPE="1000"},3596:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=i(s(6154)),c=o(s(6783)),u=o(s(8677)),d=o(s(6345)),l=o(s(7618)),h=o(s(2529)),f=o(s(1578)),p=o(s(1706)),y=o(s(9883)),m=[d.default,c.default,u.default,l.default,h.default,f.default,p.default,y.default],v=a.Root.fromJSON({nested:m.reduce(((t,e)=>(t[e.DESCRIPTOR_NAME]=e.DESCRIPTOR,t)),{})});function x(t){return e=t,v.lookup(e.DESCRIPTOR_NAME)||v.addJSON({[e.DESCRIPTOR_NAME]:e.DESCRIPTOR}),v.lookupType(t.DESCRIPTOR_NAME);var e}e.default=class{static decode(t,e){const s=x(e).decode("undefined"==typeof window?t:new Uint8Array(t));return e.fromJSON({...s})}static encode(t){const e=x(t.constructor),s=t.toJSON(),r=e.verify(s);if(r)throw Error(r);return e.encode(e.create(s)).finish()}}},9883:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static create(t){return{revisionId:t.id,name:t.name,creatorId:t.creatorId,createdAt:t.createdAt,fromVersion:t.fromVersion,toVersion:t.toVersion,isEmptyCurrent:t.isEmptyCurrent,diffData:t.diffData?JSON.stringify(t.diffData):void 0,attributes:t.attributes,authorsIds:t.authorsIds}}static toJSON(t){var e;return{revisionId:t.revisionId,name:t.name,creatorId:t.creatorId,authorsIds:t.authorsIds?JSON.stringify(t.authorsIds):void 0,diffData:t.diffData,createdAt:null===(e=t.createdAt)||void 0===e?void 0:e.toISOString(),attributes:t.attributes?JSON.stringify(t.attributes):void 0,toVersion:t.toVersion,fromVersion:t.fromVersion,isEmptyCurrent:t.isEmptyCurrent}}static fromJSON(t){return{revisionId:(t={...t}).revisionId,name:t.name,creatorId:t.creatorId,authorsIds:t.authorsIds?JSON.parse(t.authorsIds):void 0,diffData:t.diffData,createdAt:t.createdAt?new Date(t.createdAt):void 0,attributes:t.attributes?JSON.parse(t.attributes):void 0,toVersion:t.toVersion,fromVersion:t.fromVersion,isEmptyCurrent:t.isEmptyCurrent}}static toObject(t){return function(t){for(const[e,s]of Object.entries(t))void 0===s&&delete t[e];return t}({id:t.revisionId,name:t.name,creatorId:t.creatorId,createdAt:t.createdAt,fromVersion:t.fromVersion,toVersion:t.toVersion,isEmptyCurrent:t.isEmptyCurrent,diffData:t.diffData?JSON.parse(t.diffData):void 0,attributes:t.attributes,authorsIds:t.authorsIds})}}e.default=i,i.DESCRIPTOR_NAME="RevisionDescriptor",i.DESCRIPTOR={fields:{revisionId:{type:"string",id:1},name:{type:"string",id:2},creatorId:{type:"string",id:3},authorsIds:{type:"string",id:4},diffData:{type:"string",id:5},createdAt:{type:"string",id:6},attributes:{type:"string",id:7},toVersion:{type:"uint32",id:8},fromVersion:{type:"uint32",id:9},isEmptyCurrent:{type:"bool",id:10}}}},801:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="121",i.READABLE_TYPE_NAME="connectToRevisionHistory",i.DESCRIPTOR_NAME="RevisionHistoryConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},3667:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e){super(),this.documentId=t,this.revisionId=e}toJSON(){return{documentId:this.documentId,revisionId:this.revisionId}}static fromJSON(t){return new i(t.documentId,t.revisionId)}}e.default=i,i.TYPE="123",i.READABLE_TYPE_NAME="getRevision",i.DESCRIPTOR_NAME="RevisionHistoryGetRevisionMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},revisionId:{type:"string",id:2}}}},8702:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e){super(),this.documentId=t,this.requestId=e}toJSON(){return{documentId:this.documentId,requestId:this.requestId}}static fromJSON(t){return new i(t.documentId,t.requestId)}}e.default=i,i.TYPE="122",i.READABLE_TYPE_NAME="reconnectToRevisionHistory",i.DESCRIPTOR_NAME="RevisionHistoryReconnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1},requestId:{type:"uint32",id:2}}}},6120:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(9883));class o extends n.default{constructor(t,e,s){super(),this.documentId=t,this.requestId=e,this.revisions=s}toJSON(){return{documentId:this.documentId,requestId:this.requestId,revisions:this.revisions.map(i.default.toJSON)}}toObject(){return{documentId:this.documentId,requestId:this.requestId,revisions:this.revisions.map(i.default.toObject)}}static create(t){return new o(t.documentId,t.requestId,t.revisions.map(i.default.create))}static fromJSON(t){return new o(t.documentId,t.requestId,t.revisions.map(i.default.fromJSON))}}e.default=o,o.TYPE="124",o.READABLE_TYPE_NAME="updateRevisions",o.DESCRIPTOR_NAME="RevisionHistoryUpdateRevisionsMessage",o.DESCRIPTOR={fields:{documentId:{type:"string",id:1},requestId:{type:"uint32",id:2},revisions:{type:"RevisionDescriptor",id:3,rule:"repeated"}}}},5218:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(9883));class o extends n.default{constructor(t,e,s){super(),this.channel=t,this.requestId=e,this.revisions=s}toJSON(){return{channel:this.channel,requestId:this.requestId,revisions:this.revisions.map(i.default.toJSON)}}toObject(){return{channel:this.channel,requestId:this.requestId,revisions:this.revisions.map(i.default.toObject)}}static fromJSON(t){return new o(t.channel,t.requestId,t.revisions.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="RevisionHistoryConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},requestId:{type:"uint32",id:2},revisions:{type:"RevisionDescriptor",id:3,rule:"repeated"}}}},6311:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(9883));class o extends n.default{constructor(t,e,s,r,n,i,o,a,c,u){super(),this.revisionId=t,this.name=e,this.creatorId=s,this.authorsIds=r,this.createdAt=n,this.diffData=i,this.attributes=o,this.fromVersion=a,this.toVersion=c,this.isEmptyCurrent=u}toJSON(){return i.default.toJSON(this)}toObject(){return i.default.toObject(this)}static create(t){return new o(t.revisionId,t.name,t.creatorId,t.authorsIds,t.createdAt,t.diffData,t.attributes,t.fromVersion,t.toVersion,t.isEmptyCurrent)}static fromJSON(t){return new o(t.revisionId,t.name,t.creatorId,t.authorsIds?JSON.parse(t.authorsIds):void 0,t.createdAt?new Date(t.createdAt):void 0,t.diffData,t.attributes?JSON.parse(t.attributes):void 0,t.fromVersion,t.toVersion,t.isEmptyCurrent)}}e.default=o,o.DESCRIPTOR_NAME="RevisionHistoryGetRevisionResponse",o.DESCRIPTOR=i.default.DESCRIPTOR},1655:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.requestId=t}toJSON(){return{requestId:this.requestId}}static fromJSON(t){return new i(t.requestId)}}e.default=i,i.DESCRIPTOR_NAME="RevisionHistoryUpdateRevisionsResponse",i.DESCRIPTOR={fields:{requestId:{type:"uint32",id:1}}}},8811:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e._SERVICE=void 0;const a=s(2209),c=o(s(3596)),u=o(s(3667)),d=o(s(6311)),l=o(s(6120)),h=o(s(1655)),f=o(s(801)),p=o(s(5218)),y=o(s(8702)),m=o(s(357)),v=i(s(7158)),x=o(s(6314));e._SERVICE=12;class _{constructor(t){this._documentId=t,this._isConnected=!1}get isConnected(){return this._isConnected}connect(t){return this._isConnected?Promise.resolve():this._connect(t,new f.default(this._documentId))}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this.fire("disconnected"),this.stopListening())}reconnect(t,e){if(this.isConnected)throw new m.default("Cannot reconnect to already connected service.",t);return this._connect(t,new y.default(this._documentId,e))}async updateRevisions(t,e){const s=l.default.create({documentId:this._documentId,requestId:e,revisions:t}),r=await this._sendRequest(l.default.TYPE,s),{requestId:n}=c.default.decode(r,h.default);return n}async getRevision(t){const e=new u.default(this._documentId,t),s=await this._sendRequest(u.default.TYPE,e);return c.default.decode(s,d.default).toObject()}async _connect(t,s){if(t.state!==v.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new m.default("WebSocket Gateway is not connected.",t);this._wsGateway=t,this.stopListening(t,"change:state");const r=await t._sendRequest(e._SERVICE,s.constructor.TYPE,c.default.encode(s)),{channel:n,requestId:i,revisions:o}=c.default.decode(r,p.default).toObject();return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:v.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,n),this._isConnected=!0,this.fire("connected"),{revisions:o,requestId:i}}_connectToChannel(t,e){this._channel=t._getChannel(_._SERVICE,e),this._channel&&this.listenTo(this._channel,this._channel.getEventName(l.default.TYPE),((t,e)=>{const{documentId:s,requestId:r,revisions:n}=c.default.decode(e,l.default).toObject();this.fire("revisionsUpdated",{documentId:s,requestId:r,revisionsData:n})}))}_onWsGatewayStateChange(t){t===v.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(t,s){if(!this._wsGateway||!this._isConnected)throw new x.default("Revision History",this);return this._wsGateway._sendRequest(e._SERVICE,t,c.default.encode(s))}}_._SERVICE=e._SERVICE,(0,a.mix)(_,a.EmitterMixin),e.default=_},6783:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{}e.default=i,i.DESCRIPTOR_NAME="SessionsSocketDescriptor",i.DESCRIPTOR={fields:{session:{type:"string",id:1},user:{type:"string",id:2},role:{id:3,type:"string"},permissions:{rule:"repeated",type:"string",id:4}}}},2366:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e){super(),this.id=t,this.sessionType=e}toJSON(){return{id:this.id,sessionType:this.sessionType}}static fromJSON(t){return new i(t.id,t.sessionType)}}e.default=i,i.TYPE="31",i.READABLE_TYPE_NAME="getConnectedSockets",i.DESCRIPTOR_NAME="SessionsConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},sessionType:{type:"uint32",id:2}}}},2414:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r){super(),this.id=t,this.userId=e,this.role=s,this.permissions=r}toJSON(){var t,e,s;return{id:this.id,userId:null!==(t=this.userId)&&void 0!==t?t:void 0,role:null!==(e=this.role)&&void 0!==e?e:void 0,permissions:null!==(s=this.permissions)&&void 0!==s?s:void 0}}static fromJSON(t){return new i(t.id,t.userId,t.role,t.permissions)}}e.default=i,i.TYPE="32",i.READABLE_TYPE_NAME="connectSocket",i.DESCRIPTOR_NAME="SocketConnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},userId:{type:"string",id:2},role:{type:"string",id:3},permissions:{rule:"repeated",type:"string",id:4}}}},4194:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.id=t}toJSON(){return{id:this.id}}static fromJSON(t){return new i(t.id)}}e.default=i,i.TYPE="33",i.READABLE_TYPE_NAME="disconnectSocket",i.DESCRIPTOR_NAME="SocketDisconnectMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},6145:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e=[]){super(),this.channel=t,this.sockets=e}toJSON(){return{channel:this.channel,sockets:this.sockets.map((t=>({user:t.userId,session:t.id,role:t.role,permissions:t.permissions})))}}static fromJSON(t){return new i(t.channel,t.sockets.map((t=>({id:t.session,userId:t.user,role:t.role,permissions:t.permissions}))))}}e.default=i,i.DESCRIPTOR_NAME="SessionsConnectResponse",i.DESCRIPTOR={fields:{channel:{type:"string",id:1},sockets:{rule:"repeated",type:"SessionsSocketDescriptor",id:2}}}},2690:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(2209),i=s(7026),o=r(s(7530)),a=r(s(7158)),c=r(s(6145)),u=r(s(2366)),d=r(s(2414)),l=r(s(4194)),h=r(s(3596));class f extends n.Collection{constructor(t,e){super({idProperty:"id"}),this._id=t,this._sessionType=e,this._handlers=new Map,this._eventsQueue=[],this._isRunning=!1}async connect(t){this._wsGateway=t,this.stopListening(t,"change:state");const e=new u.default(this._id,this._sessionType);let s;try{const t=await this._wsGateway._sendRequest(i._SERVICE,u.default.TYPE,h.default.encode(e));s=h.default.decode(t,c.default)}catch(t){s=new c.default(this._id,[])}this._connectToChannel(this._wsGateway,s.channel,this._sessionType);const r=await async function(t,e){const s=e.map((t=>t.userId)),r=s.length?await o.default.getMany(t,s):[];return e.map((t=>{const e={id:t.id,role:t.role,permissions:t.permissions};return e.user=t.userId&&r.find((e=>e.id===t.userId))||new o.default,e}))}(this._wsGateway,s.sockets);for(const t of r)super.add(t);this._connected=!0,this.fire("connected"),this.listenTo(this._wsGateway,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:a.default._CHANGE_STATE_EVENT_PRIORITY}),await this._runQueue()}disconnect(t=!0){if(this._connected){for(this._connected=!1,this._eventsQueue=[];this.length;)super.remove(0);this._channel&&(this.stopListening(this._channel),this._channel=void 0),this._wsGateway&&t&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this.fire("disconnected"),t&&this.stopListening()}}add(t,e){throw new TypeError("The collection is read-only.")}remove(t){throw new TypeError("The collection is read-only.")}_connectToChannel(t,e,s){this._channel=t._getChannel(s,e),this._channel&&(this._addHandler(this._channel,d.default.TYPE,(async e=>{const s=h.default.decode(e,d.default);if(-1===this.getIndex(s.id)){const e={id:s.id,role:s.role,permissions:s.permissions};s.userId&&(e.user=await o.default.get(t,s.userId)),super.add(e)}})),this._addHandler(this._channel,l.default.TYPE,(t=>{const e=h.default.decode(t,l.default);-1!==this.getIndex(e.id)&&super.remove(e.id)})))}async _onWsGatewayStateChange(t){t===a.default.STATE_DISCONNECTED&&this.disconnect(!1),t===a.default.STATE_CONNECTED&&await this.connect(this._wsGateway)}async _runQueue(){if(this._isRunning||!this._connected)return;let t;for(this._isRunning=!0;t=this._eventsQueue.shift();){const e=this._handlers.get(t.eventName);e&&await e(t.data)}this._isRunning=!1}_addHandler(t,e,s){const r=t.getEventName(e,!0);this.listenTo(t,r,(async(t,e)=>{const s=t.name;this._eventsQueue.push({eventName:s,data:e}),await this._runQueue()})),this._handlers.set(r,s)}}e.default=f},7026:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e._SERVICE=void 0;const n=r(s(2690));e._SERVICE=3,e.default=class{static async getConnectedSessions(t,e,s){const r=new n.default(e,s);return await r.connect(t),r}}},1706:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{static toJSON(t){var e;return{...t,data:t.data?JSON.stringify(t.data):t.data,attributes:t.attributes?JSON.stringify(t.attributes):t.attributes,createdAt:null===(e=t.createdAt)||void 0===e?void 0:e.toISOString()}}static fromJSON(t){return{...t,data:t.data?JSON.parse(t.data):t.data,attributes:t.attributes?JSON.parse(t.attributes):t.attributes,createdAt:t.createdAt?new Date(t.createdAt):void 0}}}e.default=i,i.DESCRIPTOR_NAME="SuggestionDescriptor",i.DESCRIPTOR={fields:{id:{id:1,type:"string"},authorId:{id:2,type:"string"},type:{id:3,type:"string"},createdAt:{id:4,type:"string"},data:{id:5,type:"string"},hasComments:{id:6,type:"bool"},state:{id:7,type:"string"},attributes:{id:8,type:"string"}}}},597:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r={},n=null,i=null){super(),this.id=t,this.documentId=e,this.type=s,this.data=r,this.originalSuggestionId=n,this.attributes=i}toJSON(){return{id:this.id,documentId:this.documentId,type:this.type,data:JSON.stringify(this.data),originalSuggestionId:this.originalSuggestionId,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){var e;return new i(t.id,t.documentId,t.type,JSON.parse(t.data),null!==(e=t.originalSuggestionId)&&void 0!==e?e:null,t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.TYPE="101",i.READABLE_TYPE_NAME="addSuggestion",i.DESCRIPTOR_NAME="TrackChangesAddSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},type:{type:"string",id:3},data:{type:"string",id:4},originalSuggestionId:{type:"string",id:5},attributes:{type:"string",id:6}}}},144:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="105",i.READABLE_TYPE_NAME="connectToSuggestions",i.DESCRIPTOR_NAME="TrackChangesConnectMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},2679:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.documentId=t}toJSON(){return{documentId:this.documentId}}static fromJSON(t){return new i(t.documentId)}}e.default=i,i.TYPE="102",i.READABLE_TYPE_NAME="getAllSuggestions",i.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionMessage",i.DESCRIPTOR={fields:{documentId:{type:"string",id:1}}}},1659:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e){super(),this.id=t,this.documentId=e}toJSON(){return{id:this.id,documentId:this.documentId}}static fromJSON(t){return new i(t.id,t.documentId)}}e.default=i,i.TYPE="103",i.READABLE_TYPE_NAME="getSuggestion",i.DESCRIPTOR_NAME="TrackChangesGetSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2}}}},598:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r,n,i=null){super(),this.id=t,this.documentId=e,this.hasComments=s,this.isHasCommentsModified=r,this.state=n,this.attributes=i}toJSON(){return{id:this.id,documentId:this.documentId,hasComments:this.hasComments,isHasCommentsModified:this.isHasCommentsModified,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.id,t.documentId,t.hasComments,t.isHasCommentsModified,t.state,t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.TYPE="104",i.READABLE_TYPE_NAME="updateSuggestion",i.DESCRIPTOR_NAME="TrackChangesUpdateSuggestionMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1},documentId:{type:"string",id:2},hasComments:{type:"bool",id:3},isHasCommentsModified:{type:"bool",id:4},state:{type:"string",id:5},attributes:{type:"string",id:6}}}},3111:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r,n,i,o={},a=null){super(),this.id=t,this.authorId=e,this.type=s,this.hasComments=n,this.state=i,this.data=o,this.attributes=a,this.createdAt=r?new Date(r):void 0}toJSON(){var t;return{id:this.id,authorId:this.authorId,type:this.type,createdAt:null===(t=this.createdAt)||void 0===t?void 0:t.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.id,t.authorId,t.type,t.createdAt,t.hasComments,t.state,JSON.parse(t.data),t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.DESCRIPTOR_NAME="TrackChangesAddSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},701:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1706));class o extends n.default{constructor(t,e,s){super(),this.channel=t,this._suggestions=e,this._suggestionsV2=s,this.suggestions=(null==s?void 0:s.length)?s:e}toJSON(){var t,e;return{channel:this.channel,suggestions:null===(t=this._suggestions)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),suggestionsV2:null===(e=this._suggestionsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(t.channel,null===(e=t.suggestions)||void 0===e?void 0:e.map((t=>JSON.parse(t))),null===(s=t.suggestionsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}e.default=o,o.DESCRIPTOR_NAME="TrackChangesConnectResponse",o.DESCRIPTOR={fields:{channel:{type:"string",id:1},suggestions:{type:"string",rule:"repeated",id:2},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:3}}}},3390:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545)),i=r(s(1706));class o extends n.default{constructor(t,e){super(),this._suggestions=t,this._suggestionsV2=e,this.suggestions=(null==e?void 0:e.length)?e:t}toJSON(){var t,e;return{suggestions:null===(t=this._suggestions)||void 0===t?void 0:t.map((t=>JSON.stringify(t))),suggestionsV2:null===(e=this._suggestionsV2)||void 0===e?void 0:e.map(i.default.toJSON)}}static fromJSON(t){var e,s;return new o(null===(e=t.suggestions)||void 0===e?void 0:e.map(a),null===(s=t.suggestionsV2)||void 0===s?void 0:s.map(i.default.fromJSON))}}function a(t){const e=JSON.parse(t);return e.createdAt=e.createdAt?new Date(e.createdAt):void 0,e}e.default=o,o.DESCRIPTOR_NAME="TrackChangesGetAllSuggestionsResponse",o.DESCRIPTOR={fields:{suggestions:{type:"string",rule:"repeated",id:1},suggestionsV2:{type:"SuggestionDescriptor",rule:"repeated",id:2}}}},5930:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s,r,n,i,o={},a=null){super(),this.id=t,this.authorId=e,this.type=s,this.hasComments=n,this.state=i,this.data=o,this.attributes=a,this.createdAt=new Date(r)}toJSON(){return{id:this.id,authorId:this.authorId,type:this.type,createdAt:this.createdAt.toISOString(),data:JSON.stringify(this.data),hasComments:this.hasComments,state:this.state,attributes:JSON.stringify(this.attributes)}}static fromJSON(t){return new i(t.id,t.authorId,t.type,t.createdAt,t.hasComments,t.state,JSON.parse(t.data),t.attributes?JSON.parse(t.attributes):null)}}e.default=i,i.DESCRIPTOR_NAME="TrackChangesGetSuggestionResponse",i.DESCRIPTOR={fields:{id:{type:"string",id:1},authorId:{type:"string",id:2},type:{type:"string",id:3},createdAt:{type:"string",id:4},data:{type:"string",id:5},hasComments:{type:"bool",id:6},state:{type:"string",id:7},attributes:{type:"string",id:8}}}},125:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e._SERVICE=void 0;const a=s(2209),c=o(s(3596)),u=o(s(597)),d=o(s(3111)),l=o(s(1659)),h=o(s(5930)),f=o(s(2679)),p=o(s(3390)),y=o(s(598)),m=o(s(144)),v=o(s(701)),x=o(s(357)),_=i(s(7158)),g=o(s(6314)),b=o(s(8801));e._SERVICE=10;class w{constructor(t){this._documentId=t,this._isConnected=!1}get isConnected(){return this._isConnected}async connect(t){if(this._isConnected)return;if(t.state!==_.WEB_SOCKET_GATEWAY_STATES.CONNECTED)throw new x.default("WebSocket Gateway is not connected.",t);const s=new m.default(this._documentId);this._wsGateway=t,this.stopListening(t,"change:state");const r=await t._sendRequest(e._SERVICE,m.default.TYPE,c.default.encode(s)),n=c.default.decode(r,v.default);return this.listenTo(t,"change:state",((t,e,s)=>this._onWsGatewayStateChange(s)),{priority:_.default._CHANGE_STATE_EVENT_PRIORITY}),this._connectToChannel(t,n.channel),this._isConnected=!0,this.fire("connected"),n.suggestions}disconnect(){this._isConnected&&(this._isConnected=!1,this._wsGateway&&(this.stopListening(this._wsGateway),this._wsGateway=void 0),this._channel&&(this.stopListening(this._channel),this._channel=void 0),this.fire("disconnected"),this.stopListening())}async add(t,e,s,r=null,n){const i=new u.default(t,this._documentId,e,s,r,n),o=await this._sendRequest(u.default.TYPE,i);return c.default.decode(o,d.default)}async get(t,e=1){const s=new l.default(t,this._documentId);try{const t=await this._sendRequest(l.default.TYPE,s);return c.default.decode(t,h.default)}catch(s){if(s instanceof b.default&&"404"===s.code&&e<5)return await(r=100*e,new Promise((t=>{setTimeout(t,r)}))),this.get(t,e+1);if(s instanceof b.default)throw s;throw b.default.fromPublicError(s)}var r}async getAll(){const t=new f.default(this._documentId),e=await this._sendRequest(f.default.TYPE,t),{suggestions:s}=c.default.decode(e,p.default);return s}async update(t,e={}){const{hasComments:s,state:r,attributes:n}=e,i=void 0!==s,o=new y.default(t,this._documentId,s,i,r,n);await this._sendRequest(y.default.TYPE,o)}_connectToChannel(t,e){this._channel=t._getChannel(w._SERVICE,e),this._channel&&this.listenTo(this._channel,this._channel.getEventName(y.default.TYPE),((t,e)=>{const s=c.default.decode(e,y.default);this.fire("suggestionUpdated",s)}))}_onWsGatewayStateChange(t){t===_.WEB_SOCKET_GATEWAY_STATES.DISCONNECTED&&this.disconnect()}_sendRequest(t,s){if(!this._wsGateway||!this._isConnected)throw new g.default("Track Changes",this);return this._wsGateway._sendRequest(e._SERVICE,t,c.default.encode(s))}}w._SERVICE=e._SERVICE,(0,a.mix)(w,a.EmitterMixin),e.default=w},7618:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(5945));class i extends n.default{}e.default=i,i.DESCRIPTOR_NAME="UserDescriptor",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},7204:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.ids=t}toJSON(){return{ids:this.ids}}static fromJSON(t){return new i(t.ids)}}e.default=i,i.TYPE="22",i.READABLE_TYPE_NAME="getManyUsers",i.DESCRIPTOR_NAME="GetManyUsersMessage",i.DESCRIPTOR={fields:{ids:{id:1,type:"string",rule:"repeated"}}}},1779:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.id=t}toJSON(){return{id:this.id}}static fromJSON(t){return new i(t.id)}}e.default=i,i.TYPE="21",i.READABLE_TYPE_NAME="getUser",i.DESCRIPTOR_NAME="GetUserMessage",i.DESCRIPTOR={fields:{id:{type:"string",id:1}}}},624:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.users=t}toJSON(){return{users:this.users.map(o)}}static fromJSON(t){return new i(t.users.map(a))}}function o(t){return{attributes:Object.keys(t).map((e=>({key:e,value:JSON.stringify(t[e])})))}}function a(t){return t.attributes.reduce(((t,e)=>(t[e.key]=e.value?JSON.parse(e.value):null,t)),{})}e.default=i,i.DESCRIPTOR_NAME="GetManyUsersResponse",i.DESCRIPTOR={fields:{users:{rule:"repeated",type:"UserDescriptor",id:1}}}},2184:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t){super(),this.attributes=t}toJSON(){return{attributes:Object.keys(this.attributes).map((t=>({key:t,value:JSON.stringify(this.attributes[t])})))}}static fromJSON(t){const e=t.attributes.reduce(((t,e)=>(t[e.key]=e.value?JSON.parse(e.value):null,t)),{});return new i(e)}}e.default=i,i.DESCRIPTOR_NAME="GetUserResponse",i.DESCRIPTOR={fields:{attributes:{rule:"repeated",type:"KeyValueDescriptor",id:1}}}},7530:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(1779)),i=r(s(2184)),o=r(s(3596)),a=r(s(7204)),c=r(s(624));class u{constructor(t={}){this._attributes=new Map;for(const e of Object.keys(t))"id"!==e?(this._attributes.set(e,t[e]),Object.defineProperty(this,e,{enumerable:!0,configurable:!1,get:()=>this._attributes.get(e)})):this.id=t.id}static fromData(t){return new u(t)}static async get(t,e){const s=new n.default(e);try{const e=await t._sendRequest(u._SERVICE,n.default.TYPE,o.default.encode(s)),r=o.default.decode(e,i.default);return new u(r.attributes)}catch(t){return new u({id:e})}}static async getMany(t,e){const s=new a.default(e);try{const e=await t._sendRequest(u._SERVICE,a.default.TYPE,o.default.encode(s));return o.default.decode(e,c.default).users.map((t=>new u(t)))}catch(t){return e.map((t=>new u({id:t})))}}}u._SERVICE=2,e.default=u},6754:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="33.0.0"},1573:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=s(2209),i=r(s(3554)),o=r(s(3596));class a{constructor(t,e,s){this._channelName=t,this._wsGateway=e,this._socket=s,this._subscribeToChannel()}remove(){this._socket.off(this._channelName)}getEventName(t,e=!1){let s="";return e&&(s+="all:"),s+="event",t&&(s+=":"+t),s}_subscribeToChannel(){this._socket.on(this._channelName,(t=>{const e=o.default.decode(t,i.default);this.fire(this.getEventName(e.type,!0),e.data,e.socketId),e.socketId!==this._wsGateway.socketId&&this.fire(this.getEventName(e.type),e.data,e.socketId)}))}}(0,n.mix)(a,n.EmitterMixin),e.default=a},3554:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e,s){super(),this.type=t,this.socketId=e,this.data=s}toJSON(){return{type:this.type,socketId:this.socketId,data:this.data}}static fromJSON(t){return new i(t.type,t.socketId,t.data)}}e.default=i,i.DESCRIPTOR_NAME="ChannelMessage",i.DESCRIPTOR={fields:{type:{type:"uint32",id:1},socketId:{type:"string",id:2},data:{type:"bytes",id:3}}}},8735:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(4990)),i=r(s(3596));e.default=class{encode(t,e,s,r="/",o={}){if(e.length>2)throw new Error("PacketParser supports only 2 elements in data");const a={type:t,data:e,id:s,nsp:r};return i.default.encode(n.default.create(a,o))}decode(t){const e=i.default.decode(t,n.default);return{packet:{id:e.id,type:e.type,data:e.packetData,nsp:e.nsp},options:{flags:e.options.flags,rooms:e.options.rooms,except:e.options.except}}}}},2854:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new u(t.data,t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.BUFFER,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="BytesBytesPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"bytes",id:1},data1:{type:"bytes",id:2}}}},4253:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new u(t.data,t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="NumberBytesPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"bytes",id:2}}}},1433:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new u(t.data,t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.NUMBER),u.DESCRIPTOR_NAME="NumberNumberPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"uint32",id:2}}}},2272:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(t){return new u(t.data,t.data1&&JSON.parse(t.data1))}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.OBJECT),u.DESCRIPTOR_NAME="NumberObjectPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},1692:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new u(t.data,t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.NUMBER,c.MessageDataTypes.STRING),u.DESCRIPTOR_NAME="NumberStringPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"uint32",id:1},data1:{type:"string",id:2}}}},7239:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1}}static fromJSON(t){return new u(t.data&&JSON.parse(t.data),t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.OBJECT,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="ObjectBufferPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},9075:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data?JSON.stringify(this.data):void 0,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(t){return new u(t.data&&JSON.parse(t.data),t.data1&&JSON.parse(t.data1))}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.OBJECT,c.MessageDataTypes.OBJECT),u.DESCRIPTOR_NAME="ObjectObjectPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},799:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{static create(t,e){throw new TypeError("Must be implemented in a child class!")}}e.default=i,t.exports=i},4990:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3596)),i=r(s(3545)),o=r(s(338)),a=r(s(817)),c=r(s(4253)),u=r(s(6335)),d=r(s(2854)),l=r(s(9769)),h=r(s(2272)),f=r(s(9075)),p=r(s(7239)),y=r(s(1797)),m=r(s(1694)),v=r(s(1433)),x=r(s(1692)),_=[c.default,u.default,d.default,l.default,h.default,f.default,p.default,y.default,m.default,v.default,x.default].reduce(((t,e)=>(t[e.TYPE]=e,t)),{});class g extends i.default{constructor(t,e,s,r="/",n=new o.default){super(),this.type=t,this.data=e,this.id=s,this.nsp=r,this.options=n}get packetData(){return void 0===this.data.data&&void 0===this.data.data1?[]:this.data.data&&void 0===this.data.data1?[this.data.data]:[this.data.data,this.data.data1]}toJSON(){const t=n.default.encode(this.options),e=n.default.encode(this.data);return{type:this.type+10*this.data.constructor.TYPE,id:this.id,nsp:"/"===this.nsp?void 0:this.nsp,data:e,options:t}}static fromJSON(t){const e=Math.floor(t.type/10);return new g(t.type-10*e,n.default.decode(t.data,_[e]),t.id,t.nsp,t.options?n.default.decode(t.options,o.default):new o.default)}static create(t,e={}){var s;const r=a.default.getPacketType(a.default.getType(t.data[0]),a.default.getType(null!==(s=t.data[1])&&void 0!==s?s:t.data[0]));return new g(t.type,_[r].create(t.data[0],t.data[1]),t.id,t.nsp,new o.default(e.flags,e.rooms,e.except))}}e.default=g,g.TYPE=10,g.DESCRIPTOR_NAME="PacketMessage",g.DESCRIPTOR={fields:{type:{type:"uint32",id:1},id:{type:"uint32",id:2},nsp:{type:"string",id:3},data:{type:"bytes",id:4},options:{type:"bytes",id:5}}}},338:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(3545));class i extends n.default{constructor(t,e=[],s=[]){super(),this.flags=t,this.rooms=e,this.except=s}toJSON(){var t,e;return{flags:this.flags?JSON.stringify(this.flags):void 0,rooms:(null===(t=this.rooms)||void 0===t?void 0:t.length)?this.rooms:void 0,except:(null===(e=this.except)||void 0===e?void 0:e.length)?this.except:void 0}}static fromJSON(t){return new i(t.flags&&JSON.parse(t.flags),t.rooms,t.except)}}e.default=i,i.TYPE=11,i.DESCRIPTOR_NAME="PacketOptionsMessage",i.DESCRIPTOR={fields:{flags:{type:"string",id:1},rooms:{type:"string",id:2,rule:"repeated"},except:{type:"string",id:3,rule:"repeated"}}}},6335:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new u(t.data,t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.BUFFER),u.DESCRIPTOR_NAME="StringBytesPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"bytes",id:2}}}},1694:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new u(t.data,t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.NUMBER),u.DESCRIPTOR_NAME="StringNumberPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"uint32",id:2}}}},9769:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1?JSON.stringify(this.data1):void 0}}static fromJSON(t){return new u(t.data,t.data1&&JSON.parse(t.data1))}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.OBJECT),u.DESCRIPTOR_NAME="StringObjectPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},1797:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const a=o(s(799)),c=i(s(817));class u extends a.default{constructor(t,e){super(),this.data=t,this.data1=e}toJSON(){return{data:this.data,data1:this.data1}}static fromJSON(t){return new u(t.data,t.data1)}static create(t,e){return new u(t,e)}}e.default=u,u.TYPE=c.default.getPacketType(c.MessageDataTypes.STRING,c.MessageDataTypes.STRING),u.DESCRIPTOR_NAME="StringStringPacketDataMessage",u.DESCRIPTOR={fields:{data:{type:"string",id:1},data1:{type:"string",id:2}}}},2069:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.ENCODED_TYPES=void 0;const n=s(170),i=r(s(8735)),o=r(s(817));e.ENCODED_TYPES=[n.PacketType.EVENT,n.PacketType.ACK,n.PacketType.BINARY_ACK,n.PacketType.BINARY_EVENT];class a extends n.Encoder{constructor(t=new i.default){super(),this._packetParser=t}encode(t){if(e.ENCODED_TYPES.includes(t.type))try{return[this._packetParser.encode(t.type,t.data,t.id,t.nsp)]}catch(t){console.error("Can not properly serialize or deserialize messages. Check the original error.",{originalError:{message:t.message}})}return super.encode(t)}}e.Encoder=a;class c extends n.Decoder{constructor(t=new i.default){super(),this._packetParser=t}add(t){if(!o.default.isBuffer(t))return super.add(t);let e;try{e=this._packetParser.decode(t).packet}catch(e){return super.add(t)}super.emitReserved("decoded",e)}}e.Decoder=c},817:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageDataTypes=void 0;const s=!("undefined"==typeof process||!process.versions||!process.versions.node);var r,n;(n=r=e.MessageDataTypes||(e.MessageDataTypes={}))[n.BUFFER=1]="BUFFER",n[n.STRING=2]="STRING",n[n.NUMBER=3]="NUMBER",n[n.OBJECT=4]="OBJECT";class i{static getPacketType(...t){let e=0;for(let s=0;s<t.length;s++)e+=t[s]*Math.pow(10,t.length-s-1);return e}static getType(t){if(i.isBuffer(t))return r.BUFFER;const e=typeof t;return"string"===e?r.STRING:"number"===e?r.NUMBER:r.OBJECT}static isBuffer(t){return s&&Buffer.isBuffer(t)||t instanceof ArrayBuffer||t instanceof Uint8Array||this._isBufferView(t)}static _isBufferView(t){return"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer}}e.default=i},1113:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(357));class i{constructor(t,e){this._context=t,this._deferredPromise=function(){let t,e;const s=new Promise(((s,r)=>{t=s,e=r}));return{resolve:t,reject:e,promise:s}}(),this.timeout=setTimeout((()=>this.error(new n.default("Request timeout.",this._context))),e)}get promise(){return this._deferredPromise.promise}response(t){this._deferredPromise.resolve(t)}error(t){this._deferredPromise.reject(t)}}e.default=class{constructor(t){this._context=t,this._requests=new Set}async send(t,e=1e4){const s=this._createRequest(e);try{return t(s),await s.promise}finally{this._finishRequest(s)}}errorAll(t){for(const e of this._requests)e.error(t)}_createRequest(t){const e=new i(this._context,t);return this._requests.add(e),e}_finishRequest(t){this._requests.delete(t),clearTimeout(t.timeout)}}},7158:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WEB_SOCKET_GATEWAY_STATES=void 0;const n=s(8623),i=r(s(9655)),o=s(2209),a=r(s(1573)),c=r(s(7530)),u=r(s(6754)),d=r(s(357)),l=r(s(8801)),h=s(2069),f=r(s(1113));var p,y;(y=p=e.WEB_SOCKET_GATEWAY_STATES||(e.WEB_SOCKET_GATEWAY_STATES={})).DISCONNECTED="disconnected",y.CONNECTING="connecting",y.CONNECTED="connected";class m{constructor(t,e,s={},r=n.io,o=c.default.get){if(this._token=e,this._options=s,this._connectionProvider=r,this._userFactory=o,this._requestsManager=new f.default(this),this._channels=new Map,this._connectionAttempt=0,!t)throw new TypeError("Api address must be provided.");if(!this._token)throw new TypeError("Token must be provided.");this._options.requestTimeout||(this._options.requestTimeout=1e4),this._url=(0,i.default)(t.replace(/^(?!(?:\w+:)?\/\/)/,"https://")),this.set("state","disconnected"),this.set("socketId",void 0),this.set("me",void 0),this.on("change:state",(async(t,e,s)=>{var r;if(s!==m.STATE_CONNECTED){if(s===m.STATE_DISCONNECTED)return this._requestsManager.errorAll(new d.default("Not connected.",this))}else try{this.me=await this._userFactory.call(c.default,this,null===(r=this._socketAuth)||void 0===r?void 0:r.userId)}catch(t){}}),{priority:m._CHANGE_STATE_EVENT_PRIORITY}),this.on("error",((t,e)=>{this._options.onError?this._options.onError(e):console.error(e)}))}get sessionId(){return this.socketId}disconnect(){var t;this.state!==p.DISCONNECTED&&(null===(t=this._socket)||void 0===t||t.disconnect(),this._socket=void 0,this.state=p.DISCONNECTED)}async reconnect(){this._socket||this.state!==p.DISCONNECTED||(await this._token.refreshToken(),await this._connect())}static async connect(t,e="local.cs.dev:443/ws-v2",s={},r=n.io,i=c.default.get){const o=new m(e,t,s,r,i);return await o._connect(),o}_sendRequest(t,e,s){if(!t)throw new d.default("`serviceName` must be provided.",this);if(this.state!==m.STATE_CONNECTED)throw new d.default("Not connected.",this);if(!this._socketAuth||!this._socketAuth.isAuthenticated)throw new d.default("Not authenticated.",this);const r=new ArrayBuffer(s.length+2),n=new Uint8Array(r);return n[0]=t,n[1]=parseInt(e),n.set(s,2),this._emit(1,n)}_getChannel(t,e){const s=""+t+e;return!this._channels.has(s)&&this._socket&&this._channels.set(s,new a.default(s,this,this._socket)),this._channels.get(s)}_connect(){return new Promise(((t,e)=>{const s=this._setupSocket();!this.socketId&&s.io.on("reconnect_error",(()=>{this._reconnectionAttemptError(e)})),s.once("connect",(async()=>{try{await this._onConnect(),t()}catch(t){e(t)}})),s.connect()}))}_getPortByProtocol(t){return["http:","ws:"].includes(t)?80:443}_setupSocket(){var t;if(this._socket)return this._socket;const e=this._url.port||this._getPortByProtocol(this._url.protocol),s=(this._url.protocol||"https:")+"//"+this._url.hostname+":"+e,r=this._connectionProvider(s,{parser:{Encoder:h.Encoder,Decoder:h.Decoder},path:"/ws-v2/ws",transports:["websocket"],timeout:void 0!==this._options.timeout?this._options.timeout:5e3,reconnection:void 0===this._options.autoReconnect||this._options.autoReconnect,reconnectionDelay:1e3,reconnectionDelayMax:5e3,rejectUnauthorized:void 0===this._options.rejectUnauthorized||this._options.rejectUnauthorized,query:{version:u.default},agent:null!==(t=this._options.agent)&&void 0!==t&&t});return this.state=p.CONNECTING,r.on("connect",(()=>{this.socketId=r.id})),r.on("connect_error",this._onError.bind(this)),r.on("disconnect",this._onDisconnect.bind(this)),r.io.on("reconnect",this._onReconnect.bind(this)),r.io.on("reconnect_attempt",(t=>{this.state=p.CONNECTING,this._connectionAttempt=t})),r.on("unauthorized",this._onUnauthorized.bind(this)),this._socket=r,r}_emit(t,e){const s=this._socket;return this._requestsManager.send((r=>{s.emit(t,e,((t,e)=>{if(t)return r.error(l.default.fromPublicError(t));r.response(e)}))}),this._options.requestTimeout)}_addAuthData(t,e){this._socketAuth={environmentId:t,userId:e,isAuthenticated:!0}}_removeAuthData(){this._socketAuth=void 0}async _onConnect(){await this._authenticate(this._token.value),this.state=p.CONNECTED;const t=async(t,e,s)=>{try{await this._authenticate(s)}catch(t){}};this._token.on("change:value",t),this._socket.io.off("reconnect_error"),this.on("disconnect",(()=>{this._token.off("change:value",t)}))}async _onReconnect(){await this._token.refreshToken(),await this._onConnect()}_onDisconnect(){this.state=p.DISCONNECTED,this._connectionAttempt=0,this.fire("disconnect");for(const t of this._channels.values())t.remove();this._channels.clear(),void 0===this._options.autoReconnect||this._options.autoReconnect||(this._socket=void 0)}_onError(t){console.warn("Connection to WebSocket server failed. Details: ",{originalError:t})}_reconnectionAttemptError(t){this._connectionAttempt>=2&&(this.disconnect(),t(new d.default("The number of initial connection attempts exceeded.")))}_onUnauthorized({error:t}){this._removeAuthData(),this.fire("error",l.default.fromPublicError(t))}async _authenticate(t){try{const e=await this._emit(2,{token:t});this._addAuthData(e.environmentId,e.userId)}catch(t){throw this._removeAuthData(),t}}}m.STATE_DISCONNECTED=p.DISCONNECTED,m.STATE_CONNECTING=p.CONNECTING,m.STATE_CONNECTED=p.CONNECTED,m._CHANGE_STATE_EVENT_PRIORITY=o.priorities.get("highest")+999999,(0,o.mix)(m,o.ObservableMixin),e.default=m},9933:(t,e,s)=>{"use strict";t.exports=s(6386)},2777:(t,e,s)=>{"use strict";var r=e,n=s(238),i=s(7886);function o(t,e,s,r){if(e.resolvedType)if(e.resolvedType instanceof n){t("switch(d%s){",r);for(var i=e.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)e.repeated&&i[o[a]]===e.typeDefault&&t("default:"),t("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",r,i[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,s,r);else{var c=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":t("m%s=String(d%s)",r,r);break;case"bool":t("m%s=Boolean(d%s)",r,r)}}return t}function a(t,e,s,r){if(e.resolvedType)e.resolvedType instanceof n?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,s,r,r):t("d%s=types[%i].toObject(m%s,o)",r,s,r);else{var i=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:t("d%s=m%s",r,r)}}return t}r.fromObject=function(t){var e=t.fieldsArray,s=i.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return s("return new this.ctor");s("var m=new this.ctor");for(var r=0;r<e.length;++r){var a=e[r].resolve(),c=i.safeProp(a.name);a.map?(s("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(s,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(s("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(s,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof n||s("if(d%s!=null){",c),o(s,a,r,c),a.resolvedType instanceof n||s("}"))}return s("return m")},r.toObject=function(t){var e=t.fieldsArray.slice().sort(i.compareFieldsById);if(!e.length)return i.codegen()("return {}");for(var s=i.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],o=[],c=[],u=0;u<e.length;++u)e[u].partOf||(e[u].resolve().repeated?r:e[u].map?o:c).push(e[u]);if(r.length){for(s("if(o.arrays||o.defaults){"),u=0;u<r.length;++u)s("d%s=[]",i.safeProp(r[u].name));s("}")}if(o.length){for(s("if(o.objects||o.defaults){"),u=0;u<o.length;++u)s("d%s={}",i.safeProp(o[u].name));s("}")}if(c.length){for(s("if(o.defaults){"),u=0;u<c.length;++u){var d=c[u],l=i.safeProp(d.name);if(d.resolvedType instanceof n)s("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)s("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";s("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else s("d%s=%j",l,d.typeDefault)}s("}")}var f=!1;for(u=0;u<e.length;++u){d=e[u];var p=t._fieldsArray.indexOf(d);l=i.safeProp(d.name);d.map?(f||(f=!0,s("var ks2")),s("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),a(s,d,p,l+"[ks2[j]]")("}")):d.repeated?(s("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),a(s,d,p,l+"[j]")("}")):(s("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),a(s,d,p,l),d.partOf&&s("if(o.oneofs)")("d%s=%j",i.safeProp(d.partOf.name),d.name)),s("}")}return s("return d")}},8159:(t,e,s)=>{"use strict";t.exports=function(t){var e=i.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break");e("switch(t>>>3){");for(var s=0;s<t.fieldsArray.length;++s){var a=t._fieldsArray[s].resolve(),c=a.resolvedType instanceof r?"int32":a.type,u="m"+i.safeProp(a.name);e("case %i:",a.id),a.map?(e("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[a.keyType]?e("k=%j",n.defaults[a.keyType]):e("k=null"),void 0!==n.defaults[c]?e("value=%j",n.defaults[c]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===n.basic[c]?e("value=types[%i].decode(r,r.uint32())",s):e("value=r.%s()",c),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[a.keyType]?e('%s[typeof k==="object"?util.longToHash(k):k]=value',u):e("%s[k]=value",u)):a.repeated?(e("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==n.packed[c]&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===n.basic[c]?e(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,s):e("%s.push(r.%s())",u,c)):void 0===n.basic[c]?e(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,s):e("%s=r.%s()",u,c),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<t._fieldsArray.length;++s){var d=t._fieldsArray[s];d.required&&e("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return e("return m")};var r=s(238),n=s(8372),i=s(7886);function o(t){return"missing required '"+t.name+"'"}},8357:(t,e,s)=>{"use strict";t.exports=function(t){for(var e,s=i.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),a=t.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),d=t._fieldsArray.indexOf(u),l=u.resolvedType instanceof r?"int32":u.type,h=n.basic[l];e="m"+i.safeProp(u.name),u.map?(s("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",e,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|n.mapKey[u.keyType],u.keyType),void 0===h?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,e):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,l,e),s("}")("}")):u.repeated?(s("if(%s!=null&&%s.length){",e,e),u.packed&&void 0!==n.packed[l]?s("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",l,e)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",e),void 0===h?o(s,u,d,e+"[i]"):s("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,l,e)),s("}")):(u.optional&&s("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",e,u.name),void 0===h?o(s,u,d,e):s("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,l,e))}return s("return w")};var r=s(238),n=s(8372),i=s(7886);function o(t,e,s,r){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",s,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",s,r,(e.id<<3|2)>>>0)}},238:(t,e,s)=>{"use strict";t.exports=o;var r=s(6913);((o.prototype=Object.create(r.prototype)).constructor=o).className="Enum";var n=s(9587),i=s(7886);function o(t,e,s,n,i){if(r.call(this,t,s),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=i||{},this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)"number"==typeof e[o[a]]&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}o.fromJSON=function(t,e){var s=new o(t,e.values,e.options,e.comment,e.comments);return s.reserved=e.reserved,s},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},o.prototype.add=function(t,e,s){if(!i.isString(t))throw TypeError("name must be a string");if(!i.isInteger(e))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=s||null,this},o.prototype.remove=function(t){if(!i.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},5263:(t,e,s)=>{"use strict";t.exports=u;var r=s(6913);((u.prototype=Object.create(r.prototype)).constructor=u).className="Field";var n,i=s(238),o=s(8372),a=s(7886),c=/^required|optional|repeated$/;function u(t,e,s,n,i,u,d){if(a.isObject(n)?(d=i,u=n,n=i=void 0):a.isObject(i)&&(d=u,u=i,i=void 0),r.call(this,t,u),!a.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!a.isString(s))throw TypeError("type must be a string");if(void 0!==n&&!c.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=s,this.id=e,this.extend=i||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[s],this.bytes="bytes"===s,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}u.fromJSON=function(t,e){return new u(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(t,e,s){return"packed"===t&&(this._packed=null),r.prototype.setOption.call(this,t,e,s)},u.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},u.d=function(t,e,s,r){return"function"==typeof e?e=a.decorateType(e).name:e&&"object"==typeof e&&(e=a.decorateEnum(e).name),function(n,i){a.decorateType(n.constructor).add(new u(i,t,e,s,{default:r}))}},u._configure=function(t){n=t}},6386:(t,e,s)=>{"use strict";var r=t.exports=s(2877);r.build="light",r.load=function(t,e,s){return"function"==typeof e?(s=e,e=new r.Root):e||(e=new r.Root),e.load(t,s)},r.loadSync=function(t,e){return e||(e=new r.Root),e.loadSync(t)},r.encoder=s(8357),r.decoder=s(8159),r.verifier=s(5669),r.converter=s(2777),r.ReflectionObject=s(6913),r.Namespace=s(9587),r.Root=s(6720),r.Enum=s(238),r.Type=s(396),r.Field=s(5263),r.OneOf=s(8930),r.MapField=s(6977),r.Service=s(5280),r.Method=s(9455),r.Message=s(5986),r.wrappers=s(2016),r.types=s(8372),r.util=s(7886),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},2877:(t,e,s)=>{"use strict";var r=e;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=s(3117),r.BufferWriter=s(4766),r.Reader=s(9924),r.BufferReader=s(6515),r.util=s(4652),r.rpc=s(8607),r.roots=s(9188),r.configure=n,n()},6977:(t,e,s)=>{"use strict";t.exports=o;var r=s(5263);((o.prototype=Object.create(r.prototype)).constructor=o).className="MapField";var n=s(8372),i=s(7886);function o(t,e,s,n,o,a){if(r.call(this,t,e,n,void 0,void 0,o,a),!i.isString(s))throw TypeError("keyType must be a string");this.keyType=s,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,e){return new o(t,e.id,e.keyType,e.type,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},o.d=function(t,e,s){return"function"==typeof s?s=i.decorateType(s).name:s&&"object"==typeof s&&(s=i.decorateEnum(s).name),function(r,n){i.decorateType(r.constructor).add(new o(n,t,e,s))}}},5986:(t,e,s)=>{"use strict";t.exports=n;var r=s(4652);function n(t){if(t)for(var e=Object.keys(t),s=0;s<e.length;++s)this[e[s]]=t[e[s]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,e){return this.$type.encode(t,e)},n.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,e){return this.$type.toObject(t,e)},n.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},9455:(t,e,s)=>{"use strict";t.exports=i;var r=s(6913);((i.prototype=Object.create(r.prototype)).constructor=i).className="Method";var n=s(7886);function i(t,e,s,i,o,a,c,u,d){if(n.isObject(o)?(c=o,o=a=void 0):n.isObject(a)&&(c=a,a=void 0),void 0!==e&&!n.isString(e))throw TypeError("type must be a string");if(!n.isString(s))throw TypeError("requestType must be a string");if(!n.isString(i))throw TypeError("responseType must be a string");r.call(this,t,c),this.type=e||"rpc",this.requestType=s,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=d}i.fromJSON=function(t,e){return new i(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)},i.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},9587:(t,e,s)=>{"use strict";t.exports=l;var r=s(6913);((l.prototype=Object.create(r.prototype)).constructor=l).className="Namespace";var n,i,o,a=s(5263),c=s(8930),u=s(7886);function d(t,e){if(t&&t.length){for(var s={},r=0;r<t.length;++r)s[t[r].name]=t[r].toJSON(e);return s}}function l(t,e){r.call(this,t,e),this.nested=void 0,this._nestedArray=null}function h(t){return t._nestedArray=null,t}l.fromJSON=function(t,e){return new l(t,e.options).addJSON(e.nested)},l.arrayToJSON=d,l.isReservedId=function(t,e){if(t)for(var s=0;s<t.length;++s)if("string"!=typeof t[s]&&t[s][0]<=e&&t[s][1]>e)return!0;return!1},l.isReservedName=function(t,e){if(t)for(var s=0;s<t.length;++s)if(t[s]===e)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(t){return u.toObject(["options",this.options,"nested",d(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var e,s=Object.keys(t),r=0;r<s.length;++r)e=t[s[r]],this.add((void 0!==e.fields?n.fromJSON:void 0!==e.values?o.fromJSON:void 0!==e.methods?i.fromJSON:void 0!==e.id?a.fromJSON:l.fromJSON)(s[r],e));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof a&&void 0!==t.extend||t instanceof n||t instanceof o||t instanceof i||t instanceof l||t instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof l&&t instanceof l)||e instanceof n||e instanceof i)throw Error("duplicate name '"+t.name+"' in "+this);for(var s=e.nestedArray,r=0;r<s.length;++r)t.add(s[r]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),h(this)},l.prototype.remove=function(t){if(!(t instanceof r))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),h(this)},l.prototype.define=function(t,e){if(u.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var s=this;t.length>0;){var r=t.shift();if(s.nested&&s.nested[r]){if(!((s=s.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else s.add(s=new l(r))}return e&&s.addJSON(e),s},l.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof l?t[e++].resolveAll():t[e++].resolve();return this.resolve()},l.prototype.lookup=function(t,e,s){if("boolean"==typeof e?(s=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),u.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var r=this.get(t[0]);if(r){if(1===t.length){if(!e||e.indexOf(r.constructor)>-1)return r}else if(r instanceof l&&(r=r.lookup(t.slice(1),e,!0)))return r}else for(var n=0;n<this.nestedArray.length;++n)if(this._nestedArray[n]instanceof l&&(r=this._nestedArray[n].lookup(t,e,!0)))return r;return null===this.parent||s?null:this.parent.lookup(t,e)},l.prototype.lookupType=function(t){var e=this.lookup(t,[n]);if(!e)throw Error("no such type: "+t);return e},l.prototype.lookupEnum=function(t){var e=this.lookup(t,[o]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},l.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[n,o]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e},l.prototype.lookupService=function(t){var e=this.lookup(t,[i]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},l._configure=function(t,e,s){n=t,i=e,o=s}},6913:(t,e,s)=>{"use strict";t.exports=i,i.className="ReflectionObject";var r,n=s(7886);function i(t,e){if(!n.isString(t))throw TypeError("name must be a string");if(e&&!n.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof r&&e._handleAdd(this)},i.prototype.onRemove=function(t){var e=t.root;e instanceof r&&e._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},i.prototype.getOption=function(t){if(this.options)return this.options[t]},i.prototype.setOption=function(t,e,s){return s&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this},i.prototype.setParsedOption=function(t,e,s){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(s){var i=r.find((function(e){return Object.prototype.hasOwnProperty.call(e,t)}));if(i){var o=i[t];n.setProperty(o,s,e)}else(i={})[t]=n.setProperty({},s,e),r.push(i)}else{var a={};a[t]=e,r.push(a)}return this},i.prototype.setOptions=function(t,e){if(t)for(var s=Object.keys(t),r=0;r<s.length;++r)this.setOption(s[r],t[s[r]],e);return this},i.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},i._configure=function(t){r=t}},8930:(t,e,s)=>{"use strict";t.exports=o;var r=s(6913);((o.prototype=Object.create(r.prototype)).constructor=o).className="OneOf";var n=s(5263),i=s(7886);function o(t,e,s,n){if(Array.isArray(e)||(s=e,e=void 0),r.call(this,t,s),void 0!==e&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}function a(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}o.fromJSON=function(t,e){return new o(t,e.oneof,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,a(this),this},o.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this},o.prototype.onAdd=function(t){r.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var s=t.get(this.oneof[e]);s&&!s.partOf&&(s.partOf=this,this.fieldsArray.push(s))}a(this)},o.prototype.onRemove=function(t){for(var e,s=0;s<this.fieldsArray.length;++s)(e=this.fieldsArray[s]).parent&&e.parent.remove(e);r.prototype.onRemove.call(this,t)},o.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,s){i.decorateType(e.constructor).add(new o(s,t)),Object.defineProperty(e,s,{get:i.oneOfGetter(t),set:i.oneOfSetter(t)})}}},9924:(t,e,s)=>{"use strict";t.exports=c;var r,n=s(4652),i=n.LongBits,o=n.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},l=function(){return n.Buffer?function(t){return(c.create=function(t){return n.Buffer.isBuffer(t)?new r(t):d(t)})(t)}:d};function h(){var t=new i(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,s=this.pos+t;if(s>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,s):e===s?new this.buf.constructor(0):this._slice.call(this.buf,e,s)},c.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){r=t,c.create=l(),r._configure();var e=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},6515:(t,e,s)=>{"use strict";t.exports=i;var r=s(9924);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4652);function i(t){r.call(this,t)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()},6720:(t,e,s)=>{"use strict";t.exports=l;var r=s(9587);((l.prototype=Object.create(r.prototype)).constructor=l).className="Root";var n,i,o,a=s(5263),c=s(238),u=s(8930),d=s(7886);function l(t){r.call(this,"",t),this.deferred=[],this.files=[]}function h(){}l.fromJSON=function(t,e){return e||(e=new l),t.options&&e.setOptions(t.options),e.addJSON(t.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function t(e,s,r){"function"==typeof s&&(r=s,s=void 0);var n=this;if(!r)return d.asPromise(t,n,e,s);var a=r===h;function c(t,e){if(r){var s=r;if(r=null,a)throw t;s(t,e)}}function u(t){var e=t.lastIndexOf("google/protobuf/");if(e>-1){var s=t.substring(e);if(s in o)return s}return null}function l(t,e){try{if(d.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),d.isString(e)){i.filename=t;var r,o=i(e,n,s),l=0;if(o.imports)for(;l<o.imports.length;++l)(r=u(o.imports[l])||n.resolvePath(t,o.imports[l]))&&f(r);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(r=u(o.weakImports[l])||n.resolvePath(t,o.weakImports[l]))&&f(r,!0)}else n.setOptions(e.options).addJSON(e.nested)}catch(t){c(t)}a||p||c(null,n)}function f(t,e){if(!(n.files.indexOf(t)>-1))if(n.files.push(t),t in o)a?l(t,o[t]):(++p,setTimeout((function(){--p,l(t,o[t])})));else if(a){var s;try{s=d.fs.readFileSync(t).toString("utf8")}catch(t){return void(e||c(t))}l(t,s)}else++p,n.fetch(t,(function(s,i){--p,r&&(s?e?p||c(null,n):c(s):l(t,i))}))}var p=0;d.isString(e)&&(e=[e]);for(var y,m=0;m<e.length;++m)(y=n.resolvePath("",e[m]))&&f(y);if(a)return n;p||c(null,n)},l.prototype.loadSync=function(t,e){if(!d.isNode)throw Error("not supported");return this.load(t,e,h)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(t,e){var s=e.parent.lookup(e.extend);if(s){var r=new a(e.fullName,e.id,e.type,e.rule,void 0,e.options);return r.declaringField=e,e.extensionField=r,s.add(r),!0}return!1}l.prototype._handleAdd=function(t){if(t instanceof a)void 0===t.extend||t.extensionField||p(0,t)||this.deferred.push(t);else if(t instanceof c)f.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof u)){if(t instanceof n)for(var e=0;e<this.deferred.length;)p(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var s=0;s<t.nestedArray.length;++s)this._handleAdd(t._nestedArray[s]);f.test(t.name)&&(t.parent[t.name]=t)}},l.prototype._handleRemove=function(t){if(t instanceof a){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1)}}else if(t instanceof c)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof r){for(var s=0;s<t.nestedArray.length;++s)this._handleRemove(t._nestedArray[s]);f.test(t.name)&&delete t.parent[t.name]}},l._configure=function(t,e,s){n=t,i=e,o=s}},9188:t=>{"use strict";t.exports={}},8607:(t,e,s)=>{"use strict";e.Service=s(8887)},8887:(t,e,s)=>{"use strict";t.exports=n;var r=s(4652);function n(t,e,s){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(s)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,s,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(t,a,e,s,n,i);if(a.rpcImpl)try{return a.rpcImpl(e,s[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(t,s){if(t)return a.emit("error",t,e),o(t);if(null!==s){if(!(s instanceof n))try{s=n[a.responseDelimited?"decodeDelimited":"decode"](s)}catch(t){return a.emit("error",t,e),o(t)}return a.emit("data",s,e),o(null,s)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},5280:(t,e,s)=>{"use strict";t.exports=a;var r=s(9587);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var n=s(9455),i=s(7886),o=s(8607);function a(t,e){r.call(this,t,e),this.methods={},this._methodsArray=null}function c(t){return t._methodsArray=null,t}a.fromJSON=function(t,e){var s=new a(t,e.options);if(e.methods)for(var r=Object.keys(e.methods),i=0;i<r.length;++i)s.add(n.fromJSON(r[i],e.methods[r[i]]));return e.nested&&s.addJSON(e.nested),s.comment=e.comment,s},a.prototype.toJSON=function(t){var e=r.prototype.toJSON.call(this,t),s=!!t&&Boolean(t.keepComments);return i.toObject(["options",e&&e.options||void 0,"methods",r.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",s?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(t){return this.methods[t]||r.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?(this.methods[t.name]=t,t.parent=this,c(this)):r.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,c(this)}return r.prototype.remove.call(this,t)},a.prototype.create=function(t,e,s){for(var r,n=new o.Service(t,e,s),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");n[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return n}},396:(t,e,s)=>{"use strict";t.exports=x;var r=s(9587);((x.prototype=Object.create(r.prototype)).constructor=x).className="Type";var n=s(238),i=s(8930),o=s(5263),a=s(6977),c=s(5280),u=s(5986),d=s(9924),l=s(3117),h=s(7886),f=s(8357),p=s(8159),y=s(5669),m=s(2777),v=s(2016);function x(t,e){r.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(x.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var s=this.fields[t[e]],r=s.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=s}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=x.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof u||((t.prototype=new u).constructor=t,h.merge(t.prototype,e)),t.$type=t.prototype.$type=this,h.merge(t,u,!0),this._ctor=t;for(var s=0;s<this.fieldsArray.length;++s)this._fieldsArray[s].resolve();var r={};for(s=0;s<this.oneofsArray.length;++s)r[this._oneofsArray[s].resolve().name]={get:h.oneOfGetter(this._oneofsArray[s].oneof),set:h.oneOfSetter(this._oneofsArray[s].oneof)};s&&Object.defineProperties(t.prototype,r)}}}),x.generateConstructor=function(t){for(var e,s=h.codegen(["p"],t.name),r=0;r<t.fieldsArray.length;++r)(e=t._fieldsArray[r]).map?s("this%s={}",h.safeProp(e.name)):e.repeated&&s("this%s=[]",h.safeProp(e.name));return s("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},x.fromJSON=function(t,e){var s=new x(t,e.options);s.extensions=e.extensions,s.reserved=e.reserved;for(var u=Object.keys(e.fields),d=0;d<u.length;++d)s.add((void 0!==e.fields[u[d]].keyType?a.fromJSON:o.fromJSON)(u[d],e.fields[u[d]]));if(e.oneofs)for(u=Object.keys(e.oneofs),d=0;d<u.length;++d)s.add(i.fromJSON(u[d],e.oneofs[u[d]]));if(e.nested)for(u=Object.keys(e.nested),d=0;d<u.length;++d){var l=e.nested[u[d]];s.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?x.fromJSON:void 0!==l.values?n.fromJSON:void 0!==l.methods?c.fromJSON:r.fromJSON)(u[d],l))}return e.extensions&&e.extensions.length&&(s.extensions=e.extensions),e.reserved&&e.reserved.length&&(s.reserved=e.reserved),e.group&&(s.group=!0),e.comment&&(s.comment=e.comment),s},x.prototype.toJSON=function(t){var e=r.prototype.toJSON.call(this,t),s=!!t&&Boolean(t.keepComments);return h.toObject(["options",e&&e.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,t),"fields",r.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",s?this.comment:void 0])},x.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var s=this.oneofsArray;for(e=0;e<s.length;)s[e++].resolve();return r.prototype.resolveAll.call(this)},x.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},x.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&void 0===t.extend){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),_(this)}return t instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),_(this)):r.prototype.add.call(this,t)},x.prototype.remove=function(t){if(t instanceof o&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),_(this)}if(t instanceof i){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),_(this)}return r.prototype.remove.call(this,t)},x.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},x.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)},x.prototype.create=function(t){return new this.ctor(t)},x.prototype.setup=function(){for(var t=this.fullName,e=[],s=0;s<this.fieldsArray.length;++s)e.push(this._fieldsArray[s].resolve().resolvedType);this.encode=f(this)({Writer:l,types:e,util:h}),this.decode=p(this)({Reader:d,types:e,util:h}),this.verify=y(this)({types:e,util:h}),this.fromObject=m.fromObject(this)({types:e,util:h}),this.toObject=m.toObject(this)({types:e,util:h});var r=v[t];if(r){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(n),n.toObject=this.toObject,this.toObject=r.toObject.bind(n)}return this},x.prototype.encode=function(t,e){return this.setup().encode(t,e)},x.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},x.prototype.decode=function(t,e){return this.setup().decode(t,e)},x.prototype.decodeDelimited=function(t){return t instanceof d||(t=d.create(t)),this.decode(t,t.uint32())},x.prototype.verify=function(t){return this.setup().verify(t)},x.prototype.fromObject=function(t){return this.setup().fromObject(t)},x.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},x.d=function(t){return function(e){h.decorateType(e,t)}}},8372:(t,e,s)=>{"use strict";var r=e,n=s(7886),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(t,e){var s=0,r={};for(e|=0;s<t.length;)r[i[s+e]]=t[s++];return r}r.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),r.long=o([0,0,0,1,1],7),r.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},7886:(t,e,s)=>{"use strict";var r,n,i=t.exports=s(4652),o=s(9188);i.codegen=s(6348),i.fetch=s(7803),i.path=s(1272),i.fs=i.inquire("fs"),i.toArray=function(t){if(t){for(var e=Object.keys(t),s=new Array(e.length),r=0;r<e.length;)s[r]=t[e[r++]];return s}return[]},i.toObject=function(t){for(var e={},s=0;s<t.length;){var r=t[s++],n=t[s++];void 0!==n&&(e[r]=n)}return e};var a=/\\/g,c=/"/g;i.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},i.safeProp=function(t){return!/^[$\w_]+$/.test(t)||i.isReserved(t)?'["'+t.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+t},i.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var u=/_([a-z])/g;i.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(u,(function(t,e){return e.toUpperCase()}))},i.compareFieldsById=function(t,e){return t.id-e.id},i.decorateType=function(t,e){if(t.$type)return e&&t.$type.name!==e&&(i.decorateRoot.remove(t.$type),t.$type.name=e,i.decorateRoot.add(t.$type)),t.$type;r||(r=s(396));var n=new r(e||t.name);return i.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var d=0;i.decorateEnum=function(t){if(t.$type)return t.$type;n||(n=s(238));var e=new n("Enum"+d++,t);return i.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e},i.setProperty=function(t,e,s){if("object"!=typeof t)throw TypeError("dst must be an object");if(!e)throw TypeError("path must be specified");return function t(e,s,r){var n=s.shift();if("__proto__"===n)return e;if(s.length>0)e[n]=t(e[n]||{},s,r);else{var i=e[n];i&&(r=[].concat(i).concat(r)),e[n]=r}return e}(t,e=e.split("."),s)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(s(6720)))}})},7658:(t,e,s)=>{"use strict";t.exports=n;var r=s(4652);function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var s=t>>>0,r=(t-s)/4294967296>>>0;return e&&(r=~r>>>0,s=~s>>>0,++s>4294967295&&(s=0,++r>4294967295&&(r=0))),new n(s,r)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(r.isString(t)){if(!r.Long)return n.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):i},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,s=~this.hi>>>0;return e||(s=s+1>>>0),-(e+4294967296*s)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?i:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return 0===s?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:s<128?9:10}},4652:function(t,e,s){"use strict";var r=e;function n(t,e,s){for(var r=Object.keys(e),n=0;n<r.length;++n)void 0!==t[r[n]]&&s||(t[r[n]]=e[r[n]]);return t}function i(t){function e(t,s){if(!(this instanceof e))return new e(t,s);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),s&&n(this,s)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=s(537),r.base64=s(9745),r.EventEmitter=s(4459),r.float=s(897),r.inquire=s(3229),r.utf8=s(113),r.pool=s(7986),r.LongBits=s(7658),r.isNode=Boolean(void 0!==s.g&&s.g&&s.g.process&&s.g.process.versions&&s.g.process.versions.node),r.global=r.isNode&&s.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var s=t[e];return!(null==s||!t.hasOwnProperty(e))&&("object"!=typeof s||(Array.isArray(s)?s.length:Object.keys(s).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var s=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(s.lo,s.hi,e):s.toNumber(Boolean(e))},r.merge=n,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(t){for(var e={},s=0;s<t.length;++s)e[t[s]]=1;return function(){for(var t=Object.keys(this),s=t.length-1;s>-1;--s)if(1===e[t[s]]&&void 0!==this[t[s]]&&null!==this[t[s]])return t[s]}},r.oneOfSetter=function(t){return function(e){for(var s=0;s<t.length;++s)t[s]!==e&&delete this[t[s]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,s){return new t(e,s)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},5669:(t,e,s)=>{"use strict";t.exports=function(t){var e=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),s=t.oneofsArray,r={};s.length&&e("var p={}");for(var c=0;c<t.fieldsArray.length;++c){var u=t._fieldsArray[c].resolve(),d="m"+n.safeProp(u.name);if(u.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",d,u.name),u.map)e("if(!util.isObject(%s))",d)("return%j",i(u,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),a(e,u,"k[i]"),o(e,u,c,d+"[k[i]]")("}");else if(u.repeated)e("if(!Array.isArray(%s))",d)("return%j",i(u,"array"))("for(var i=0;i<%s.length;++i){",d),o(e,u,c,d+"[i]")("}");else{if(u.partOf){var l=n.safeProp(u.partOf.name);1===r[u.partOf.name]&&e("if(p%s===1)",l)("return%j",u.partOf.name+": multiple values"),r[u.partOf.name]=1,e("p%s=1",l)}o(e,u,c,d)}u.optional&&e("}")}return e("return null")};var r=s(238),n=s(7886);function i(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function o(t,e,s,n){if(e.resolvedType)if(e.resolvedType instanceof r){t("switch(%s){",n)("default:")("return%j",i(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),a=0;a<o.length;++a)t("case %i:",e.resolvedType.values[o[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",s,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",i(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",i(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",i(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",i(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",i(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",i(e,"buffer"))}return t}function a(t,e,s){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",s)("return%j",i(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",s)("return%j",i(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",s)("return%j",i(e,"boolean key"))}return t}},2016:(t,e,s)=>{"use strict";var r=e,n=s(5986);r[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),s=this.lookup(e);if(s){var r="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:s.encode(s.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var s="",r="";if(e&&e.json&&t.type_url&&t.value){r=t.type_url.substring(t.type_url.lastIndexOf("/")+1),s=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var i=this.lookup(r);i&&(t=i.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var o=t.$type.toObject(t,e);return""===s&&(s="type.googleapis.com/"),r=s+("."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName),o["@type"]=r,o}return this.toObject(t,e)}}},3117:(t,e,s)=>{"use strict";t.exports=l;var r,n=s(4652),i=n.LongBits,o=n.base64,a=n.utf8;function c(t,e,s){this.fn=t,this.len=e,this.next=void 0,this.val=s}function u(){}function d(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(l.create=function(){return new r})()}:function(){return new l}};function f(t,e,s){e[s]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function y(t,e,s){for(;t.hi;)e[s++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[s++]=127&t.lo|128,t.lo=t.lo>>>7;e[s++]=t.lo}function m(t,e,s){e[s]=255&t,e[s+1]=t>>>8&255,e[s+2]=t>>>16&255,e[s+3]=t>>>24}l.create=h(),l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype._push=function(t,e,s){return this.tail=this.tail.next=new c(t,e,s),this.len+=e,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(t,e,s){for(;t>127;)e[s++]=127&t|128,t>>>=7;e[s]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this._push(y,10,i.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var e=i.from(t);return this._push(y,e.length(),e)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var e=i.from(t).zzEncode();return this._push(y,e.length(),e)},l.prototype.bool=function(t){return this._push(f,1,t?1:0)},l.prototype.fixed32=function(t){return this._push(m,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var e=i.from(t);return this._push(m,4,e.lo)._push(m,4,e.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this._push(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this._push(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,e,s){e.set(t,s)}:function(t,e,s){for(var r=0;r<t.length;++r)e[s+r]=t[r]};l.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(n.isString(t)){var s=l.alloc(e=o.length(t));o.decode(t,s,0),t=s}return this.uint32(e)._push(v,e,t)},l.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(u,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,e=this.tail,s=this.len;return this.reset().uint32(s),s&&(this.tail.next=t.next,this.tail=e,this.len+=s),this},l.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),s=0;t;)t.fn(t.val,e,s),s+=t.len,t=t.next;return e},l._configure=function(t){r=t,l.create=h(),r._configure()}},4766:(t,e,s)=>{"use strict";t.exports=i;var r=s(3117);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4652);function i(){r.call(this)}function o(t,e,s){t.length<40?n.utf8.write(t,e,s):e.utf8Write?e.utf8Write(t,s):e.write(t,s)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,e,s){e.set(t,s)}:function(t,e,s){if(t.copy)t.copy(e,s,0,t.length);else for(var r=0;r<t.length;)e[s++]=t[r++]}},i.prototype.bytes=function(t){n.isString(t)&&(t=n._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=n.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},i._configure()},537:t=>{"use strict";t.exports=function(t,e){var s=new Array(arguments.length-1),r=0,n=2,i=!0;for(;n<arguments.length;)s[r++]=arguments[n++];return new Promise((function(n,o){s[r]=function(t){if(i)if(i=!1,t)o(t);else{for(var e=new Array(arguments.length-1),s=0;s<e.length;)e[s++]=arguments[s];n.apply(null,e)}};try{t.apply(e||null,s)}catch(t){i&&(i=!1,o(t))}}))}},9745:(t,e)=>{"use strict";var s=e;s.length=function(t){var e=t.length;if(!e)return 0;for(var s=0;--e%4>1&&"="===t.charAt(e);)++s;return Math.ceil(3*t.length)/4-s};for(var r=new Array(64),n=new Array(123),i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;s.encode=function(t,e,s){for(var n,i=null,o=[],a=0,c=0;e<s;){var u=t[e++];switch(c){case 0:o[a++]=r[u>>2],n=(3&u)<<4,c=1;break;case 1:o[a++]=r[n|u>>4],n=(15&u)<<2,c=2;break;case 2:o[a++]=r[n|u>>6],o[a++]=r[63&u],c=0}a>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,o)),a=0)}return c&&(o[a++]=r[n],o[a++]=61,1===c&&(o[a++]=61)),i?(a&&i.push(String.fromCharCode.apply(String,o.slice(0,a))),i.join("")):String.fromCharCode.apply(String,o.slice(0,a))};var o="invalid encoding";s.decode=function(t,e,s){for(var r,i=s,a=0,c=0;c<t.length;){var u=t.charCodeAt(c++);if(61===u&&a>1)break;if(void 0===(u=n[u]))throw Error(o);switch(a){case 0:r=u,a=1;break;case 1:e[s++]=r<<2|(48&u)>>4,r=u,a=2;break;case 2:e[s++]=(15&r)<<4|(60&u)>>2,r=u,a=3;break;case 3:e[s++]=(3&r)<<6|u,a=0}}if(1===a)throw Error(o);return s-i},s.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}},6348:t=>{"use strict";function e(t,s){"string"==typeof t&&(s=t,t=void 0);var r=[];function n(t){if("string"!=typeof t){var s=i();if(e.verbose&&console.log("codegen: "+s),s="return "+s,t){for(var o=Object.keys(t),a=new Array(o.length+1),c=new Array(o.length),u=0;u<o.length;)a[u]=o[u],c[u]=t[o[u++]];return a[u]=s,Function.apply(null,a).apply(null,c)}return Function(s)()}for(var d=new Array(arguments.length-1),l=0;l<d.length;)d[l]=arguments[++l];if(l=0,t=t.replace(/%([%dfijs])/g,(function(t,e){var s=d[l++];switch(e){case"d":case"f":return String(Number(s));case"i":return String(Math.floor(s));case"j":return JSON.stringify(s);case"s":return String(s)}return"%"})),l!==d.length)throw Error("parameter count mismatch");return r.push(t),n}function i(e){return"function "+(e||s||"")+"("+(t&&t.join(",")||"")+"){\n  "+r.join("\n  ")+"\n}"}return n.toString=i,n}t.exports=e,e.verbose=!1},4459:t=>{"use strict";function e(){this._listeners={}}t.exports=e,e.prototype.on=function(t,e,s){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:s||this}),this},e.prototype.off=function(t,e){if(void 0===t)this._listeners={};else if(void 0===e)this._listeners[t]=[];else for(var s=this._listeners[t],r=0;r<s.length;)s[r].fn===e?s.splice(r,1):++r;return this},e.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var s=[],r=1;r<arguments.length;)s.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,s)}return this}},7803:(t,e,s)=>{"use strict";t.exports=i;var r=s(537),n=s(3229)("fs");function i(t,e,s){return"function"==typeof e?(s=e,e={}):e||(e={}),s?!e.xhr&&n&&n.readFile?n.readFile(t,(function(r,n){return r&&"undefined"!=typeof XMLHttpRequest?i.xhr(t,e,s):r?s(r):s(null,e.binary?n:n.toString("utf8"))})):i.xhr(t,e,s):r(i,this,t,e)}i.xhr=function(t,e,s){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(4===r.readyState){if(0!==r.status&&200!==r.status)return s(Error("status "+r.status));if(e.binary){var t=r.response;if(!t){t=[];for(var n=0;n<r.responseText.length;++n)t.push(255&r.responseText.charCodeAt(n))}return s(null,"undefined"!=typeof Uint8Array?new Uint8Array(t):t)}return s(null,r.responseText)}},e.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",t),r.send()}},897:t=>{"use strict";function e(t){return"undefined"!=typeof Float32Array?function(){var e=new Float32Array([-0]),s=new Uint8Array(e.buffer),r=128===s[3];function n(t,r,n){e[0]=t,r[n]=s[0],r[n+1]=s[1],r[n+2]=s[2],r[n+3]=s[3]}function i(t,r,n){e[0]=t,r[n]=s[3],r[n+1]=s[2],r[n+2]=s[1],r[n+3]=s[0]}function o(t,r){return s[0]=t[r],s[1]=t[r+1],s[2]=t[r+2],s[3]=t[r+3],e[0]}function a(t,r){return s[3]=t[r],s[2]=t[r+1],s[1]=t[r+2],s[0]=t[r+3],e[0]}t.writeFloatLE=r?n:i,t.writeFloatBE=r?i:n,t.readFloatLE=r?o:a,t.readFloatBE=r?a:o}():function(){function e(t,e,s,r){var n=e<0?1:0;if(n&&(e=-e),0===e)t(1/e>0?0:2147483648,s,r);else if(isNaN(e))t(2143289344,s,r);else if(e>34028234663852886e22)t((n<<31|2139095040)>>>0,s,r);else if(e<11754943508222875e-54)t((n<<31|Math.round(e/1401298464324817e-60))>>>0,s,r);else{var i=Math.floor(Math.log(e)/Math.LN2);t((n<<31|i+127<<23|8388607&Math.round(e*Math.pow(2,-i)*8388608))>>>0,s,r)}}function o(t,e,s){var r=t(e,s),n=2*(r>>31)+1,i=r>>>23&255,o=8388607&r;return 255===i?o?NaN:n*(1/0):0===i?1401298464324817e-60*n*o:n*Math.pow(2,i-150)*(o+8388608)}t.writeFloatLE=e.bind(null,s),t.writeFloatBE=e.bind(null,r),t.readFloatLE=o.bind(null,n),t.readFloatBE=o.bind(null,i)}(),"undefined"!=typeof Float64Array?function(){var e=new Float64Array([-0]),s=new Uint8Array(e.buffer),r=128===s[7];function n(t,r,n){e[0]=t,r[n]=s[0],r[n+1]=s[1],r[n+2]=s[2],r[n+3]=s[3],r[n+4]=s[4],r[n+5]=s[5],r[n+6]=s[6],r[n+7]=s[7]}function i(t,r,n){e[0]=t,r[n]=s[7],r[n+1]=s[6],r[n+2]=s[5],r[n+3]=s[4],r[n+4]=s[3],r[n+5]=s[2],r[n+6]=s[1],r[n+7]=s[0]}function o(t,r){return s[0]=t[r],s[1]=t[r+1],s[2]=t[r+2],s[3]=t[r+3],s[4]=t[r+4],s[5]=t[r+5],s[6]=t[r+6],s[7]=t[r+7],e[0]}function a(t,r){return s[7]=t[r],s[6]=t[r+1],s[5]=t[r+2],s[4]=t[r+3],s[3]=t[r+4],s[2]=t[r+5],s[1]=t[r+6],s[0]=t[r+7],e[0]}t.writeDoubleLE=r?n:i,t.writeDoubleBE=r?i:n,t.readDoubleLE=r?o:a,t.readDoubleBE=r?a:o}():function(){function e(t,e,s,r,n,i){var o=r<0?1:0;if(o&&(r=-r),0===r)t(0,n,i+e),t(1/r>0?0:2147483648,n,i+s);else if(isNaN(r))t(0,n,i+e),t(2146959360,n,i+s);else if(r>17976931348623157e292)t(0,n,i+e),t((o<<31|2146435072)>>>0,n,i+s);else{var a;if(r<22250738585072014e-324)t((a=r/5e-324)>>>0,n,i+e),t((o<<31|a/4294967296)>>>0,n,i+s);else{var c=Math.floor(Math.log(r)/Math.LN2);1024===c&&(c=1023),t(4503599627370496*(a=r*Math.pow(2,-c))>>>0,n,i+e),t((o<<31|c+1023<<20|1048576*a&1048575)>>>0,n,i+s)}}}function o(t,e,s,r,n){var i=t(r,n+e),o=t(r,n+s),a=2*(o>>31)+1,c=o>>>20&2047,u=4294967296*(1048575&o)+i;return 2047===c?u?NaN:a*(1/0):0===c?5e-324*a*u:a*Math.pow(2,c-1075)*(u+4503599627370496)}t.writeDoubleLE=e.bind(null,s,0,4),t.writeDoubleBE=e.bind(null,r,4,0),t.readDoubleLE=o.bind(null,n,0,4),t.readDoubleBE=o.bind(null,i,4,0)}(),t}function s(t,e,s){e[s]=255&t,e[s+1]=t>>>8&255,e[s+2]=t>>>16&255,e[s+3]=t>>>24}function r(t,e,s){e[s]=t>>>24,e[s+1]=t>>>16&255,e[s+2]=t>>>8&255,e[s+3]=255&t}function n(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}function i(t,e){return(t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3])>>>0}t.exports=e(e)},3229:module=>{"use strict";function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}module.exports=inquire},1272:(t,e)=>{"use strict";var s=e,r=s.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},n=s.normalize=function(t){var e=(t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/")).split("/"),s=r(t),n="";s&&(n=e.shift()+"/");for(var i=0;i<e.length;)".."===e[i]?i>0&&".."!==e[i-1]?e.splice(--i,2):s?e.splice(i,1):++i:"."===e[i]?e.splice(i,1):++i;return n+e.join("/")};s.resolve=function(t,e,s){return s||(e=n(e)),r(e)?e:(s||(t=n(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?n(t+"/"+e):e)}},7986:t=>{"use strict";t.exports=function(t,e,s){var r=s||8192,n=r>>>1,i=null,o=r;return function(s){if(s<1||s>n)return t(s);o+s>r&&(i=t(r),o=0);var a=e.call(i,o,o+=s);return 7&o&&(o=1+(7|o)),a}}},113:(t,e)=>{"use strict";var s=e;s.length=function(t){for(var e=0,s=0,r=0;r<t.length;++r)(s=t.charCodeAt(r))<128?e+=1:s<2048?e+=2:55296==(64512&s)&&56320==(64512&t.charCodeAt(r+1))?(++r,e+=4):e+=3;return e},s.read=function(t,e,s){if(s-e<1)return"";for(var r,n=null,i=[],o=0;e<s;)(r=t[e++])<128?i[o++]=r:r>191&&r<224?i[o++]=(31&r)<<6|63&t[e++]:r>239&&r<365?(r=((7&r)<<18|(63&t[e++])<<12|(63&t[e++])<<6|63&t[e++])-65536,i[o++]=55296+(r>>10),i[o++]=56320+(1023&r)):i[o++]=(15&r)<<12|(63&t[e++])<<6|63&t[e++],o>8191&&((n||(n=[])).push(String.fromCharCode.apply(String,i)),o=0);return n?(o&&n.push(String.fromCharCode.apply(String,i.slice(0,o))),n.join("")):String.fromCharCode.apply(String,i.slice(0,o))},s.write=function(t,e,s){for(var r,n,i=s,o=0;o<t.length;++o)(r=t.charCodeAt(o))<128?e[s++]=r:r<2048?(e[s++]=r>>6|192,e[s++]=63&r|128):55296==(64512&r)&&56320==(64512&(n=t.charCodeAt(o+1)))?(r=65536+((1023&r)<<10)+(1023&n),++o,e[s++]=r>>18|240,e[s++]=r>>12&63|128,e[s++]=r>>6&63|128,e[s++]=63&r|128):(e[s++]=r>>12|224,e[s++]=r>>6&63|128,e[s++]=63&r|128);return s-i}},3717:(t,e)=>{function s(t){if(t)return function(t){for(var e in s.prototype)t[e]=s.prototype[e];return t}(t)}e.Emitter=s,s.prototype.on=s.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},s.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},s.prototype.off=s.prototype.removeListener=s.prototype.removeAllListeners=s.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,r=this._callbacks["$"+t];if(!r)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<r.length;n++)if((s=r[n])===e||s.fn===e){r.splice(n,1);break}return 0===r.length&&delete this._callbacks["$"+t],this},s.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(s){r=0;for(var n=(s=s.slice(0)).length;r<n;++r)s[r].apply(this,e)}return this},s.prototype.emitReserved=s.prototype.emit,s.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},s.prototype.hasListeners=function(t){return!!this.listeners(t).length}},7672:t=>{function e(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}t.exports=e,e.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=0==(1&Math.floor(10*e))?t-s:t+s}return 0|Math.min(t,this.max)},e.prototype.reset=function(){this.attempts=0},e.prototype.setMin=function(t){this.ms=t},e.prototype.setMax=function(t){this.max=t},e.prototype.setJitter=function(t){this.jitter=t}},3286:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var r=s(7758),n=s.n(r)()((function(t){return t[1]}));n.push([t.id,'.ck.ck-tooltip,.ck.ck-tooltip .ck-tooltip__text:after{-webkit-backface-visibility:hidden;pointer-events:none;position:absolute}.ck.ck-tooltip{display:none;opacity:0;visibility:hidden;z-index:var(--ck-z-modal)}.ck.ck-tooltip .ck-tooltip__text{display:inline-block}.ck.ck-tooltip .ck-tooltip__text:after{content:"";height:0;width:0}:root{--ck-color-presence-list-dropdown-background:#fff;--ck-color-presence-list-dropdown-arrow-border:#ebebeb;--ck-presence-list-dropdown-list-max-width:250px;--ck-presence-list-dropdown-list-min-width:180px;--ck-presence-list-users-tooltip-max-width:120px;--ck-presence-list-users-tooltip-min-width:25px}.ck.ck-presence-list{align-items:center;display:flex;font-size:var(--ck-font-size-base);margin-right:var(--ck-spacing-standard);transition:margin-right .2s ease-in-out}.ck.ck-presence-list *{box-sizing:border-box}.ck.ck-presence-list__list{display:flex;justify-content:flex-end}.ck.ck-presence-list__counter{color:var(--ck-color-base-text)}.ck.ck-presence-list__counter--hidden{display:none}.ck.ck-presence-list__list-item{background:none;border:0;color:inherit;font:inherit;margin-left:var(--ck-spacing-standard);outline:none;padding:0;position:relative}.ck.ck-presence-list__list-item:hover .ck-tooltip{opacity:1;visibility:visible}.ck.ck-presence-list__list-item .ck.ck-tooltip{display:block}.ck.ck-presence-list__list-item .ck-tooltip__text span{display:block;max-width:var(--ck-presence-list-users-tooltip-max-width);overflow:hidden;text-align:center;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__marker{display:block;height:3px;margin-top:3px;position:relative;width:100%}.ck.ck-presence-list--collapsed .ck-presence-list__list{margin-left:var(--ck-spacing-standard);min-width:calc(var(--ck-user-avatar-size)*1.5)}.ck.ck-presence-list--collapsed .ck-presence-list__list *{cursor:pointer;transition:all .4s ease-in-out}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item{margin-left:calc(var(--ck-user-avatar-size)*-1 + 5px)}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item .ck-tooltip{display:none}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(5){opacity:.15}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(4){opacity:.35}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(3){opacity:.55}.ck.ck-presence-list--collapsed .ck.ck-presence-list__list-item:nth-last-child(2){opacity:.75}.ck.ck-presence-list__balloon{--ck-color-panel-border:var(--ck-color-presence-list-dropdown-arrow-border);--ck-color-panel-background:var(--ck-color-presence-list-dropdown-background);animation:fadeIn .3s ease-in-out;background-color:var(--ck-color-presence-list-dropdown-background);border:0;opacity:1}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-wrapper{border-radius:var(--ck-border-radius);max-height:80vh;max-width:var(--ck-presence-list-dropdown-list-max-width);min-width:var(--ck-presence-list-dropdown-list-min-width);overflow-x:hidden;overflow-y:auto}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item{align-items:center;background:none;border:0;color:inherit;display:flex;font:inherit;outline:none;padding:0;padding:var(--ck-spacing-standard);position:relative}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:first-of-type .ck-presence-list__marker{border-top-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list-item:last-of-type .ck-presence-list__marker{border-bottom-left-radius:var(--ck-border-radius)}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck-user__full-name{color:var(--ck-color-base-text);margin-left:var(--ck-spacing-standard);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.ck.ck-presence-list__balloon .ck.ck-presence-list__dropdown-list .ck.ck-presence-list__marker{height:100%;left:0;margin:0;position:absolute;width:3px}.ck-presence-list__balloon button.ck-presence-list__dropdown-list-item *,.ck-presence-list__list button.ck-presence-list__list-item *{cursor:pointer}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}',""]);const i=n},9940:(t,e,s)=>{"use strict";s.d(e,{Z:()=>i});var r=s(7758),n=s.n(r)()((function(t){return t[1]}));n.push([t.id,".ck .ck-user__marker{cursor:default;display:inline;position:relative}.ck .ck-user__marker:after{color:#fff;content:attr(data-name);display:none;font-family:Georgia,sans-serif;font-size:var(--ck-font-size-base);font-style:normal;font-weight:400;left:0;line-height:1;opacity:0;padding:var(--ck-spacing-small);position:absolute;top:-20px;transition:opacity .2s linear,transform .3s ease-in-out;white-space:nowrap;z-index:99999}.ck .ck-user__marker:hover .ck-user__marker-dot{width:0}.ck .ck-user__marker:hover:after{animation:fadeInLeft .3s ease-in-out;display:block;opacity:1}.ck .ck-user__marker-line{bottom:0;height:100%;position:absolute;width:0}.ck .ck-user__marker-dot{border-radius:50%;cursor:default;display:block;height:var(--ck-user-dot-size);left:50%;position:absolute;top:calc((var(--ck-user-dot-size)/2)*-1);transform:translate(-50%,-50%);width:var(--ck-user-dot-size)}.ck .ck-placeholder .ck-user__marker{display:none}@keyframes fadeInLeft{0%{opacity:0;transform:translateX(-10px)}to{opacity:1;transform:translateX(0)}}",""]);const i=n},7758:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var s=t(e);return e[2]?"@media ".concat(e[2]," {").concat(s,"}"):s})).join("")},e.i=function(t,s,r){"string"==typeof t&&(t=[[null,t,""]]);var n={};if(r)for(var i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);r&&n[c[0]]||(s&&(c[2]?c[2]="".concat(s," and ").concat(c[2]):c[2]=s),e.push(c))}},e}},7154:t=>{var e=1e3,s=60*e,r=60*s,n=24*r,i=7*n,o=365.25*n;function a(t,e,s,r){var n=e>=1.5*s;return Math.round(t/s)+" "+r+(n?"s":"")}t.exports=function(t,c){c=c||{};var u=typeof t;if("string"===u&&t.length>0)return function(t){if((t=String(t)).length>100)return;var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!a)return;var c=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return c*o;case"weeks":case"week":case"w":return c*i;case"days":case"day":case"d":return c*n;case"hours":case"hour":case"hrs":case"hr":case"h":return c*r;case"minutes":case"minute":case"mins":case"min":case"m":return c*s;case"seconds":case"second":case"secs":case"sec":case"s":return c*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return c;default:return}}(t);if("number"===u&&isFinite(t))return c.long?function(t){var i=Math.abs(t);if(i>=n)return a(t,i,n,"day");if(i>=r)return a(t,i,r,"hour");if(i>=s)return a(t,i,s,"minute");if(i>=e)return a(t,i,e,"second");return t+" ms"}(t):function(t){var i=Math.abs(t);if(i>=n)return Math.round(t/n)+"d";if(i>=r)return Math.round(t/r)+"h";if(i>=s)return Math.round(t/s)+"m";if(i>=e)return Math.round(t/e)+"s";return t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},5579:(t,e,s)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const s="color: "+this.color;e.splice(1,0,s,"color: inherit");let r=0,n=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(r++,"%c"===t&&(n=r))})),e.splice(n,0,s)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG);return t},e.useColors=function(){if("undefined"!=typeof window&&window.process&&("renderer"===window.process.type||window.process.__nwjs))return!0;if("undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=s(3847)(e);const{formatters:r}=t.exports;r.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},3847:(t,e,s)=>{t.exports=function(t){function e(t){let s,n,i,o=null;function a(...t){if(!a.enabled)return;const r=a,n=Number(new Date),i=n-(s||n);r.diff=i,r.prev=s,r.curr=n,s=n,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let o=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((s,n)=>{if("%%"===s)return"%";o++;const i=e.formatters[n];if("function"==typeof i){const e=t[o];s=i.call(r,e),t.splice(o,1),o--}return s})),e.formatArgs.call(r,t);(r.log||e.log).apply(r,t)}return a.namespace=t,a.useColors=e.useColors(),a.color=e.selectColor(t),a.extend=r,a.destroy=e.destroy,Object.defineProperty(a,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==o?o:(n!==e.namespaces&&(n=e.namespaces,i=e.enabled(t)),i),set:t=>{o=t}}),"function"==typeof e.init&&e.init(a),a}function r(t,s){const r=e(this.namespace+(void 0===s?":":s)+t);return r.log=this.log,r}function n(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){if(t instanceof Error)return t.stack||t.message;return t},e.disable=function(){const t=[...e.names.map(n),...e.skips.map(n).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let s;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const r=("string"==typeof t?t:"").split(/[\s,]+/),n=r.length;for(s=0;s<n;s++)r[s]&&("-"===(t=r[s].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let s,r;for(s=0,r=e.skips.length;s<r;s++)if(e.skips[s].test(t))return!1;for(s=0,r=e.names.length;s<r;s++)if(e.names[s].test(t))return!0;return!1},e.humanize=s(7154),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((s=>{e[s]=t[s]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let s=0;for(let e=0;e<t.length;e++)s=(s<<5)-s+t.charCodeAt(e),s|=0;return e.colors[Math.abs(s)%e.colors.length]},e.enable(e.load()),e}},4568:t=>{try{t.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(e){t.exports=!1}},9827:(t,e)=>{e.encode=function(t){var e="";for(var s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e},e.decode=function(t){for(var e={},s=t.split("&"),r=0,n=s.length;r<n;r++){var i=s[r].split("=");e[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return e}},5977:t=>{var e=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,s=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];t.exports=function(t){var r=t,n=t.indexOf("["),i=t.indexOf("]");-1!=n&&-1!=i&&(t=t.substring(0,n)+t.substring(n,i).replace(/:/g,";")+t.substring(i,t.length));for(var o,a,c=e.exec(t||""),u={},d=14;d--;)u[s[d]]=c[d]||"";return-1!=n&&-1!=i&&(u.source=r,u.host=u.host.substring(1,u.host.length-1).replace(/;/g,":"),u.authority=u.authority.replace("[","").replace("]","").replace(/;/g,":"),u.ipv6uri=!0),u.pathNames=function(t,e){var s=/\/{2,9}/g,r=e.replace(s,"/").split("/");"/"!=e.substr(0,1)&&0!==e.length||r.splice(0,1);"/"==e.substr(e.length-1,1)&&r.splice(r.length-1,1);return r}(0,u.path),u.queryKey=(o=u.query,a={},o.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,(function(t,e,s){e&&(a[e]=s)})),a),u}},6154:(t,e,s)=>{"use strict";t.exports=s(7278)},6274:(t,e,s)=>{"use strict";var r=e,n=s(4937),i=s(7572);function o(t,e,s,r){if(e.resolvedType)if(e.resolvedType instanceof n){t("switch(d%s){",r);for(var i=e.resolvedType.values,o=Object.keys(i),a=0;a<o.length;++a)e.repeated&&i[o[a]]===e.typeDefault&&t("default:"),t("case%j:",o[a])("case %i:",i[o[a]])("m%s=%j",r,i[o[a]])("break");t("}")}else t('if(typeof d%s!=="object")',r)("throw TypeError(%j)",e.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",r,s,r);else{var c=!1;switch(e.type){case"double":case"float":t("m%s=Number(d%s)",r,r);break;case"uint32":case"fixed32":t("m%s=d%s>>>0",r,r);break;case"int32":case"sint32":case"sfixed32":t("m%s=d%s|0",r,r);break;case"uint64":c=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",r,r,c)('else if(typeof d%s==="string")',r)("m%s=parseInt(d%s,10)",r,r)('else if(typeof d%s==="number")',r)("m%s=d%s",r,r)('else if(typeof d%s==="object")',r)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",r,r,r,c?"true":"");break;case"bytes":t('if(typeof d%s==="string")',r)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",r,r,r)("else if(d%s.length)",r)("m%s=d%s",r,r);break;case"string":t("m%s=String(d%s)",r,r);break;case"bool":t("m%s=Boolean(d%s)",r,r)}}return t}function a(t,e,s,r){if(e.resolvedType)e.resolvedType instanceof n?t("d%s=o.enums===String?types[%i].values[m%s]:m%s",r,s,r,r):t("d%s=types[%i].toObject(m%s,o)",r,s,r);else{var i=!1;switch(e.type){case"double":case"float":t("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",r,r,r,r);break;case"uint64":i=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":t('if(typeof m%s==="number")',r)("d%s=o.longs===String?String(m%s):m%s",r,r,r)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",r,r,r,r,i?"true":"",r);break;case"bytes":t("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",r,r,r,r,r);break;default:t("d%s=m%s",r,r)}}return t}r.fromObject=function(t){var e=t.fieldsArray,s=i.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return s("return new this.ctor");s("var m=new this.ctor");for(var r=0;r<e.length;++r){var a=e[r].resolve(),c=i.safeProp(a.name);a.map?(s("if(d%s){",c)('if(typeof d%s!=="object")',c)("throw TypeError(%j)",a.fullName+": object expected")("m%s={}",c)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",c),o(s,a,r,c+"[ks[i]]")("}")("}")):a.repeated?(s("if(d%s){",c)("if(!Array.isArray(d%s))",c)("throw TypeError(%j)",a.fullName+": array expected")("m%s=[]",c)("for(var i=0;i<d%s.length;++i){",c),o(s,a,r,c+"[i]")("}")("}")):(a.resolvedType instanceof n||s("if(d%s!=null){",c),o(s,a,r,c),a.resolvedType instanceof n||s("}"))}return s("return m")},r.toObject=function(t){var e=t.fieldsArray.slice().sort(i.compareFieldsById);if(!e.length)return i.codegen()("return {}");for(var s=i.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],o=[],c=[],u=0;u<e.length;++u)e[u].partOf||(e[u].resolve().repeated?r:e[u].map?o:c).push(e[u]);if(r.length){for(s("if(o.arrays||o.defaults){"),u=0;u<r.length;++u)s("d%s=[]",i.safeProp(r[u].name));s("}")}if(o.length){for(s("if(o.objects||o.defaults){"),u=0;u<o.length;++u)s("d%s={}",i.safeProp(o[u].name));s("}")}if(c.length){for(s("if(o.defaults){"),u=0;u<c.length;++u){var d=c[u],l=i.safeProp(d.name);if(d.resolvedType instanceof n)s("d%s=o.enums===String?%j:%j",l,d.resolvedType.valuesById[d.typeDefault],d.typeDefault);else if(d.long)s("if(util.Long){")("var n=new util.Long(%i,%i,%j)",d.typeDefault.low,d.typeDefault.high,d.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",l)("}else")("d%s=o.longs===String?%j:%i",l,d.typeDefault.toString(),d.typeDefault.toNumber());else if(d.bytes){var h="["+Array.prototype.slice.call(d.typeDefault).join(",")+"]";s("if(o.bytes===String)d%s=%j",l,String.fromCharCode.apply(String,d.typeDefault))("else{")("d%s=%s",l,h)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",l,l)("}")}else s("d%s=%j",l,d.typeDefault)}s("}")}var f=!1;for(u=0;u<e.length;++u){d=e[u];var p=t._fieldsArray.indexOf(d);l=i.safeProp(d.name);d.map?(f||(f=!0,s("var ks2")),s("if(m%s&&(ks2=Object.keys(m%s)).length){",l,l)("d%s={}",l)("for(var j=0;j<ks2.length;++j){"),a(s,d,p,l+"[ks2[j]]")("}")):d.repeated?(s("if(m%s&&m%s.length){",l,l)("d%s=[]",l)("for(var j=0;j<m%s.length;++j){",l),a(s,d,p,l+"[j]")("}")):(s("if(m%s!=null&&m.hasOwnProperty(%j)){",l,d.name),a(s,d,p,l),d.partOf&&s("if(o.oneofs)")("d%s=%j",i.safeProp(d.partOf.name),d.name)),s("}")}return s("return d")}},4799:(t,e,s)=>{"use strict";t.exports=function(t){var e=i.codegen(["r","l"],t.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(t.fieldsArray.filter((function(t){return t.map})).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()");t.group&&e("if((t&7)===4)")("break");e("switch(t>>>3){");for(var s=0;s<t.fieldsArray.length;++s){var a=t._fieldsArray[s].resolve(),c=a.resolvedType instanceof r?"int32":a.type,u="m"+i.safeProp(a.name);e("case %i:",a.id),a.map?(e("if(%s===util.emptyObject)",u)("%s={}",u)("var c2 = r.uint32()+r.pos"),void 0!==n.defaults[a.keyType]?e("k=%j",n.defaults[a.keyType]):e("k=null"),void 0!==n.defaults[c]?e("value=%j",n.defaults[c]):e("value=null"),e("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",a.keyType)("case 2:"),void 0===n.basic[c]?e("value=types[%i].decode(r,r.uint32())",s):e("value=r.%s()",c),e("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),void 0!==n.long[a.keyType]?e('%s[typeof k==="object"?util.longToHash(k):k]=value',u):e("%s[k]=value",u)):a.repeated?(e("if(!(%s&&%s.length))",u,u)("%s=[]",u),void 0!==n.packed[c]&&e("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",u,c)("}else"),void 0===n.basic[c]?e(a.resolvedType.group?"%s.push(types[%i].decode(r))":"%s.push(types[%i].decode(r,r.uint32()))",u,s):e("%s.push(r.%s())",u,c)):void 0===n.basic[c]?e(a.resolvedType.group?"%s=types[%i].decode(r)":"%s=types[%i].decode(r,r.uint32())",u,s):e("%s=r.%s()",u,c),e("break")}for(e("default:")("r.skipType(t&7)")("break")("}")("}"),s=0;s<t._fieldsArray.length;++s){var d=t._fieldsArray[s];d.required&&e("if(!m.hasOwnProperty(%j))",d.name)("throw util.ProtocolError(%j,{instance:m})",o(d))}return e("return m")};var r=s(4937),n=s(8997),i=s(7572);function o(t){return"missing required '"+t.name+"'"}},6382:(t,e,s)=>{"use strict";t.exports=function(t){for(var e,s=i.codegen(["m","w"],t.name+"$encode")("if(!w)")("w=Writer.create()"),a=t.fieldsArray.slice().sort(i.compareFieldsById),c=0;c<a.length;++c){var u=a[c].resolve(),d=t._fieldsArray.indexOf(u),l=u.resolvedType instanceof r?"int32":u.type,h=n.basic[l];e="m"+i.safeProp(u.name),u.map?(s("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",e,u.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",e)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(u.id<<3|2)>>>0,8|n.mapKey[u.keyType],u.keyType),void 0===h?s("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",d,e):s(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|h,l,e),s("}")("}")):u.repeated?(s("if(%s!=null&&%s.length){",e,e),u.packed&&void 0!==n.packed[l]?s("w.uint32(%i).fork()",(u.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",e)("w.%s(%s[i])",l,e)("w.ldelim()"):(s("for(var i=0;i<%s.length;++i)",e),void 0===h?o(s,u,d,e+"[i]"):s("w.uint32(%i).%s(%s[i])",(u.id<<3|h)>>>0,l,e)),s("}")):(u.optional&&s("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",e,u.name),void 0===h?o(s,u,d,e):s("w.uint32(%i).%s(%s)",(u.id<<3|h)>>>0,l,e))}return s("return w")};var r=s(4937),n=s(8997),i=s(7572);function o(t,e,s,r){return e.resolvedType.group?t("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",s,r,(e.id<<3|3)>>>0,(e.id<<3|4)>>>0):t("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",s,r,(e.id<<3|2)>>>0)}},4937:(t,e,s)=>{"use strict";t.exports=o;var r=s(4154);((o.prototype=Object.create(r.prototype)).constructor=o).className="Enum";var n=s(512),i=s(7572);function o(t,e,s,n,i){if(r.call(this,t,s),e&&"object"!=typeof e)throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=i||{},this.reserved=void 0,e)for(var o=Object.keys(e),a=0;a<o.length;++a)"number"==typeof e[o[a]]&&(this.valuesById[this.values[o[a]]=e[o[a]]]=o[a])}o.fromJSON=function(t,e){var s=new o(t,e.values,e.options,e.comment,e.comments);return s.reserved=e.reserved,s},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["options",this.options,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])},o.prototype.add=function(t,e,s){if(!i.isString(t))throw TypeError("name must be a string");if(!i.isInteger(e))throw TypeError("id must be an integer");if(void 0!==this.values[t])throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(void 0!==this.valuesById[e]){if(!this.options||!this.options.allow_alias)throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return this.comments[t]=s||null,this},o.prototype.remove=function(t){if(!i.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(null==e)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this},o.prototype.isReservedId=function(t){return n.isReservedId(this.reserved,t)},o.prototype.isReservedName=function(t){return n.isReservedName(this.reserved,t)}},5891:(t,e,s)=>{"use strict";t.exports=u;var r=s(4154);((u.prototype=Object.create(r.prototype)).constructor=u).className="Field";var n,i=s(4937),o=s(8997),a=s(7572),c=/^required|optional|repeated$/;function u(t,e,s,n,i,u,d){if(a.isObject(n)?(d=i,u=n,n=i=void 0):a.isObject(i)&&(d=u,u=i,i=void 0),r.call(this,t,u),!a.isInteger(e)||e<0)throw TypeError("id must be a non-negative integer");if(!a.isString(s))throw TypeError("type must be a string");if(void 0!==n&&!c.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(void 0!==i&&!a.isString(i))throw TypeError("extend must be a string");"proto3_optional"===n&&(n="optional"),this.rule=n&&"optional"!==n?n:void 0,this.type=s,this.id=e,this.extend=i||void 0,this.required="required"===n,this.optional=!this.required,this.repeated="repeated"===n,this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=!!a.Long&&void 0!==o.long[s],this.bytes="bytes"===s,this.resolvedType=null,this.extensionField=null,this.declaringField=null,this._packed=null,this.comment=d}u.fromJSON=function(t,e){return new u(t,e.id,e.type,e.rule,e.extend,e.options,e.comment)},Object.defineProperty(u.prototype,"packed",{get:function(){return null===this._packed&&(this._packed=!1!==this.getOption("packed")),this._packed}}),u.prototype.setOption=function(t,e,s){return"packed"===t&&(this._packed=null),r.prototype.setOption.call(this,t,e,s)},u.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return a.toObject(["rule","optional"!==this.rule&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},u.prototype.resolve=function(){if(this.resolved)return this;if(void 0===(this.typeDefault=o.defaults[this.type])&&(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof n?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]),this.options&&null!=this.options.default&&(this.typeDefault=this.options.default,this.resolvedType instanceof i&&"string"==typeof this.typeDefault&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(!0!==this.options.packed&&(void 0===this.options.packed||!this.resolvedType||this.resolvedType instanceof i)||delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=a.Long.fromNumber(this.typeDefault,"u"===this.type.charAt(0)),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&"string"==typeof this.typeDefault){var t;a.base64.test(this.typeDefault)?a.base64.decode(this.typeDefault,t=a.newBuffer(a.base64.length(this.typeDefault)),0):a.utf8.write(this.typeDefault,t=a.newBuffer(a.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=a.emptyObject:this.repeated?this.defaultValue=a.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof n&&(this.parent.ctor.prototype[this.name]=this.defaultValue),r.prototype.resolve.call(this)},u.d=function(t,e,s,r){return"function"==typeof e?e=a.decorateType(e).name:e&&"object"==typeof e&&(e=a.decorateEnum(e).name),function(n,i){a.decorateType(n.constructor).add(new u(i,t,e,s,{default:r}))}},u._configure=function(t){n=t}},7278:(t,e,s)=>{"use strict";var r=t.exports=s(3278);r.build="light",r.load=function(t,e,s){return"function"==typeof e?(s=e,e=new r.Root):e||(e=new r.Root),e.load(t,s)},r.loadSync=function(t,e){return e||(e=new r.Root),e.loadSync(t)},r.encoder=s(6382),r.decoder=s(4799),r.verifier=s(8600),r.converter=s(6274),r.ReflectionObject=s(4154),r.Namespace=s(512),r.Root=s(2613),r.Enum=s(4937),r.Type=s(4560),r.Field=s(5891),r.OneOf=s(3044),r.MapField=s(8911),r.Service=s(877),r.Method=s(4935),r.Message=s(4777),r.wrappers=s(3375),r.types=s(8997),r.util=s(7572),r.ReflectionObject._configure(r.Root),r.Namespace._configure(r.Type,r.Service,r.Enum),r.Root._configure(r.Type),r.Field._configure(r.Type)},3278:(t,e,s)=>{"use strict";var r=e;function n(){r.util._configure(),r.Writer._configure(r.BufferWriter),r.Reader._configure(r.BufferReader)}r.build="minimal",r.Writer=s(2944),r.BufferWriter=s(2178),r.Reader=s(9867),r.BufferReader=s(2676),r.util=s(4155),r.rpc=s(3290),r.roots=s(284),r.configure=n,n()},8911:(t,e,s)=>{"use strict";t.exports=o;var r=s(5891);((o.prototype=Object.create(r.prototype)).constructor=o).className="MapField";var n=s(8997),i=s(7572);function o(t,e,s,n,o,a){if(r.call(this,t,e,n,void 0,void 0,o,a),!i.isString(s))throw TypeError("keyType must be a string");this.keyType=s,this.resolvedKeyType=null,this.map=!0}o.fromJSON=function(t,e){return new o(t,e.id,e.keyType,e.type,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])},o.prototype.resolve=function(){if(this.resolved)return this;if(void 0===n.mapKey[this.keyType])throw Error("invalid key type: "+this.keyType);return r.prototype.resolve.call(this)},o.d=function(t,e,s){return"function"==typeof s?s=i.decorateType(s).name:s&&"object"==typeof s&&(s=i.decorateEnum(s).name),function(r,n){i.decorateType(r.constructor).add(new o(n,t,e,s))}}},4777:(t,e,s)=>{"use strict";t.exports=n;var r=s(4155);function n(t){if(t)for(var e=Object.keys(t),s=0;s<e.length;++s)this[e[s]]=t[e[s]]}n.create=function(t){return this.$type.create(t)},n.encode=function(t,e){return this.$type.encode(t,e)},n.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)},n.decode=function(t){return this.$type.decode(t)},n.decodeDelimited=function(t){return this.$type.decodeDelimited(t)},n.verify=function(t){return this.$type.verify(t)},n.fromObject=function(t){return this.$type.fromObject(t)},n.toObject=function(t,e){return this.$type.toObject(t,e)},n.prototype.toJSON=function(){return this.$type.toObject(this,r.toJSONOptions)}},4935:(t,e,s)=>{"use strict";t.exports=i;var r=s(4154);((i.prototype=Object.create(r.prototype)).constructor=i).className="Method";var n=s(7572);function i(t,e,s,i,o,a,c,u,d){if(n.isObject(o)?(c=o,o=a=void 0):n.isObject(a)&&(c=a,a=void 0),void 0!==e&&!n.isString(e))throw TypeError("type must be a string");if(!n.isString(s))throw TypeError("requestType must be a string");if(!n.isString(i))throw TypeError("responseType must be a string");r.call(this,t,c),this.type=e||"rpc",this.requestType=s,this.requestStream=!!o||void 0,this.responseType=i,this.responseStream=!!a||void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=u,this.parsedOptions=d}i.fromJSON=function(t,e){return new i(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)},i.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return n.toObject(["type","rpc"!==this.type&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])},i.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),r.prototype.resolve.call(this))}},512:(t,e,s)=>{"use strict";t.exports=l;var r=s(4154);((l.prototype=Object.create(r.prototype)).constructor=l).className="Namespace";var n,i,o,a=s(5891),c=s(3044),u=s(7572);function d(t,e){if(t&&t.length){for(var s={},r=0;r<t.length;++r)s[t[r].name]=t[r].toJSON(e);return s}}function l(t,e){r.call(this,t,e),this.nested=void 0,this._nestedArray=null}function h(t){return t._nestedArray=null,t}l.fromJSON=function(t,e){return new l(t,e.options).addJSON(e.nested)},l.arrayToJSON=d,l.isReservedId=function(t,e){if(t)for(var s=0;s<t.length;++s)if("string"!=typeof t[s]&&t[s][0]<=e&&t[s][1]>e)return!0;return!1},l.isReservedName=function(t,e){if(t)for(var s=0;s<t.length;++s)if(t[s]===e)return!0;return!1},Object.defineProperty(l.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=u.toArray(this.nested))}}),l.prototype.toJSON=function(t){return u.toObject(["options",this.options,"nested",d(this.nestedArray,t)])},l.prototype.addJSON=function(t){if(t)for(var e,s=Object.keys(t),r=0;r<s.length;++r)e=t[s[r]],this.add((void 0!==e.fields?n.fromJSON:void 0!==e.values?o.fromJSON:void 0!==e.methods?i.fromJSON:void 0!==e.id?a.fromJSON:l.fromJSON)(s[r],e));return this},l.prototype.get=function(t){return this.nested&&this.nested[t]||null},l.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof o)return this.nested[t].values;throw Error("no such enum: "+t)},l.prototype.add=function(t){if(!(t instanceof a&&void 0!==t.extend||t instanceof n||t instanceof o||t instanceof i||t instanceof l||t instanceof c))throw TypeError("object must be a valid nested object");if(this.nested){var e=this.get(t.name);if(e){if(!(e instanceof l&&t instanceof l)||e instanceof n||e instanceof i)throw Error("duplicate name '"+t.name+"' in "+this);for(var s=e.nestedArray,r=0;r<s.length;++r)t.add(s[r]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}}else this.nested={};return this.nested[t.name]=t,t.onAdd(this),h(this)},l.prototype.remove=function(t){if(!(t instanceof r))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),h(this)},l.prototype.define=function(t,e){if(u.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&""===t[0])throw Error("path must be relative");for(var s=this;t.length>0;){var r=t.shift();if(s.nested&&s.nested[r]){if(!((s=s.nested[r])instanceof l))throw Error("path conflicts with non-namespace objects")}else s.add(s=new l(r))}return e&&s.addJSON(e),s},l.prototype.resolveAll=function(){for(var t=this.nestedArray,e=0;e<t.length;)t[e]instanceof l?t[e++].resolveAll():t[e++].resolve();return this.resolve()},l.prototype.lookup=function(t,e,s){if("boolean"==typeof e?(s=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),u.isString(t)&&t.length){if("."===t)return this.root;t=t.split(".")}else if(!t.length)return this;if(""===t[0])return this.root.lookup(t.slice(1),e);var r=this.get(t[0]);if(r){if(1===t.length){if(!e||e.indexOf(r.constructor)>-1)return r}else if(r instanceof l&&(r=r.lookup(t.slice(1),e,!0)))return r}else for(var n=0;n<this.nestedArray.length;++n)if(this._nestedArray[n]instanceof l&&(r=this._nestedArray[n].lookup(t,e,!0)))return r;return null===this.parent||s?null:this.parent.lookup(t,e)},l.prototype.lookupType=function(t){var e=this.lookup(t,[n]);if(!e)throw Error("no such type: "+t);return e},l.prototype.lookupEnum=function(t){var e=this.lookup(t,[o]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e},l.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[n,o]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e},l.prototype.lookupService=function(t){var e=this.lookup(t,[i]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e},l._configure=function(t,e,s){n=t,i=e,o=s}},4154:(t,e,s)=>{"use strict";t.exports=i,i.className="ReflectionObject";var r,n=s(7572);function i(t,e){if(!n.isString(t))throw TypeError("name must be a string");if(e&&!n.isObject(e))throw TypeError("options must be an object");this.options=e,this.parsedOptions=null,this.name=t,this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(i.prototype,{root:{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t}},fullName:{get:function(){for(var t=[this.name],e=this.parent;e;)t.unshift(e.name),e=e.parent;return t.join(".")}}}),i.prototype.toJSON=function(){throw Error()},i.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof r&&e._handleAdd(this)},i.prototype.onRemove=function(t){var e=t.root;e instanceof r&&e._handleRemove(this),this.parent=null,this.resolved=!1},i.prototype.resolve=function(){return this.resolved||this.root instanceof r&&(this.resolved=!0),this},i.prototype.getOption=function(t){if(this.options)return this.options[t]},i.prototype.setOption=function(t,e,s){return s&&this.options&&void 0!==this.options[t]||((this.options||(this.options={}))[t]=e),this},i.prototype.setParsedOption=function(t,e,s){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(s){var i=r.find((function(e){return Object.prototype.hasOwnProperty.call(e,t)}));if(i){var o=i[t];n.setProperty(o,s,e)}else(i={})[t]=n.setProperty({},s,e),r.push(i)}else{var a={};a[t]=e,r.push(a)}return this},i.prototype.setOptions=function(t,e){if(t)for(var s=Object.keys(t),r=0;r<s.length;++r)this.setOption(s[r],t[s[r]],e);return this},i.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t},i._configure=function(t){r=t}},3044:(t,e,s)=>{"use strict";t.exports=o;var r=s(4154);((o.prototype=Object.create(r.prototype)).constructor=o).className="OneOf";var n=s(5891),i=s(7572);function o(t,e,s,n){if(Array.isArray(e)||(s=e,e=void 0),r.call(this,t,s),void 0!==e&&!Array.isArray(e))throw TypeError("fieldNames must be an Array");this.oneof=e||[],this.fieldsArray=[],this.comment=n}function a(t){if(t.parent)for(var e=0;e<t.fieldsArray.length;++e)t.fieldsArray[e].parent||t.parent.add(t.fieldsArray[e])}o.fromJSON=function(t,e){return new o(t,e.oneof,e.options,e.comment)},o.prototype.toJSON=function(t){var e=!!t&&Boolean(t.keepComments);return i.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])},o.prototype.add=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,a(this),this},o.prototype.remove=function(t){if(!(t instanceof n))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),(e=this.oneof.indexOf(t.name))>-1&&this.oneof.splice(e,1),t.partOf=null,this},o.prototype.onAdd=function(t){r.prototype.onAdd.call(this,t);for(var e=0;e<this.oneof.length;++e){var s=t.get(this.oneof[e]);s&&!s.partOf&&(s.partOf=this,this.fieldsArray.push(s))}a(this)},o.prototype.onRemove=function(t){for(var e,s=0;s<this.fieldsArray.length;++s)(e=this.fieldsArray[s]).parent&&e.parent.remove(e);r.prototype.onRemove.call(this,t)},o.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(e,s){i.decorateType(e.constructor).add(new o(s,t)),Object.defineProperty(e,s,{get:i.oneOfGetter(t),set:i.oneOfSetter(t)})}}},9867:(t,e,s)=>{"use strict";t.exports=c;var r,n=s(4155),i=n.LongBits,o=n.utf8;function a(t,e){return RangeError("index out of range: "+t.pos+" + "+(e||1)+" > "+t.len)}function c(t){this.buf=t,this.pos=0,this.len=t.length}var u,d="undefined"!=typeof Uint8Array?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new c(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new c(t);throw Error("illegal buffer")},l=function(){return n.Buffer?function(t){return(c.create=function(t){return n.Buffer.isBuffer(t)?new r(t):d(t)})(t)}:d};function h(){var t=new i(0,0),e=0;if(!(this.len-this.pos>4)){for(;e<3;++e){if(this.pos>=this.len)throw a(this);if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t}return t.lo=(t.lo|(127&this.buf[this.pos++])<<7*e)>>>0,t}for(;e<4;++e)if(t.lo=(t.lo|(127&this.buf[this.pos])<<7*e)>>>0,this.buf[this.pos++]<128)return t;if(t.lo=(t.lo|(127&this.buf[this.pos])<<28)>>>0,t.hi=(t.hi|(127&this.buf[this.pos])>>4)>>>0,this.buf[this.pos++]<128)return t;if(e=0,this.len-this.pos>4){for(;e<5;++e)if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}else for(;e<5;++e){if(this.pos>=this.len)throw a(this);if(t.hi=(t.hi|(127&this.buf[this.pos])<<7*e+3)>>>0,this.buf[this.pos++]<128)return t}throw Error("invalid varint encoding")}function f(t,e){return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0}function p(){if(this.pos+8>this.len)throw a(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}c.create=l(),c.prototype._slice=n.Array.prototype.subarray||n.Array.prototype.slice,c.prototype.uint32=(u=4294967295,function(){if(u=(127&this.buf[this.pos])>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<7)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<14)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(127&this.buf[this.pos])<<21)>>>0,this.buf[this.pos++]<128)return u;if(u=(u|(15&this.buf[this.pos])<<28)>>>0,this.buf[this.pos++]<128)return u;if((this.pos+=5)>this.len)throw this.pos=this.len,a(this,10);return u}),c.prototype.int32=function(){return 0|this.uint32()},c.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(1&t)|0},c.prototype.bool=function(){return 0!==this.uint32()},c.prototype.fixed32=function(){if(this.pos+4>this.len)throw a(this,4);return f(this.buf,this.pos+=4)},c.prototype.sfixed32=function(){if(this.pos+4>this.len)throw a(this,4);return 0|f(this.buf,this.pos+=4)},c.prototype.float=function(){if(this.pos+4>this.len)throw a(this,4);var t=n.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t},c.prototype.double=function(){if(this.pos+8>this.len)throw a(this,4);var t=n.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t},c.prototype.bytes=function(){var t=this.uint32(),e=this.pos,s=this.pos+t;if(s>this.len)throw a(this,t);return this.pos+=t,Array.isArray(this.buf)?this.buf.slice(e,s):e===s?new this.buf.constructor(0):this._slice.call(this.buf,e,s)},c.prototype.string=function(){var t=this.bytes();return o.read(t,0,t.length)},c.prototype.skip=function(t){if("number"==typeof t){if(this.pos+t>this.len)throw a(this,t);this.pos+=t}else do{if(this.pos>=this.len)throw a(this)}while(128&this.buf[this.pos++]);return this},c.prototype.skipType=function(t){switch(t){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;4!=(t=7&this.uint32());)this.skipType(t);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+t+" at offset "+this.pos)}return this},c._configure=function(t){r=t,c.create=l(),r._configure();var e=n.Long?"toLong":"toNumber";n.merge(c.prototype,{int64:function(){return h.call(this)[e](!1)},uint64:function(){return h.call(this)[e](!0)},sint64:function(){return h.call(this).zzDecode()[e](!1)},fixed64:function(){return p.call(this)[e](!0)},sfixed64:function(){return p.call(this)[e](!1)}})}},2676:(t,e,s)=>{"use strict";t.exports=i;var r=s(9867);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4155);function i(t){r.call(this,t)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))},i._configure()},2613:(t,e,s)=>{"use strict";t.exports=l;var r=s(512);((l.prototype=Object.create(r.prototype)).constructor=l).className="Root";var n,i,o,a=s(5891),c=s(4937),u=s(3044),d=s(7572);function l(t){r.call(this,"",t),this.deferred=[],this.files=[]}function h(){}l.fromJSON=function(t,e){return e||(e=new l),t.options&&e.setOptions(t.options),e.addJSON(t.nested)},l.prototype.resolvePath=d.path.resolve,l.prototype.fetch=d.fetch,l.prototype.load=function t(e,s,r){"function"==typeof s&&(r=s,s=void 0);var n=this;if(!r)return d.asPromise(t,n,e,s);var a=r===h;function c(t,e){if(r){var s=r;if(r=null,a)throw t;s(t,e)}}function u(t){var e=t.lastIndexOf("google/protobuf/");if(e>-1){var s=t.substring(e);if(s in o)return s}return null}function l(t,e){try{if(d.isString(e)&&"{"===e.charAt(0)&&(e=JSON.parse(e)),d.isString(e)){i.filename=t;var r,o=i(e,n,s),l=0;if(o.imports)for(;l<o.imports.length;++l)(r=u(o.imports[l])||n.resolvePath(t,o.imports[l]))&&f(r);if(o.weakImports)for(l=0;l<o.weakImports.length;++l)(r=u(o.weakImports[l])||n.resolvePath(t,o.weakImports[l]))&&f(r,!0)}else n.setOptions(e.options).addJSON(e.nested)}catch(t){c(t)}a||p||c(null,n)}function f(t,e){if(!(n.files.indexOf(t)>-1))if(n.files.push(t),t in o)a?l(t,o[t]):(++p,setTimeout((function(){--p,l(t,o[t])})));else if(a){var s;try{s=d.fs.readFileSync(t).toString("utf8")}catch(t){return void(e||c(t))}l(t,s)}else++p,n.fetch(t,(function(s,i){--p,r&&(s?e?p||c(null,n):c(s):l(t,i))}))}var p=0;d.isString(e)&&(e=[e]);for(var y,m=0;m<e.length;++m)(y=n.resolvePath("",e[m]))&&f(y);if(a)return n;p||c(null,n)},l.prototype.loadSync=function(t,e){if(!d.isNode)throw Error("not supported");return this.load(t,e,h)},l.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map((function(t){return"'extend "+t.extend+"' in "+t.parent.fullName})).join(", "));return r.prototype.resolveAll.call(this)};var f=/^[A-Z]/;function p(t,e){var s=e.parent.lookup(e.extend);if(s){var r=new a(e.fullName,e.id,e.type,e.rule,void 0,e.options);return r.declaringField=e,e.extensionField=r,s.add(r),!0}return!1}l.prototype._handleAdd=function(t){if(t instanceof a)void 0===t.extend||t.extensionField||p(0,t)||this.deferred.push(t);else if(t instanceof c)f.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof u)){if(t instanceof n)for(var e=0;e<this.deferred.length;)p(0,this.deferred[e])?this.deferred.splice(e,1):++e;for(var s=0;s<t.nestedArray.length;++s)this._handleAdd(t._nestedArray[s]);f.test(t.name)&&(t.parent[t.name]=t)}},l.prototype._handleRemove=function(t){if(t instanceof a){if(void 0!==t.extend)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1)}}else if(t instanceof c)f.test(t.name)&&delete t.parent[t.name];else if(t instanceof r){for(var s=0;s<t.nestedArray.length;++s)this._handleRemove(t._nestedArray[s]);f.test(t.name)&&delete t.parent[t.name]}},l._configure=function(t,e,s){n=t,i=e,o=s}},284:t=>{"use strict";t.exports={}},3290:(t,e,s)=>{"use strict";e.Service=s(979)},979:(t,e,s)=>{"use strict";t.exports=n;var r=s(4155);function n(t,e,s){if("function"!=typeof t)throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=t,this.requestDelimited=Boolean(e),this.responseDelimited=Boolean(s)}(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n,n.prototype.rpcCall=function t(e,s,n,i,o){if(!i)throw TypeError("request must be specified");var a=this;if(!o)return r.asPromise(t,a,e,s,n,i);if(a.rpcImpl)try{return a.rpcImpl(e,s[a.requestDelimited?"encodeDelimited":"encode"](i).finish(),(function(t,s){if(t)return a.emit("error",t,e),o(t);if(null!==s){if(!(s instanceof n))try{s=n[a.responseDelimited?"decodeDelimited":"decode"](s)}catch(t){return a.emit("error",t,e),o(t)}return a.emit("data",s,e),o(null,s)}a.end(!0)}))}catch(t){return a.emit("error",t,e),void setTimeout((function(){o(t)}),0)}else setTimeout((function(){o(Error("already ended"))}),0)},n.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}},877:(t,e,s)=>{"use strict";t.exports=a;var r=s(512);((a.prototype=Object.create(r.prototype)).constructor=a).className="Service";var n=s(4935),i=s(7572),o=s(3290);function a(t,e){r.call(this,t,e),this.methods={},this._methodsArray=null}function c(t){return t._methodsArray=null,t}a.fromJSON=function(t,e){var s=new a(t,e.options);if(e.methods)for(var r=Object.keys(e.methods),i=0;i<r.length;++i)s.add(n.fromJSON(r[i],e.methods[r[i]]));return e.nested&&s.addJSON(e.nested),s.comment=e.comment,s},a.prototype.toJSON=function(t){var e=r.prototype.toJSON.call(this,t),s=!!t&&Boolean(t.keepComments);return i.toObject(["options",e&&e.options||void 0,"methods",r.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",s?this.comment:void 0])},Object.defineProperty(a.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=i.toArray(this.methods))}}),a.prototype.get=function(t){return this.methods[t]||r.prototype.get.call(this,t)},a.prototype.resolveAll=function(){for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return r.prototype.resolve.call(this)},a.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof n?(this.methods[t.name]=t,t.parent=this,c(this)):r.prototype.add.call(this,t)},a.prototype.remove=function(t){if(t instanceof n){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,c(this)}return r.prototype.remove.call(this,t)},a.prototype.create=function(t,e,s){for(var r,n=new o.Service(t,e,s),a=0;a<this.methodsArray.length;++a){var c=i.lcFirst((r=this._methodsArray[a]).resolve().name).replace(/[^$\w_]/g,"");n[c]=i.codegen(["r","c"],i.isReserved(c)?c+"_":c)("return this.rpcCall(m,q,s,r,c)")({m:r,q:r.resolvedRequestType.ctor,s:r.resolvedResponseType.ctor})}return n}},4560:(t,e,s)=>{"use strict";t.exports=x;var r=s(512);((x.prototype=Object.create(r.prototype)).constructor=x).className="Type";var n=s(4937),i=s(3044),o=s(5891),a=s(8911),c=s(877),u=s(4777),d=s(9867),l=s(2944),h=s(7572),f=s(6382),p=s(4799),y=s(8600),m=s(6274),v=s(3375);function x(t,e){r.call(this,t,e),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}function _(t){return t._fieldsById=t._fieldsArray=t._oneofsArray=null,delete t.encode,delete t.decode,delete t.verify,t}Object.defineProperties(x.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var t=Object.keys(this.fields),e=0;e<t.length;++e){var s=this.fields[t[e]],r=s.id;if(this._fieldsById[r])throw Error("duplicate id "+r+" in "+this);this._fieldsById[r]=s}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=h.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=h.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=x.generateConstructor(this)())},set:function(t){var e=t.prototype;e instanceof u||((t.prototype=new u).constructor=t,h.merge(t.prototype,e)),t.$type=t.prototype.$type=this,h.merge(t,u,!0),this._ctor=t;for(var s=0;s<this.fieldsArray.length;++s)this._fieldsArray[s].resolve();var r={};for(s=0;s<this.oneofsArray.length;++s)r[this._oneofsArray[s].resolve().name]={get:h.oneOfGetter(this._oneofsArray[s].oneof),set:h.oneOfSetter(this._oneofsArray[s].oneof)};s&&Object.defineProperties(t.prototype,r)}}}),x.generateConstructor=function(t){for(var e,s=h.codegen(["p"],t.name),r=0;r<t.fieldsArray.length;++r)(e=t._fieldsArray[r]).map?s("this%s={}",h.safeProp(e.name)):e.repeated&&s("this%s=[]",h.safeProp(e.name));return s("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")},x.fromJSON=function(t,e){var s=new x(t,e.options);s.extensions=e.extensions,s.reserved=e.reserved;for(var u=Object.keys(e.fields),d=0;d<u.length;++d)s.add((void 0!==e.fields[u[d]].keyType?a.fromJSON:o.fromJSON)(u[d],e.fields[u[d]]));if(e.oneofs)for(u=Object.keys(e.oneofs),d=0;d<u.length;++d)s.add(i.fromJSON(u[d],e.oneofs[u[d]]));if(e.nested)for(u=Object.keys(e.nested),d=0;d<u.length;++d){var l=e.nested[u[d]];s.add((void 0!==l.id?o.fromJSON:void 0!==l.fields?x.fromJSON:void 0!==l.values?n.fromJSON:void 0!==l.methods?c.fromJSON:r.fromJSON)(u[d],l))}return e.extensions&&e.extensions.length&&(s.extensions=e.extensions),e.reserved&&e.reserved.length&&(s.reserved=e.reserved),e.group&&(s.group=!0),e.comment&&(s.comment=e.comment),s},x.prototype.toJSON=function(t){var e=r.prototype.toJSON.call(this,t),s=!!t&&Boolean(t.keepComments);return h.toObject(["options",e&&e.options||void 0,"oneofs",r.arrayToJSON(this.oneofsArray,t),"fields",r.arrayToJSON(this.fieldsArray.filter((function(t){return!t.declaringField})),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",s?this.comment:void 0])},x.prototype.resolveAll=function(){for(var t=this.fieldsArray,e=0;e<t.length;)t[e++].resolve();var s=this.oneofsArray;for(e=0;e<s.length;)s[e++].resolve();return r.prototype.resolveAll.call(this)},x.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null},x.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof o&&void 0===t.extend){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),_(this)}return t instanceof i?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),_(this)):r.prototype.add.call(this,t)},x.prototype.remove=function(t){if(t instanceof o&&void 0===t.extend){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),_(this)}if(t instanceof i){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),_(this)}return r.prototype.remove.call(this,t)},x.prototype.isReservedId=function(t){return r.isReservedId(this.reserved,t)},x.prototype.isReservedName=function(t){return r.isReservedName(this.reserved,t)},x.prototype.create=function(t){return new this.ctor(t)},x.prototype.setup=function(){for(var t=this.fullName,e=[],s=0;s<this.fieldsArray.length;++s)e.push(this._fieldsArray[s].resolve().resolvedType);this.encode=f(this)({Writer:l,types:e,util:h}),this.decode=p(this)({Reader:d,types:e,util:h}),this.verify=y(this)({types:e,util:h}),this.fromObject=m.fromObject(this)({types:e,util:h}),this.toObject=m.toObject(this)({types:e,util:h});var r=v[t];if(r){var n=Object.create(this);n.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(n),n.toObject=this.toObject,this.toObject=r.toObject.bind(n)}return this},x.prototype.encode=function(t,e){return this.setup().encode(t,e)},x.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()},x.prototype.decode=function(t,e){return this.setup().decode(t,e)},x.prototype.decodeDelimited=function(t){return t instanceof d||(t=d.create(t)),this.decode(t,t.uint32())},x.prototype.verify=function(t){return this.setup().verify(t)},x.prototype.fromObject=function(t){return this.setup().fromObject(t)},x.prototype.toObject=function(t,e){return this.setup().toObject(t,e)},x.d=function(t){return function(e){h.decorateType(e,t)}}},8997:(t,e,s)=>{"use strict";var r=e,n=s(7572),i=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function o(t,e){var s=0,r={};for(e|=0;s<t.length;)r[i[s+e]]=t[s++];return r}r.basic=o([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]),r.defaults=o([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",n.emptyArray,null]),r.long=o([0,0,0,1,1],7),r.mapKey=o([0,0,0,5,5,0,0,0,1,1,0,2],2),r.packed=o([1,5,0,0,0,5,5,0,0,0,1,1,0])},7572:(t,e,s)=>{"use strict";var r,n,i=t.exports=s(4155),o=s(284);i.codegen=s(6348),i.fetch=s(7803),i.path=s(1272),i.fs=i.inquire("fs"),i.toArray=function(t){if(t){for(var e=Object.keys(t),s=new Array(e.length),r=0;r<e.length;)s[r]=t[e[r++]];return s}return[]},i.toObject=function(t){for(var e={},s=0;s<t.length;){var r=t[s++],n=t[s++];void 0!==n&&(e[r]=n)}return e};var a=/\\/g,c=/"/g;i.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)},i.safeProp=function(t){return!/^[$\w_]+$/.test(t)||i.isReserved(t)?'["'+t.replace(a,"\\\\").replace(c,'\\"')+'"]':"."+t},i.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var u=/_([a-z])/g;i.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(u,(function(t,e){return e.toUpperCase()}))},i.compareFieldsById=function(t,e){return t.id-e.id},i.decorateType=function(t,e){if(t.$type)return e&&t.$type.name!==e&&(i.decorateRoot.remove(t.$type),t.$type.name=e,i.decorateRoot.add(t.$type)),t.$type;r||(r=s(4560));var n=new r(e||t.name);return i.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var d=0;i.decorateEnum=function(t){if(t.$type)return t.$type;n||(n=s(4937));var e=new n("Enum"+d++,t);return i.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e},i.setProperty=function(t,e,s){if("object"!=typeof t)throw TypeError("dst must be an object");if(!e)throw TypeError("path must be specified");return function t(e,s,r){var n=s.shift();if(s.length>0)e[n]=t(e[n]||{},s,r);else{var i=e[n];i&&(r=[].concat(i).concat(r)),e[n]=r}return e}(t,e=e.split("."),s)},Object.defineProperty(i,"decorateRoot",{get:function(){return o.decorated||(o.decorated=new(s(2613)))}})},8950:(t,e,s)=>{"use strict";t.exports=n;var r=s(4155);function n(t,e){this.lo=t>>>0,this.hi=e>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var o=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(t){if(0===t)return i;var e=t<0;e&&(t=-t);var s=t>>>0,r=(t-s)/4294967296>>>0;return e&&(r=~r>>>0,s=~s>>>0,++s>4294967295&&(s=0,++r>4294967295&&(r=0))),new n(s,r)},n.from=function(t){if("number"==typeof t)return n.fromNumber(t);if(r.isString(t)){if(!r.Long)return n.fromNumber(parseInt(t,10));t=r.Long.fromString(t)}return t.low||t.high?new n(t.low>>>0,t.high>>>0):i},n.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=1+~this.lo>>>0,s=~this.hi>>>0;return e||(s=s+1>>>0),-(e+4294967296*s)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(t){return r.Long?new r.Long(0|this.lo,0|this.hi,Boolean(t)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(t)}};var a=String.prototype.charCodeAt;n.fromHash=function(t){return t===o?i:new n((a.call(t,0)|a.call(t,1)<<8|a.call(t,2)<<16|a.call(t,3)<<24)>>>0,(a.call(t,4)|a.call(t,5)<<8|a.call(t,6)<<16|a.call(t,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(255&this.lo,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,255&this.hi,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this},n.prototype.zzDecode=function(){var t=-(1&this.lo);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this},n.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,s=this.hi>>>24;return 0===s?0===e?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:s<128?9:10}},4155:function(t,e,s){"use strict";var r=e;function n(t,e,s){for(var r=Object.keys(e),n=0;n<r.length;++n)void 0!==t[r[n]]&&s||(t[r[n]]=e[r[n]]);return t}function i(t){function e(t,s){if(!(this instanceof e))return new e(t,s);Object.defineProperty(this,"message",{get:function(){return t}}),Error.captureStackTrace?Error.captureStackTrace(this,e):Object.defineProperty(this,"stack",{value:(new Error).stack||""}),s&&n(this,s)}return(e.prototype=Object.create(Error.prototype)).constructor=e,Object.defineProperty(e.prototype,"name",{get:function(){return t}}),e.prototype.toString=function(){return this.name+": "+this.message},e}r.asPromise=s(537),r.base64=s(9745),r.EventEmitter=s(4459),r.float=s(897),r.inquire=s(3229),r.utf8=s(113),r.pool=s(7986),r.LongBits=s(8950),r.isNode=Boolean(void 0!==s.g&&s.g&&s.g.process&&s.g.process.versions&&s.g.process.versions.node),r.global=r.isNode&&s.g||"undefined"!=typeof window&&window||"undefined"!=typeof self&&self||this,r.emptyArray=Object.freeze?Object.freeze([]):[],r.emptyObject=Object.freeze?Object.freeze({}):{},r.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},r.isString=function(t){return"string"==typeof t||t instanceof String},r.isObject=function(t){return t&&"object"==typeof t},r.isset=r.isSet=function(t,e){var s=t[e];return!(null==s||!t.hasOwnProperty(e))&&("object"!=typeof s||(Array.isArray(s)?s.length:Object.keys(s).length)>0)},r.Buffer=function(){try{var t=r.inquire("buffer").Buffer;return t.prototype.utf8Write?t:null}catch(t){return null}}(),r._Buffer_from=null,r._Buffer_allocUnsafe=null,r.newBuffer=function(t){return"number"==typeof t?r.Buffer?r._Buffer_allocUnsafe(t):new r.Array(t):r.Buffer?r._Buffer_from(t):"undefined"==typeof Uint8Array?t:new Uint8Array(t)},r.Array="undefined"!=typeof Uint8Array?Uint8Array:Array,r.Long=r.global.dcodeIO&&r.global.dcodeIO.Long||r.global.Long||r.inquire("long"),r.key2Re=/^true|false|0|1$/,r.key32Re=/^-?(?:0|[1-9][0-9]*)$/,r.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,r.longToHash=function(t){return t?r.LongBits.from(t).toHash():r.LongBits.zeroHash},r.longFromHash=function(t,e){var s=r.LongBits.fromHash(t);return r.Long?r.Long.fromBits(s.lo,s.hi,e):s.toNumber(Boolean(e))},r.merge=n,r.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)},r.newError=i,r.ProtocolError=i("ProtocolError"),r.oneOfGetter=function(t){for(var e={},s=0;s<t.length;++s)e[t[s]]=1;return function(){for(var t=Object.keys(this),s=t.length-1;s>-1;--s)if(1===e[t[s]]&&void 0!==this[t[s]]&&null!==this[t[s]])return t[s]}},r.oneOfSetter=function(t){return function(e){for(var s=0;s<t.length;++s)t[s]!==e&&delete this[t[s]]}},r.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},r._configure=function(){var t=r.Buffer;t?(r._Buffer_from=t.from!==Uint8Array.from&&t.from||function(e,s){return new t(e,s)},r._Buffer_allocUnsafe=t.allocUnsafe||function(e){return new t(e)}):r._Buffer_from=r._Buffer_allocUnsafe=null}},8600:(t,e,s)=>{"use strict";t.exports=function(t){var e=n.codegen(["m"],t.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),s=t.oneofsArray,r={};s.length&&e("var p={}");for(var c=0;c<t.fieldsArray.length;++c){var u=t._fieldsArray[c].resolve(),d="m"+n.safeProp(u.name);if(u.optional&&e("if(%s!=null&&m.hasOwnProperty(%j)){",d,u.name),u.map)e("if(!util.isObject(%s))",d)("return%j",i(u,"object"))("var k=Object.keys(%s)",d)("for(var i=0;i<k.length;++i){"),a(e,u,"k[i]"),o(e,u,c,d+"[k[i]]")("}");else if(u.repeated)e("if(!Array.isArray(%s))",d)("return%j",i(u,"array"))("for(var i=0;i<%s.length;++i){",d),o(e,u,c,d+"[i]")("}");else{if(u.partOf){var l=n.safeProp(u.partOf.name);1===r[u.partOf.name]&&e("if(p%s===1)",l)("return%j",u.partOf.name+": multiple values"),r[u.partOf.name]=1,e("p%s=1",l)}o(e,u,c,d)}u.optional&&e("}")}return e("return null")};var r=s(4937),n=s(7572);function i(t,e){return t.name+": "+e+(t.repeated&&"array"!==e?"[]":t.map&&"object"!==e?"{k:"+t.keyType+"}":"")+" expected"}function o(t,e,s,n){if(e.resolvedType)if(e.resolvedType instanceof r){t("switch(%s){",n)("default:")("return%j",i(e,"enum value"));for(var o=Object.keys(e.resolvedType.values),a=0;a<o.length;++a)t("case %i:",e.resolvedType.values[o[a]]);t("break")("}")}else t("{")("var e=types[%i].verify(%s);",s,n)("if(e)")("return%j+e",e.name+".")("}");else switch(e.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.isInteger(%s))",n)("return%j",i(e,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",i(e,"integer|Long"));break;case"float":case"double":t('if(typeof %s!=="number")',n)("return%j",i(e,"number"));break;case"bool":t('if(typeof %s!=="boolean")',n)("return%j",i(e,"boolean"));break;case"string":t("if(!util.isString(%s))",n)("return%j",i(e,"string"));break;case"bytes":t('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",i(e,"buffer"))}return t}function a(t,e,s){switch(e.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":t("if(!util.key32Re.test(%s))",s)("return%j",i(e,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":t("if(!util.key64Re.test(%s))",s)("return%j",i(e,"integer|Long key"));break;case"bool":t("if(!util.key2Re.test(%s))",s)("return%j",i(e,"boolean key"))}return t}},3375:(t,e,s)=>{"use strict";var r=e,n=s(4777);r[".google.protobuf.Any"]={fromObject:function(t){if(t&&t["@type"]){var e=t["@type"].substring(t["@type"].lastIndexOf("/")+1),s=this.lookup(e);if(s){var r="."===t["@type"].charAt(0)?t["@type"].substr(1):t["@type"];return-1===r.indexOf("/")&&(r="/"+r),this.create({type_url:r,value:s.encode(s.fromObject(t)).finish()})}}return this.fromObject(t)},toObject:function(t,e){var s="",r="";if(e&&e.json&&t.type_url&&t.value){r=t.type_url.substring(t.type_url.lastIndexOf("/")+1),s=t.type_url.substring(0,t.type_url.lastIndexOf("/")+1);var i=this.lookup(r);i&&(t=i.decode(t.value))}if(!(t instanceof this.ctor)&&t instanceof n){var o=t.$type.toObject(t,e);return""===s&&(s="type.googleapis.com/"),r=s+("."===t.$type.fullName[0]?t.$type.fullName.substr(1):t.$type.fullName),o["@type"]=r,o}return this.toObject(t,e)}}},2944:(t,e,s)=>{"use strict";t.exports=l;var r,n=s(4155),i=n.LongBits,o=n.base64,a=n.utf8;function c(t,e,s){this.fn=t,this.len=e,this.next=void 0,this.val=s}function u(){}function d(t){this.head=t.head,this.tail=t.tail,this.len=t.len,this.next=t.states}function l(){this.len=0,this.head=new c(u,0,0),this.tail=this.head,this.states=null}var h=function(){return n.Buffer?function(){return(l.create=function(){return new r})()}:function(){return new l}};function f(t,e,s){e[s]=255&t}function p(t,e){this.len=t,this.next=void 0,this.val=e}function y(t,e,s){for(;t.hi;)e[s++]=127&t.lo|128,t.lo=(t.lo>>>7|t.hi<<25)>>>0,t.hi>>>=7;for(;t.lo>127;)e[s++]=127&t.lo|128,t.lo=t.lo>>>7;e[s++]=t.lo}function m(t,e,s){e[s]=255&t,e[s+1]=t>>>8&255,e[s+2]=t>>>16&255,e[s+3]=t>>>24}l.create=h(),l.alloc=function(t){return new n.Array(t)},n.Array!==Array&&(l.alloc=n.pool(l.alloc,n.Array.prototype.subarray)),l.prototype._push=function(t,e,s){return this.tail=this.tail.next=new c(t,e,s),this.len+=e,this},p.prototype=Object.create(c.prototype),p.prototype.fn=function(t,e,s){for(;t>127;)e[s++]=127&t|128,t>>>=7;e[s]=t},l.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new p((t>>>=0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this},l.prototype.int32=function(t){return t<0?this._push(y,10,i.fromNumber(t)):this.uint32(t)},l.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)},l.prototype.uint64=function(t){var e=i.from(t);return this._push(y,e.length(),e)},l.prototype.int64=l.prototype.uint64,l.prototype.sint64=function(t){var e=i.from(t).zzEncode();return this._push(y,e.length(),e)},l.prototype.bool=function(t){return this._push(f,1,t?1:0)},l.prototype.fixed32=function(t){return this._push(m,4,t>>>0)},l.prototype.sfixed32=l.prototype.fixed32,l.prototype.fixed64=function(t){var e=i.from(t);return this._push(m,4,e.lo)._push(m,4,e.hi)},l.prototype.sfixed64=l.prototype.fixed64,l.prototype.float=function(t){return this._push(n.float.writeFloatLE,4,t)},l.prototype.double=function(t){return this._push(n.float.writeDoubleLE,8,t)};var v=n.Array.prototype.set?function(t,e,s){e.set(t,s)}:function(t,e,s){for(var r=0;r<t.length;++r)e[s+r]=t[r]};l.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(f,1,0);if(n.isString(t)){var s=l.alloc(e=o.length(t));o.decode(t,s,0),t=s}return this.uint32(e)._push(v,e,t)},l.prototype.string=function(t){var e=a.length(t);return e?this.uint32(e)._push(a.write,e,t):this._push(f,1,0)},l.prototype.fork=function(){return this.states=new d(this),this.head=this.tail=new c(u,0,0),this.len=0,this},l.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new c(u,0,0),this.len=0),this},l.prototype.ldelim=function(){var t=this.head,e=this.tail,s=this.len;return this.reset().uint32(s),s&&(this.tail.next=t.next,this.tail=e,this.len+=s),this},l.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),s=0;t;)t.fn(t.val,e,s),s+=t.len,t=t.next;return e},l._configure=function(t){r=t,l.create=h(),r._configure()}},2178:(t,e,s)=>{"use strict";t.exports=i;var r=s(2944);(i.prototype=Object.create(r.prototype)).constructor=i;var n=s(4155);function i(){r.call(this)}function o(t,e,s){t.length<40?n.utf8.write(t,e,s):e.utf8Write?e.utf8Write(t,s):e.write(t,s)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&"set"===n.Buffer.prototype.set.name?function(t,e,s){e.set(t,s)}:function(t,e,s){if(t.copy)t.copy(e,s,0,t.length);else for(var r=0;r<t.length;)e[s++]=t[r++]}},i.prototype.bytes=function(t){n.isString(t)&&(t=n._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(i.writeBytesBuffer,e,t),this},i.prototype.string=function(t){var e=n.Buffer.byteLength(t);return this.uint32(e),e&&this._push(o,e,t),this},i._configure()},1829:(t,e)=>{"use strict";var s=Object.prototype.hasOwnProperty;function r(t){try{return decodeURIComponent(t.replace(/\+/g," "))}catch(t){return null}}function n(t){try{return encodeURIComponent(t)}catch(t){return null}}e.stringify=function(t,e){e=e||"";var r,i,o=[];for(i in"string"!=typeof e&&(e="?"),t)if(s.call(t,i)){if((r=t[i])||null!=r&&!isNaN(r)||(r=""),i=n(i),r=n(r),null===i||null===r)continue;o.push(i+"="+r)}return o.length?e+o.join("&"):""},e.parse=function(t){for(var e,s=/([^=?#&]+)=?([^&]*)/g,n={};e=s.exec(t);){var i=r(e[1]),o=r(e[2]);null===i||null===o||i in n||(n[i]=o)}return n}},3722:t=>{"use strict";t.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},7594:(t,e,s)=>{"use strict";var r,n=function(){return void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r},i=function(){var t={};return function(e){if(void 0===t[e]){var s=document.querySelector(e);if(window.HTMLIFrameElement&&s instanceof window.HTMLIFrameElement)try{s=s.contentDocument.head}catch(t){s=null}t[e]=s}return t[e]}}(),o=[];function a(t){for(var e=-1,s=0;s<o.length;s++)if(o[s].identifier===t){e=s;break}return e}function c(t,e){for(var s={},r=[],n=0;n<t.length;n++){var i=t[n],c=e.base?i[0]+e.base:i[0],u=s[c]||0,d="".concat(c," ").concat(u);s[c]=u+1;var l=a(d),h={css:i[1],media:i[2],sourceMap:i[3]};-1!==l?(o[l].references++,o[l].updater(h)):o.push({identifier:d,updater:m(h,e),references:1}),r.push(d)}return r}function u(t){var e=document.createElement("style"),r=t.attributes||{};if(void 0===r.nonce){var n=s.nc;n&&(r.nonce=n)}if(Object.keys(r).forEach((function(t){e.setAttribute(t,r[t])})),"function"==typeof t.insert)t.insert(e);else{var o=i(t.insert||"head");if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(e)}return e}var d,l=(d=[],function(t,e){return d[t]=e,d.filter(Boolean).join("\n")});function h(t,e,s,r){var n=s?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(t.styleSheet)t.styleSheet.cssText=l(e,n);else{var i=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(i,o[e]):t.appendChild(i)}}function f(t,e,s){var r=s.css,n=s.media,i=s.sourceMap;if(n?t.setAttribute("media",n):t.removeAttribute("media"),i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}var p=null,y=0;function m(t,e){var s,r,n;if(e.singleton){var i=y++;s=p||(p=u(e)),r=h.bind(null,s,i,!1),n=h.bind(null,s,i,!0)}else s=u(e),r=f.bind(null,s,e),n=function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(s)};return r(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;r(t=e)}else n()}}t.exports=function(t,e){(e=e||{}).singleton||"boolean"==typeof e.singleton||(e.singleton=n());var s=c(t=t||[],e);return function(t){if(t=t||[],"[object Array]"===Object.prototype.toString.call(t)){for(var r=0;r<s.length;r++){var n=a(s[r]);o[n].references--}for(var i=c(t,e),u=0;u<s.length;u++){var d=a(s[u]);0===o[d].references&&(o[d].updater(),o.splice(d,1))}s=i}}}},9655:(t,e,s)=>{"use strict";var r=s(3722),n=s(1829),i=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,o=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,c=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,d=/^[a-zA-Z]:/;function l(t){return(t||"").toString().replace(i,"")}var h=[["#","hash"],["?","query"],function(t,e){return y(e.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function p(t){var e,r=("undefined"!=typeof window?window:void 0!==s.g?s.g:"undefined"!=typeof self?self:{}).location||{},n={},i=typeof(t=t||r);if("blob:"===t.protocol)n=new v(unescape(t.pathname),{});else if("string"===i)for(e in n=new v(t,{}),f)delete n[e];else if("object"===i){for(e in t)e in f||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=a.test(t.href))}return n}function y(t){return"file:"===t||"ftp:"===t||"http:"===t||"https:"===t||"ws:"===t||"wss:"===t}function m(t,e){t=(t=l(t)).replace(o,""),e=e||{};var s,r=u.exec(t),n=r[1]?r[1].toLowerCase():"",i=!!r[2],a=!!r[3],c=0;return i?a?(s=r[2]+r[3]+r[4],c=r[2].length+r[3].length):(s=r[2]+r[4],c=r[2].length):a?(s=r[3]+r[4],c=r[3].length):s=r[4],"file:"===n?c>=2&&(s=s.slice(2)):y(n)?s=r[4]:n?i&&(s=s.slice(2)):c>=2&&y(e.protocol)&&(s=r[4]),{protocol:n,slashes:i||y(n),slashesCount:c,rest:s}}function v(t,e,s){if(t=(t=l(t)).replace(o,""),!(this instanceof v))return new v(t,e,s);var i,a,c,u,f,x,_=h.slice(),g=typeof e,b=this,w=0;for("object"!==g&&"string"!==g&&(s=e,e=null),s&&"function"!=typeof s&&(s=n.parse),i=!(a=m(t||"",e=p(e))).protocol&&!a.slashes,b.slashes=a.slashes||i&&e.slashes,b.protocol=a.protocol||e.protocol||"",t=a.rest,("file:"===a.protocol&&(2!==a.slashesCount||d.test(t))||!a.slashes&&(a.protocol||a.slashesCount<2||!y(b.protocol)))&&(_[3]=[/(.*)/,"pathname"]);w<_.length;w++)"function"!=typeof(u=_[w])?(c=u[0],x=u[1],c!=c?b[x]=t:"string"==typeof c?~(f="@"===c?t.lastIndexOf(c):t.indexOf(c))&&("number"==typeof u[2]?(b[x]=t.slice(0,f),t=t.slice(f+u[2])):(b[x]=t.slice(f),t=t.slice(0,f))):(f=c.exec(t))&&(b[x]=f[1],t=t.slice(0,f.index)),b[x]=b[x]||i&&u[3]&&e[x]||"",u[4]&&(b[x]=b[x].toLowerCase())):t=u(t,b);s&&(b.query=s(b.query)),i&&e.slashes&&"/"!==b.pathname.charAt(0)&&(""!==b.pathname||""!==e.pathname)&&(b.pathname=function(t,e){if(""===t)return e;for(var s=(e||"/").split("/").slice(0,-1).concat(t.split("/")),r=s.length,n=s[r-1],i=!1,o=0;r--;)"."===s[r]?s.splice(r,1):".."===s[r]?(s.splice(r,1),o++):o&&(0===r&&(i=!0),s.splice(r,1),o--);return i&&s.unshift(""),"."!==n&&".."!==n||s.push(""),s.join("/")}(b.pathname,e.pathname)),"/"!==b.pathname.charAt(0)&&y(b.protocol)&&(b.pathname="/"+b.pathname),r(b.port,b.protocol)||(b.host=b.hostname,b.port=""),b.username=b.password="",b.auth&&(~(f=b.auth.indexOf(":"))?(b.username=b.auth.slice(0,f),b.username=encodeURIComponent(decodeURIComponent(b.username)),b.password=b.auth.slice(f+1),b.password=encodeURIComponent(decodeURIComponent(b.password))):b.username=encodeURIComponent(decodeURIComponent(b.auth)),b.auth=b.password?b.username+":"+b.password:b.username),b.origin="file:"!==b.protocol&&y(b.protocol)&&b.host?b.protocol+"//"+b.host:"null",b.href=b.toString()}v.prototype={set:function(t,e,s){var i=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(s||n.parse)(e)),i[t]=e;break;case"port":i[t]=e,r(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[t]="");break;case"hostname":i[t]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[t]=e,c.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!s;break;case"pathname":case"hash":if(e){var o="pathname"===t?"/":"#";i[t]=e.charAt(0)!==o?o+e:e}else i[t]=e;break;case"username":case"password":i[t]=encodeURIComponent(e);break;case"auth":var a=e.indexOf(":");~a?(i.username=e.slice(0,a),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(a+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var u=0;u<h.length;u++){var d=h[u];d[4]&&(i[d[1]]=i[d[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin="file:"!==i.protocol&&y(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i},toString:function(t){t&&"function"==typeof t||(t=n.stringify);var e,s=this,r=s.host,i=s.protocol;i&&":"!==i.charAt(i.length-1)&&(i+=":");var o=i+(s.protocol&&s.slashes||y(s.protocol)?"//":"");return s.username?(o+=s.username,s.password&&(o+=":"+s.password),o+="@"):s.password?(o+=":"+s.password,o+="@"):"file:"!==s.protocol&&y(s.protocol)&&!r&&"/"!==s.pathname&&(o+="@"),(":"===r[r.length-1]||c.test(s.hostname)&&!s.port)&&(r+=":"),o+=r+s.pathname,(e="object"==typeof s.query?t(s.query):s.query)&&(o+="?"!==e.charAt(0)?"?"+e:e),s.hash&&(o+=s.hash),o}},v.extractProtocol=m,v.location=p,v.trimLeft=l,v.qs=n,t.exports=v},5003:(t,e,s)=>{"use strict";var r;s.r(e),s.d(e,{NIL:()=>N,parse:()=>m,stringify:()=>d,v1:()=>y,v3:()=>k,v4:()=>T,v5:()=>R,validate:()=>a,version:()=>j});var n=new Uint8Array(16);function i(){if(!r&&!(r="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return r(n)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;const a=function(t){return"string"==typeof t&&o.test(t)};for(var c=[],u=0;u<256;++u)c.push((u+256).toString(16).substr(1));const d=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=(c[t[e+0]]+c[t[e+1]]+c[t[e+2]]+c[t[e+3]]+"-"+c[t[e+4]]+c[t[e+5]]+"-"+c[t[e+6]]+c[t[e+7]]+"-"+c[t[e+8]]+c[t[e+9]]+"-"+c[t[e+10]]+c[t[e+11]]+c[t[e+12]]+c[t[e+13]]+c[t[e+14]]+c[t[e+15]]).toLowerCase();if(!a(s))throw TypeError("Stringified UUID is invalid");return s};var l,h,f=0,p=0;const y=function(t,e,s){var r=e&&s||0,n=e||new Array(16),o=(t=t||{}).node||l,a=void 0!==t.clockseq?t.clockseq:h;if(null==o||null==a){var c=t.random||(t.rng||i)();null==o&&(o=l=[1|c[0],c[1],c[2],c[3],c[4],c[5]]),null==a&&(a=h=16383&(c[6]<<8|c[7]))}var u=void 0!==t.msecs?t.msecs:Date.now(),y=void 0!==t.nsecs?t.nsecs:p+1,m=u-f+(y-p)/1e4;if(m<0&&void 0===t.clockseq&&(a=a+1&16383),(m<0||u>f)&&void 0===t.nsecs&&(y=0),y>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");f=u,p=y,h=a;var v=(1e4*(268435455&(u+=122192928e5))+y)%4294967296;n[r++]=v>>>24&255,n[r++]=v>>>16&255,n[r++]=v>>>8&255,n[r++]=255&v;var x=u/4294967296*1e4&268435455;n[r++]=x>>>8&255,n[r++]=255&x,n[r++]=x>>>24&15|16,n[r++]=x>>>16&255,n[r++]=a>>>8|128,n[r++]=255&a;for(var _=0;_<6;++_)n[r+_]=o[_];return e||d(n)};const m=function(t){if(!a(t))throw TypeError("Invalid UUID");var e,s=new Uint8Array(16);return s[0]=(e=parseInt(t.slice(0,8),16))>>>24,s[1]=e>>>16&255,s[2]=e>>>8&255,s[3]=255&e,s[4]=(e=parseInt(t.slice(9,13),16))>>>8,s[5]=255&e,s[6]=(e=parseInt(t.slice(14,18),16))>>>8,s[7]=255&e,s[8]=(e=parseInt(t.slice(19,23),16))>>>8,s[9]=255&e,s[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,s[11]=e/4294967296&255,s[12]=e>>>24&255,s[13]=e>>>16&255,s[14]=e>>>8&255,s[15]=255&e,s};function v(t,e,s){function r(t,r,n,i){if("string"==typeof t&&(t=function(t){t=unescape(encodeURIComponent(t));for(var e=[],s=0;s<t.length;++s)e.push(t.charCodeAt(s));return e}(t)),"string"==typeof r&&(r=m(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+t.length);if(o.set(r),o.set(t,r.length),(o=s(o))[6]=15&o[6]|e,o[8]=63&o[8]|128,n){i=i||0;for(var a=0;a<16;++a)n[i+a]=o[a];return n}return d(o)}try{r.name=t}catch(t){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}function x(t){return 14+(t+64>>>9<<4)+1}function _(t,e){var s=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(s>>16)<<16|65535&s}function g(t,e,s,r,n,i){return _((o=_(_(e,t),_(r,i)))<<(a=n)|o>>>32-a,s);var o,a}function b(t,e,s,r,n,i,o){return g(e&s|~e&r,t,e,n,i,o)}function w(t,e,s,r,n,i,o){return g(e&r|s&~r,t,e,n,i,o)}function O(t,e,s,r,n,i,o){return g(e^s^r,t,e,n,i,o)}function S(t,e,s,r,n,i,o){return g(s^(e|~r),t,e,n,i,o)}const E=function(t){if("string"==typeof t){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var s=0;s<e.length;++s)t[s]=e.charCodeAt(s)}return function(t){for(var e=[],s=32*t.length,r="0123456789abcdef",n=0;n<s;n+=8){var i=t[n>>5]>>>n%32&255,o=parseInt(r.charAt(i>>>4&15)+r.charAt(15&i),16);e.push(o)}return e}(function(t,e){t[e>>5]|=128<<e%32,t[x(e)-1]=e;for(var s=1732584193,r=-271733879,n=-1732584194,i=271733878,o=0;o<t.length;o+=16){var a=s,c=r,u=n,d=i;s=b(s,r,n,i,t[o],7,-680876936),i=b(i,s,r,n,t[o+1],12,-389564586),n=b(n,i,s,r,t[o+2],17,606105819),r=b(r,n,i,s,t[o+3],22,-1044525330),s=b(s,r,n,i,t[o+4],7,-176418897),i=b(i,s,r,n,t[o+5],12,1200080426),n=b(n,i,s,r,t[o+6],17,-1473231341),r=b(r,n,i,s,t[o+7],22,-45705983),s=b(s,r,n,i,t[o+8],7,1770035416),i=b(i,s,r,n,t[o+9],12,-1958414417),n=b(n,i,s,r,t[o+10],17,-42063),r=b(r,n,i,s,t[o+11],22,-1990404162),s=b(s,r,n,i,t[o+12],7,1804603682),i=b(i,s,r,n,t[o+13],12,-40341101),n=b(n,i,s,r,t[o+14],17,-1502002290),s=w(s,r=b(r,n,i,s,t[o+15],22,1236535329),n,i,t[o+1],5,-165796510),i=w(i,s,r,n,t[o+6],9,-1069501632),n=w(n,i,s,r,t[o+11],14,643717713),r=w(r,n,i,s,t[o],20,-373897302),s=w(s,r,n,i,t[o+5],5,-701558691),i=w(i,s,r,n,t[o+10],9,38016083),n=w(n,i,s,r,t[o+15],14,-660478335),r=w(r,n,i,s,t[o+4],20,-405537848),s=w(s,r,n,i,t[o+9],5,568446438),i=w(i,s,r,n,t[o+14],9,-1019803690),n=w(n,i,s,r,t[o+3],14,-187363961),r=w(r,n,i,s,t[o+8],20,1163531501),s=w(s,r,n,i,t[o+13],5,-1444681467),i=w(i,s,r,n,t[o+2],9,-51403784),n=w(n,i,s,r,t[o+7],14,1735328473),s=O(s,r=w(r,n,i,s,t[o+12],20,-1926607734),n,i,t[o+5],4,-378558),i=O(i,s,r,n,t[o+8],11,-2022574463),n=O(n,i,s,r,t[o+11],16,1839030562),r=O(r,n,i,s,t[o+14],23,-35309556),s=O(s,r,n,i,t[o+1],4,-1530992060),i=O(i,s,r,n,t[o+4],11,1272893353),n=O(n,i,s,r,t[o+7],16,-155497632),r=O(r,n,i,s,t[o+10],23,-1094730640),s=O(s,r,n,i,t[o+13],4,681279174),i=O(i,s,r,n,t[o],11,-358537222),n=O(n,i,s,r,t[o+3],16,-722521979),r=O(r,n,i,s,t[o+6],23,76029189),s=O(s,r,n,i,t[o+9],4,-640364487),i=O(i,s,r,n,t[o+12],11,-421815835),n=O(n,i,s,r,t[o+15],16,530742520),s=S(s,r=O(r,n,i,s,t[o+2],23,-995338651),n,i,t[o],6,-198630844),i=S(i,s,r,n,t[o+7],10,1126891415),n=S(n,i,s,r,t[o+14],15,-1416354905),r=S(r,n,i,s,t[o+5],21,-57434055),s=S(s,r,n,i,t[o+12],6,1700485571),i=S(i,s,r,n,t[o+3],10,-1894986606),n=S(n,i,s,r,t[o+10],15,-1051523),r=S(r,n,i,s,t[o+1],21,-2054922799),s=S(s,r,n,i,t[o+8],6,1873313359),i=S(i,s,r,n,t[o+15],10,-30611744),n=S(n,i,s,r,t[o+6],15,-1560198380),r=S(r,n,i,s,t[o+13],21,1309151649),s=S(s,r,n,i,t[o+4],6,-145523070),i=S(i,s,r,n,t[o+11],10,-1120210379),n=S(n,i,s,r,t[o+2],15,718787259),r=S(r,n,i,s,t[o+9],21,-343485551),s=_(s,a),r=_(r,c),n=_(n,u),i=_(i,d)}return[s,r,n,i]}(function(t){if(0===t.length)return[];for(var e=8*t.length,s=new Uint32Array(x(e)),r=0;r<e;r+=8)s[r>>5]|=(255&t[r/8])<<r%32;return s}(t),8*t.length))};const k=v("v3",48,E);const T=function(t,e,s){var r=(t=t||{}).random||(t.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,e){s=s||0;for(var n=0;n<16;++n)e[s+n]=r[n];return e}return d(r)};function C(t,e,s,r){switch(t){case 0:return e&s^~e&r;case 1:case 3:return e^s^r;case 2:return e&s^e&r^s&r}}function I(t,e){return t<<e|t>>>32-e}const A=function(t){var e=[1518500249,1859775393,2400959708,3395469782],s=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof t){var r=unescape(encodeURIComponent(t));t=[];for(var n=0;n<r.length;++n)t.push(r.charCodeAt(n))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var i=t.length/4+2,o=Math.ceil(i/16),a=new Array(o),c=0;c<o;++c){for(var u=new Uint32Array(16),d=0;d<16;++d)u[d]=t[64*c+4*d]<<24|t[64*c+4*d+1]<<16|t[64*c+4*d+2]<<8|t[64*c+4*d+3];a[c]=u}a[o-1][14]=8*(t.length-1)/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=8*(t.length-1)&4294967295;for(var l=0;l<o;++l){for(var h=new Uint32Array(80),f=0;f<16;++f)h[f]=a[l][f];for(var p=16;p<80;++p)h[p]=I(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);for(var y=s[0],m=s[1],v=s[2],x=s[3],_=s[4],g=0;g<80;++g){var b=Math.floor(g/20),w=I(y,5)+C(b,m,v,x)+_+e[b]+h[g]>>>0;_=x,x=v,v=I(m,30)>>>0,m=y,y=w}s[0]=s[0]+y>>>0,s[1]=s[1]+m>>>0,s[2]=s[2]+v>>>0,s[3]=s[3]+x>>>0,s[4]=s[4]+_>>>0}return[s[0]>>24&255,s[0]>>16&255,s[0]>>8&255,255&s[0],s[1]>>24&255,s[1]>>16&255,s[1]>>8&255,255&s[1],s[2]>>24&255,s[2]>>16&255,s[2]>>8&255,255&s[2],s[3]>>24&255,s[3]>>16&255,s[3]>>8&255,255&s[3],s[4]>>24&255,s[4]>>16&255,s[4]>>8&255,255&s[4]]};const R=v("v5",80,A),N="00000000-0000-0000-0000-000000000000";const j=function(t){if(!a(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}},9347:t=>{"use strict";var e,s="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),r={},n=0,i=0;function o(t){var e="";do{e=s[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}function a(){var t=o(+new Date);return t!==e?(n=0,e=t):t+"."+o(n++)}for(;i<64;i++)r[s[i]]=i;a.encode=o,a.decode=function(t){var e=0;for(i=0;i<t.length;i++)e=64*e+r[t.charAt(i)];return e},t.exports=a},2417:(t,e,s)=>{t.exports=s(7720)("./src/collaboration-core.js")},2704:(t,e,s)=>{t.exports=s(7079)("./src/core.js")},1492:(t,e,s)=>{t.exports=s(7079)("./src/engine.js")},9273:(t,e,s)=>{t.exports=s(7079)("./src/ui.js")},2209:(t,e,s)=>{t.exports=s(7079)("./src/utils.js")},7720:t=>{"use strict";t.exports=CKEditor5.collaborationDll},7079:t=>{"use strict";t.exports=CKEditor5.dll},66:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default="undefined"!=typeof self?self:"undefined"!=typeof window?window:Function("return this")()},5769:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.transports=e.Transport=e.protocol=e.Socket=void 0;const r=s(1187);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return r.Socket}}),e.protocol=r.Socket.protocol;var n=s(4291);Object.defineProperty(e,"Transport",{enumerable:!0,get:function(){return n.Transport}});var i=s(6449);Object.defineProperty(e,"transports",{enumerable:!0,get:function(){return i.transports}});var o=s(102);Object.defineProperty(e,"installTimerFunctions",{enumerable:!0,get:function(){return o.installTimerFunctions}})},1187:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=s(6449),i=s(102),o=r(s(9827)),a=r(s(5977)),c=r(s(5579)),u=s(3717),d=s(4755),l=(0,c.default)("engine.io-client:socket");class h extends u.Emitter{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=(0,a.default)(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=(0,a.default)(e.host).host),(0,i.installTimerFunctions)(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["polling","websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=o.default.decode(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",(()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())}),!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close")},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){l('creating transport "%s"',t);const e=function(t){const e={};for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}(this.opts.query);e.EIO=d.protocol,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return l("options: %j",s),new n.transports[t](s)}open(){let t;if(this.opts.rememberUpgrade&&h.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn((()=>{this.emitReserved("error","No transports available")}),0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return l("error while creating transport: %s",t),this.transports.shift(),void this.open()}t.open(),this.setTransport(t)}setTransport(t){l("setting transport %s",t.name),this.transport&&(l("clearing existing transport %s",this.transport.name),this.transport.removeAllListeners()),this.transport=t,t.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",(()=>{this.onClose("transport close")}))}probe(t){l('probing transport "%s"',t);let e=this.createTransport(t),s=!1;h.priorWebsocketSuccess=!1;const r=()=>{s||(l('probe transport "%s" opened',t),e.send([{type:"ping",data:"probe"}]),e.once("packet",(r=>{if(!s)if("pong"===r.type&&"probe"===r.data){if(l('probe transport "%s" pong',t),this.upgrading=!0,this.emitReserved("upgrading",e),!e)return;h.priorWebsocketSuccess="websocket"===e.name,l('pausing current transport "%s"',this.transport.name),this.transport.pause((()=>{s||"closed"!==this.readyState&&(l("changing transport and sending upgrade packet"),u(),this.setTransport(e),e.send([{type:"upgrade"}]),this.emitReserved("upgrade",e),e=null,this.upgrading=!1,this.flush())}))}else{l('probe transport "%s" failed',t);const s=new Error("probe error");s.transport=e.name,this.emitReserved("upgradeError",s)}})))};function n(){s||(s=!0,u(),e.close(),e=null)}const i=s=>{const r=new Error("probe error: "+s);r.transport=e.name,n(),l('probe transport "%s" failed because of error: %s',t,s),this.emitReserved("upgradeError",r)};function o(){i("transport closed")}function a(){i("socket closed")}function c(t){e&&t.name!==e.name&&(l('"%s" works - aborting "%s"',t.name,e.name),n())}const u=()=>{e.removeListener("open",r),e.removeListener("error",i),e.removeListener("close",o),this.off("close",a),this.off("upgrading",c)};e.once("open",r),e.once("error",i),e.once("close",o),this.once("close",a),this.once("upgrading",c),e.open()}onOpen(){if(l("socket open"),this.readyState="open",h.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){l("starting upgrade probes");let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(l('socket receive: type "%s", data "%s"',t.type,t.data),this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}else l('packet received with socket readyState "%s"',this.readyState)}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn((()=>{this.onClose("ping timeout")}),this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(l("flushing %d packets in socket",this.writeBuffer.length),this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emitReserved("flush"))}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,r){if("function"==typeof e&&(r=e,e=void 0),"function"==typeof s&&(r=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const n={type:t,data:e,options:s};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),r&&this.once("flush",r),this.flush()}close(){const t=()=>{this.onClose("forced close"),l("socket closing - telling transport to close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",(()=>{this.upgrading?s():t()})):this.upgrading?s():t()),this}onError(t){l("socket error %j",t),h.priorWebsocketSuccess=!1,this.emitReserved("error",t),this.onClose("transport error",t)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(l('socket close with reason: "%s"',t),this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let s=0;const r=t.length;for(;s<r;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}}e.Socket=h,h.protocol=d.protocol},4291:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Transport=void 0;const n=s(4755),i=s(3717),o=s(102),a=(0,r(s(5579)).default)("engine.io-client:transport");class c extends i.Emitter{constructor(t){super(),this.writable=!1,(0,o.installTimerFunctions)(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e){const s=new Error(t);return s.type="TransportError",s.description=e,super.emit("error",s),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState?this.write(t):a("transport is not open, discarding packets")}onOpen(){this.readyState="open",this.writable=!0,super.emit("open")}onData(t){const e=(0,n.decodePacket)(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emit("packet",t)}onClose(){this.readyState="closed",super.emit("close")}}e.Transport=c},6449:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.transports=void 0;const r=s(9814),n=s(4199);e.transports={websocket:n.WS,polling:r.XHR}},9814:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Request=e.XHR=void 0;const n=r(s(4582)),i=r(s(5579)),o=r(s(66)),a=s(102),c=s(3717),u=s(3737),d=(0,i.default)("engine.io-client:polling-xhr");function l(){}const h=null!=new n.default({xdomain:!1}).responseType;class f extends u.Polling{constructor(t){if(super(t),"undefined"!=typeof location){const e="https:"===location.protocol;let s=location.port;s||(s=e?"443":"80"),this.xd="undefined"!=typeof location&&t.hostname!==location.hostname||s!==t.port,this.xs=t.secure!==e}const e=t&&t.forceBase64;this.supportsBinary=h&&!e}request(t={}){return Object.assign(t,{xd:this.xd,xs:this.xs},this.opts),new p(this.uri(),t)}doWrite(t,e){const s=this.request({method:"POST",data:t});s.on("success",e),s.on("error",(t=>{this.onError("xhr post error",t)}))}doPoll(){d("xhr poll");const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(t=>{this.onError("xhr poll error",t)})),this.pollXhr=t}}e.XHR=f;class p extends c.Emitter{constructor(t,e){super(),(0,a.installTimerFunctions)(this,e),this.opts=e,this.method=e.method||"GET",this.uri=t,this.async=!1!==e.async,this.data=void 0!==e.data?e.data:null,this.create()}create(){const t=(0,a.pick)(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");t.xdomain=!!this.opts.xd,t.xscheme=!!this.opts.xs;const e=this.xhr=new n.default(t);try{d("xhr open %s: %s",this.method,this.uri),e.open(this.method,this.uri,this.async);try{if(this.opts.extraHeaders){e.setDisableHeaderCheck&&e.setDisableHeaderCheck(!0);for(let t in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(t)&&e.setRequestHeader(t,this.opts.extraHeaders[t])}}catch(t){}if("POST"===this.method)try{e.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{e.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in e&&(e.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(e.timeout=this.opts.requestTimeout),e.onreadystatechange=()=>{4===e.readyState&&(200===e.status||1223===e.status?this.onLoad():this.setTimeoutFn((()=>{this.onError("number"==typeof e.status?e.status:0)}),0))},d("xhr data %s",this.data),e.send(this.data)}catch(t){return void this.setTimeoutFn((()=>{this.onError(t)}),0)}"undefined"!=typeof document&&(this.index=p.requestsCount++,p.requests[this.index]=this)}onSuccess(){this.emit("success"),this.cleanup()}onData(t){this.emit("data",t),this.onSuccess()}onError(t){this.emit("error",t),this.cleanup(!0)}cleanup(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.xhr.onreadystatechange=l,t)try{this.xhr.abort()}catch(t){}"undefined"!=typeof document&&delete p.requests[this.index],this.xhr=null}}onLoad(){const t=this.xhr.responseText;null!==t&&this.onData(t)}abort(){this.cleanup()}}if(e.Request=p,p.requestsCount=0,p.requests={},"undefined"!=typeof document)if("function"==typeof attachEvent)attachEvent("onunload",y);else if("function"==typeof addEventListener){const t="onpagehide"in o.default?"pagehide":"unload";addEventListener(t,y,!1)}function y(){for(let t in p.requests)p.requests.hasOwnProperty(t)&&p.requests[t].abort()}},3737:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Polling=void 0;const n=s(4291),i=r(s(5579)),o=r(s(9347)),a=r(s(9827)),c=s(4755),u=(0,i.default)("engine.io-client:polling");class d extends n.Transport{constructor(){super(...arguments),this.polling=!1}get name(){return"polling"}doOpen(){this.poll()}pause(t){this.readyState="pausing";const e=()=>{u("paused"),this.readyState="paused",t()};if(this.polling||!this.writable){let t=0;this.polling&&(u("we are currently polling - waiting to pause"),t++,this.once("pollComplete",(function(){u("pre-pause polling complete"),--t||e()}))),this.writable||(u("we are currently writing - waiting to pause"),t++,this.once("drain",(function(){u("pre-pause writing complete"),--t||e()})))}else e()}poll(){u("polling"),this.polling=!0,this.doPoll(),this.emit("poll")}onData(t){u("polling got data %s",t);(0,c.decodePayload)(t,this.socket.binaryType).forEach((t=>{if("opening"===this.readyState&&"open"===t.type&&this.onOpen(),"close"===t.type)return this.onClose(),!1;this.onPacket(t)})),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState?this.poll():u('ignoring poll - transport state "%s"',this.readyState))}doClose(){const t=()=>{u("writing close packet"),this.write([{type:"close"}])};"open"===this.readyState?(u("transport open - closing"),t()):(u("transport not open - deferring close"),this.once("open",t))}write(t){this.writable=!1,(0,c.encodePayload)(t,(t=>{this.doWrite(t,(()=>{this.writable=!0,this.emit("drain")}))}))}uri(){let t=this.query||{};const e=this.opts.secure?"https":"http";let s="";!1!==this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||t.sid||(t.b64=1),this.opts.port&&("https"===e&&443!==Number(this.opts.port)||"http"===e&&80!==Number(this.opts.port))&&(s=":"+this.opts.port);const r=a.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}}e.Polling=d},9233:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.defaultBinaryType=e.usingBrowserWebSocket=e.WebSocket=e.nextTick=void 0;const n=r(s(66));e.nextTick="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),e.WebSocket=n.default.WebSocket||n.default.MozWebSocket,e.usingBrowserWebSocket=!0,e.defaultBinaryType="arraybuffer"},4199:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.WS=void 0;const n=s(4291),i=r(s(9827)),o=r(s(9347)),a=s(102),c=s(9233),u=r(s(5579)),d=s(4755),l=(0,u.default)("engine.io-client:websocket"),h="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class f extends n.Transport{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,s=h?{}:(0,a.pick)(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=c.usingBrowserWebSocket&&!h?e?new c.WebSocket(t,e):new c.WebSocket(t):new c.WebSocket(t,e,s)}catch(t){return this.emit("error",t)}this.ws.binaryType=this.socket.binaryType||c.defaultBinaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=this.onClose.bind(this),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],r=e===t.length-1;(0,d.encodePacket)(s,this.supportsBinary,(t=>{const e={};if(!c.usingBrowserWebSocket&&(s.options&&(e.compress=s.options.compress),this.opts.perMessageDeflate)){("string"==typeof t?Buffer.byteLength(t):t.length)<this.opts.perMessageDeflate.threshold&&(e.compress=!1)}try{c.usingBrowserWebSocket?this.ws.send(t):this.ws.send(t,e)}catch(t){l("websocket closed before onclose event")}r&&(0,c.nextTick)((()=>{this.writable=!0,this.emit("drain")}),this.setTimeoutFn)}))}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=(0,o.default)()),this.supportsBinary||(t.b64=1);const r=i.default.encode(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(r.length?"?"+r:"")}check(){return!(!c.WebSocket||"__initialize"in c.WebSocket&&this.name===f.prototype.name)}}e.WS=f},4582:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=r(s(4568)),i=r(s(66));e.default=function(t){const e=t.xdomain;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n.default))return new XMLHttpRequest}catch(t){}if(!e)try{return new(i.default[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}},102:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.installTimerFunctions=e.pick=void 0;const n=r(s(66));e.pick=function(t,...e){return e.reduce(((e,s)=>(t.hasOwnProperty(s)&&(e[s]=t[s]),e)),{})};const i=setTimeout,o=clearTimeout;e.installTimerFunctions=function(t,e){e.useNativeTimers?(t.setTimeoutFn=i.bind(n.default),t.clearTimeoutFn=o.bind(n.default)):(t.setTimeoutFn=setTimeout.bind(n.default),t.clearTimeoutFn=clearTimeout.bind(n.default))}},9782:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ERROR_PACKET=e.PACKET_TYPES_REVERSE=e.PACKET_TYPES=void 0;const s=Object.create(null);e.PACKET_TYPES=s,s.open="0",s.close="1",s.ping="2",s.pong="3",s.message="4",s.upgrade="5",s.noop="6";const r=Object.create(null);e.PACKET_TYPES_REVERSE=r,Object.keys(s).forEach((t=>{r[s[t]]=t}));e.ERROR_PACKET={type:"error",data:"parser error"}},6502:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decode=e.encode=void 0;const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let t=0;t<s.length;t++)r[s.charCodeAt(t)]=t;e.encode=t=>{let e,r=new Uint8Array(t),n=r.length,i="";for(e=0;e<n;e+=3)i+=s[r[e]>>2],i+=s[(3&r[e])<<4|r[e+1]>>4],i+=s[(15&r[e+1])<<2|r[e+2]>>6],i+=s[63&r[e+2]];return n%3==2?i=i.substring(0,i.length-1)+"=":n%3==1&&(i=i.substring(0,i.length-2)+"=="),i};e.decode=t=>{let e,s,n,i,o,a=.75*t.length,c=t.length,u=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);const d=new ArrayBuffer(a),l=new Uint8Array(d);for(e=0;e<c;e+=4)s=r[t.charCodeAt(e)],n=r[t.charCodeAt(e+1)],i=r[t.charCodeAt(e+2)],o=r[t.charCodeAt(e+3)],l[u++]=s<<2|n>>4,l[u++]=(15&n)<<4|i>>2,l[u++]=(3&i)<<6|63&o;return d}},3108:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(9782),n=s(6502),i="function"==typeof ArrayBuffer,o=(t,e)=>{if(i){const s=(0,n.decode)(t);return a(s,e)}return{base64:!0,data:t}},a=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;e.default=(t,e)=>{if("string"!=typeof t)return{type:"message",data:a(t,e)};const s=t.charAt(0);if("b"===s)return{type:"message",data:o(t.substring(1),e)};return r.PACKET_TYPES_REVERSE[s]?t.length>1?{type:r.PACKET_TYPES_REVERSE[s],data:t.substring(1)}:{type:r.PACKET_TYPES_REVERSE[s]}:r.ERROR_PACKET}},4895:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const r=s(9782),n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),i="function"==typeof ArrayBuffer,o=(t,e)=>{const s=new FileReader;return s.onload=function(){const t=s.result.split(",")[1];e("b"+t)},s.readAsDataURL(t)};e.default=({type:t,data:e},s,a)=>{return n&&e instanceof Blob?s?a(e):o(e,a):i&&(e instanceof ArrayBuffer||(c=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(c):c&&c.buffer instanceof ArrayBuffer))?s?a(e):o(new Blob([e]),a):a(r.PACKET_TYPES[t]+(e||""));var c}},4755:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.decodePayload=e.decodePacket=e.encodePayload=e.encodePacket=e.protocol=void 0;const r=s(4895);e.encodePacket=r.default;const n=s(3108);e.decodePacket=n.default;const i=String.fromCharCode(30);e.encodePayload=(t,e)=>{const s=t.length,n=new Array(s);let o=0;t.forEach(((t,a)=>{(0,r.default)(t,!1,(t=>{n[a]=t,++o===s&&e(n.join(i))}))}))};e.decodePayload=(t,e)=>{const s=t.split(i),r=[];for(let t=0;t<s.length;t++){const i=(0,n.default)(s[t],e);if(r.push(i),"error"===i.type)break}return r},e.protocol=4},8623:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.connect=e.io=e.Socket=e.Manager=e.protocol=void 0;const n=s(4197),i=s(3288);Object.defineProperty(e,"Manager",{enumerable:!0,get:function(){return i.Manager}});const o=s(3232);Object.defineProperty(e,"Socket",{enumerable:!0,get:function(){return o.Socket}});const a=r(s(5579)).default("socket.io-client"),c={};function u(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};const s=n.url(t,e.path||"/socket.io"),r=s.source,o=s.id,u=s.path,d=c[o]&&u in c[o].nsps;let l;return e.forceNew||e["force new connection"]||!1===e.multiplex||d?(a("ignoring socket cache for %s",r),l=new i.Manager(r,e)):(c[o]||(a("new io instance for %s",r),c[o]=new i.Manager(r,e)),l=c[o]),s.query&&!e.query&&(e.query=s.queryKey),l.socket(s.path,e)}e.io=u,e.connect=u,e.default=u,Object.assign(u,{Manager:i.Manager,Socket:o.Socket,io:u,connect:u});var d=s(170);Object.defineProperty(e,"protocol",{enumerable:!0,get:function(){return d.protocol}}),t.exports=u},3288:function(t,e,s){"use strict";var r=this&&this.__createBinding||(Object.create?function(t,e,s,r){void 0===r&&(r=s),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[s]}})}:function(t,e,s,r){void 0===r&&(r=s),t[r]=e[s]}),n=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var s in t)"default"!==s&&Object.prototype.hasOwnProperty.call(t,s)&&r(e,t,s);return n(e,t),e},o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Manager=void 0;const a=s(5769),c=s(3232),u=i(s(170)),d=s(6263),l=o(s(7672)),h=s(3717),f=o(s(5579)).default("socket.io-client:manager");class p extends h.Emitter{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,a.installTimerFunctions(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=e.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new l.default({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const r=e.parser||u;this.encoder=new r.Encoder,this.decoder=new r.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(f("readyState %s",this._readyState),~this._readyState.indexOf("open"))return this;f("opening %s",this.uri),this.engine=new a.Socket(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const r=d.on(e,"open",(function(){s.onopen(),t&&t()})),n=d.on(e,"error",(e=>{f("error"),s.cleanup(),s._readyState="closed",this.emitReserved("error",e),t?t(e):s.maybeReconnectOnOpen()}));if(!1!==this._timeout){const t=this._timeout;f("connect attempt will timeout after %d",t),0===t&&r();const s=this.setTimeoutFn((()=>{f("connect attempt timed out after %d",t),r(),e.close(),e.emit("error",new Error("timeout"))}),t);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}return this.subs.push(r),this.subs.push(n),this}connect(t){return this.open(t)}onopen(){f("open"),this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(d.on(t,"ping",this.onping.bind(this)),d.on(t,"data",this.ondata.bind(this)),d.on(t,"error",this.onerror.bind(this)),d.on(t,"close",this.onclose.bind(this)),d.on(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){f("error",t),this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s||(s=new c.Socket(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const t of e){if(this.nsps[t].active)return void f("socket %s is still active, skipping close",t)}this._close()}_packet(t){f("writing packet %j",t);const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){f("cleanup"),this.subs.forEach((t=>t())),this.subs.length=0,this.decoder.destroy()}_close(){f("disconnect"),this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){f("closed due to %s",t),this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)f("reconnect failed"),this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();f("will wait %dms before reconnect attempt",e),this._reconnecting=!0;const s=this.setTimeoutFn((()=>{t.skipReconnect||(f("attempting reconnect"),this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open((e=>{e?(f("reconnect attempt error"),t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):(f("reconnect success"),t.onreconnect())})))}),e);this.opts.autoUnref&&s.unref(),this.subs.push((function(){clearTimeout(s)}))}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}e.Manager=p},6263:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.on=void 0,e.on=function(t,e,s){return t.on(e,s),function(){t.off(e,s)}}},3232:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Socket=void 0;const n=s(170),i=s(6263),o=s(3717),a=r(s(5579)).default("socket.io-client:socket"),c=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class u extends o.Emitter{constructor(t,e,s){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[i.on(t,"open",this.onopen.bind(this)),i.on(t,"packet",this.onpacket.bind(this)),i.on(t,"error",this.onerror.bind(this)),i.on(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(c.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const s={type:n.PacketType.EVENT,data:e,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++;a("emitting packet with ack id %d",t);const r=e.pop();this._registerAckCallback(t,r),s.id=t}const r=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!r||!this.connected)?a("discard packet as the transport is not currently writable"):this.connected?this.packet(s):this.sendBuffer.push(s),this.flags={},this}_registerAckCallback(t,e){const s=this.flags.timeout;if(void 0===s)return void(this.acks[t]=e);const r=this.io.setTimeoutFn((()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&(a("removing packet with ack id %d from the buffer",t),this.sendBuffer.splice(e,1));a("event with ack id %d has timed out after %d ms",t,s),e.call(this,new Error("operation has timed out"))}),s);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(r),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){a("transport is open - connecting"),"function"==typeof this.auth?this.auth((t=>{this.packet({type:n.PacketType.CONNECT,data:t})})):this.packet({type:n.PacketType.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){a("close (%s)",t),this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case n.PacketType.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case n.PacketType.EVENT:case n.PacketType.BINARY_EVENT:this.onevent(t);break;case n.PacketType.ACK:case n.PacketType.BINARY_ACK:this.onack(t);break;case n.PacketType.DISCONNECT:this.ondisconnect();break;case n.PacketType.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];a("emitting event %j",e),null!=t.id&&(a("attaching ack callback to event"),e.push(this.ack(t.id))),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let s=!1;return function(...r){s||(s=!0,a("sending ack %j",r),e.packet({type:n.PacketType.ACK,id:t,data:r}))}}onack(t){const e=this.acks[t.id];"function"==typeof e?(a("calling ack %s with %j",t.id,t.data),e.apply(this,t.data),delete this.acks[t.id]):a("bad ack %s",t.id)}onconnect(t){a("socket connected with id %s",t),this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach((t=>this.emitEvent(t))),this.receiveBuffer=[],this.sendBuffer.forEach((t=>this.packet(t))),this.sendBuffer=[]}ondisconnect(){a("server disconnect (%s)",this.nsp),this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach((t=>t())),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&(a("performing disconnect (%s)",this.nsp),this.packet({type:n.PacketType.DISCONNECT})),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}e.Socket=u},4197:function(t,e,s){"use strict";var r=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.url=void 0;const n=r(s(5977)),i=r(s(5579)).default("socket.io-client:url");e.url=function(t,e="",s){let r=t;s=s||"undefined"!=typeof location&&location,null==t&&(t=s.protocol+"//"+s.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(i("protocol-less url %s",t),t=void 0!==s?s.protocol+"//"+t:"https://"+t),i("parse %s",t),r=n.default(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const o=-1!==r.host.indexOf(":")?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+o+":"+r.port+e,r.href=r.protocol+"://"+o+(s&&s.port===r.port?"":":"+r.port),r}},2830:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.reconstructPacket=e.deconstructPacket=void 0;const r=s(3980);function n(t,e){if(!t)return t;if(r.isBinary(t)){const s={_placeholder:!0,num:e.length};return e.push(t),s}if(Array.isArray(t)){const s=new Array(t.length);for(let r=0;r<t.length;r++)s[r]=n(t[r],e);return s}if("object"==typeof t&&!(t instanceof Date)){const s={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s[r]=n(t[r],e));return s}return t}function i(t,e){if(!t)return t;if(t&&t._placeholder)return e[t.num];if(Array.isArray(t))for(let s=0;s<t.length;s++)t[s]=i(t[s],e);else if("object"==typeof t)for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(t[s]=i(t[s],e));return t}e.deconstructPacket=function(t){const e=[],s=t.data,r=t;return r.data=n(s,e),r.attachments=e.length,{packet:r,buffers:e}},e.reconstructPacket=function(t,e){return t.data=i(t.data,e),t.attachments=void 0,t}},170:(t,e,s)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Decoder=e.Encoder=e.PacketType=e.protocol=void 0;const r=s(3717),n=s(2830),i=s(3980),o=s(5579).default("socket.io-parser");var a;e.protocol=5,function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"}(a=e.PacketType||(e.PacketType={}));e.Encoder=class{encode(t){return o("encoding packet %j",t),t.type!==a.EVENT&&t.type!==a.ACK||!i.hasBinary(t)?[this.encodeAsString(t)]:(t.type=t.type===a.EVENT?a.BINARY_EVENT:a.BINARY_ACK,this.encodeAsBinary(t))}encodeAsString(t){let e=""+t.type;return t.type!==a.BINARY_EVENT&&t.type!==a.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),o("encoded %j as %s",t,e),e}encodeAsBinary(t){const e=n.deconstructPacket(t),s=this.encodeAsString(e.packet),r=e.buffers;return r.unshift(s),r}};class c extends r.Emitter{constructor(){super()}add(t){let e;if("string"==typeof t)e=this.decodeString(t),e.type===a.BINARY_EVENT||e.type===a.BINARY_ACK?(this.reconstructor=new u(e),0===e.attachments&&super.emitReserved("decoded",e)):super.emitReserved("decoded",e);else{if(!i.isBinary(t)&&!t.base64)throw new Error("Unknown type: "+t);if(!this.reconstructor)throw new Error("got binary data when not reconstructing a packet");e=this.reconstructor.takeBinaryData(t),e&&(this.reconstructor=null,super.emitReserved("decoded",e))}}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(void 0===a[s.type])throw new Error("unknown packet type "+s.type);if(s.type===a.BINARY_EVENT||s.type===a.BINARY_ACK){const r=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const n=t.substring(r,e);if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");s.attachments=Number(n)}if("/"===t.charAt(e+1)){const r=e+1;for(;++e;){if(","===t.charAt(e))break;if(e===t.length)break}s.nsp=t.substring(r,e)}else s.nsp="/";const r=t.charAt(e+1);if(""!==r&&Number(r)==r){const r=e+1;for(;++e;){const s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}s.id=Number(t.substring(r,e+1))}if(t.charAt(++e)){const r=function(t){try{return JSON.parse(t)}catch(t){return!1}}(t.substr(e));if(!c.isPayloadValid(s.type,r))throw new Error("invalid payload");s.data=r}return o("decoded %s as %j",t,s),s}static isPayloadValid(t,e){switch(t){case a.CONNECT:return"object"==typeof e;case a.DISCONNECT:return void 0===e;case a.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case a.EVENT:case a.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case a.ACK:case a.BINARY_ACK:return Array.isArray(e)}}destroy(){this.reconstructor&&this.reconstructor.finishedReconstruction()}}e.Decoder=c;class u{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const t=n.reconstructPacket(this.reconPack,this.buffers);return this.finishedReconstruction(),t}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}},3980:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasBinary=e.isBinary=void 0;const s="function"==typeof ArrayBuffer,r=Object.prototype.toString,n="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===r.call(Blob),i="function"==typeof File||"undefined"!=typeof File&&"[object FileConstructor]"===r.call(File);function o(t){return s&&(t instanceof ArrayBuffer||(t=>"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer)(t))||n&&t instanceof Blob||i&&t instanceof File}e.isBinary=o,e.hasBinary=function t(e,s){if(!e||"object"!=typeof e)return!1;if(Array.isArray(e)){for(let s=0,r=e.length;s<r;s++)if(t(e[s]))return!0;return!1}if(o(e))return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0;return!1}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var s=__webpack_module_cache__[t]={id:t,exports:{}};return __webpack_modules__[t].call(s.exports,s,s.exports,__webpack_require__),s.exports}__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var s in e)__webpack_require__.o(e,s)&&!__webpack_require__.o(t,s)&&Object.defineProperty(t,s,{enumerable:!0,get:e[s]})},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nc=void 0;var __webpack_exports__={};(()=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{CloudServicesCommentsAdapter:()=>Li,CloudServicesRevisionHistoryAdapter:()=>_o,CloudServicesTrackChangesAdapter:()=>Zi,PresenceList:()=>ka,RealTimeCollaborativeComments:()=>no,RealTimeCollaborativeEditing:()=>Pi,RealTimeCollaborativeRevisionHistory:()=>Eo,RealTimeCollaborativeTrackChanges:()=>uo});var t=__webpack_require__(2704),e=__webpack_require__(2209),s=__webpack_require__(1492),r=__webpack_require__(9273),n=__webpack_require__(2417),i=__webpack_require__(7158),o=__webpack_require__.n(i);const a=["code","get","removeFromReconnectionStack","init","destroy","limitExceeded","plugins","add","CloudServices","cloudServices.requestTimeout","connected","create","addToReconnectionStack","connection","initialReconnectionInterval","catch","then","The limit of maximum concurrent connections that the collaboration server can handle has been reached. Try opening the document again in a few minutes. Please contact your system administrator if the problem persists.","stopListening","all","online","isInReconnectionStack","function","disconnected","websocketgateway-missing-token","reconnect","offline","from","state","pluginName","Connected users limit exceeded","define","token","cloudServices.connectionTimeout","websocketgateway-invalid-plugin-interface","webSocketUrl","_domEmitter","connecting","_reconnect","_isBrowserOffline","_shouldPluginsReconnect","cloudservices-init","set","constructor","delete","websocketgateway-plugin-already-registered","_reconnectionStack","connect","error","WebSocketGateway","change:me","listenTo","config","requires","disconnect","context","websocketgateway-missing-websocket-url","has"];var c,u;c=a,u=289,function(t){for(;--t;)c.push(c.shift())}(++u);const d=function(t,e){return a[t-=0]};class l extends t.ContextPlugin{static get[d("0x36")](){return[d("0x9"),r.Notification]}static get[d("0x1e")](){return"WebSocketGateway"}[d("0x4")](){const t=this[d("0x38")],s=t[d("0x7")].get("CloudServices"),n=t.plugins[d("0x2")](r.Notification);if(!s[d("0x21")])throw new e.CKEditorError(d("0x19"),this);if(!s[d("0x24")])throw new e.CKEditorError(d("0x39"),this);return this[d("0x2b")]("state",d("0x26")),this[d("0x2b")](d("0x28"),!1),this._reconnectionStack=new Set,this._shouldPluginsReconnect=!1,this._domEmitter=Object[d("0xc")](e.DomEmitterMixin),this[d("0x25")].listenTo(window,d("0x1b"),(()=>this[d("0x28")]=!0)),this[d("0x25")][d("0x34")](window,d("0x15"),(()=>this[d("0x28")]=!1)),this[d("0x38")][d("0x35")][d("0x20")](d("0x22"),10),this[d("0x38")][d("0x35")].define(d("0xa"),20),l.WebSocketGateway[d("0x30")](s[d("0x21")],s[d("0x24")],{disconnectOnUnload:!1,timeout:1e3*this[d("0x38")].config[d("0x2")]("cloudServices.connectionTimeout"),requestTimeout:1e3*this.context[d("0x35")][d("0x2")]("cloudServices.requestTimeout")}).then((t=>{if(this[d("0xe")]=t,this.bind("state").to(t,"state",this,d("0x28"),((t,e)=>("connected"!==t&&(this[d("0x29")]=!0),e||d("0xb")!==t?d("0x18"):d("0x18")==this.state&&this[d("0x29")]?(this[d("0x29")]=!1,this[d("0x27")](),d("0x26")):d("0xb")))),this.connection.on(d("0x31"),((t,s)=>{if(d("0x6")!==s[d("0x1")])throw console.error(s),new e.CKEditorError(d("0x2a"),null,{originalError:s});n.showWarning(d("0x12"),{title:d("0x1f"),namespace:"real-time-collaboration"})})),!t.me)return new Promise((e=>t.on(d("0x33"),e)))})).catch((t=>{throw console[d("0x31")](t),new e.CKEditorError(d("0x2a"),null,{originalError:t})}))}[d("0xd")](t){if(d("0x17")!=typeof t[d("0x1a")])throw new e.CKEditorError(d("0x23"),this);if(this[d("0x16")](t))throw new e.CKEditorError(d("0x2e"),this,{name:t[d("0x2c")][d("0x1e")]});this[d("0x2f")][d("0x8")](t)}[d("0x3")](t){this[d("0x2f")][d("0x2d")](t)}[d("0x16")](t){return this._reconnectionStack[d("0x0")](t)}[d("0x27")](){return this[d("0xe")].reconnect().then((()=>Promise[d("0x14")](Array[d("0x1c")](this._reconnectionStack,(t=>t.reconnect())))))[d("0x11")]((()=>this[d("0x1d")]=d("0xb")))[d("0x10")]((t=>{throw console[d("0x31")](t),new e.CKEditorError("cloudservices-reconnection-error",this[d("0x38")])}))}[d("0x5")](){this.connection&&this[d("0xe")][d("0x37")](),this.state=d("0x18"),this[d("0x25")][d("0x13")](),super[d("0x5")]()}}l[d("0x32")]=o(),l[d("0xf")]=1e3;const h=["values","connected","Sessions","_uniqueUsersCount","getUserSessions","state","delete","sessions-register-already-registered","_handleSessionAdd","_createUser","get","allConnectedUsers","getUserRole","user","set","change:state","has","fire","size","unregister","init","clear","pluginName","orderNumber","forEach","defineMe","requires","add","_registeredSessions","remove","addUser","mySessionId","_handleSessionRemove","listenTo","connection","sessions-unregister-not-exist","stopListening","channelSessions","context","channelConnectedUsers","plugins","_users"];var f,p;f=h,p=202,function(t){for(;--t;)f.push(f.shift())}(++p);const y=function(t,e){return h[t-=0]};class m extends t.ContextPlugin{static get[y("0x1e")](){return y("0xa")}static get[y("0x22")](){return[l,n.Users]}[y("0x1c")](){const t=this.context,s=t[y("0x6")][y("0x12")](l);this[y("0x3")]=new Map,this[y("0x5")]=new Map,this.allConnectedUsers=new e.Collection,this[y("0x24")]=new Map,this[y("0xb")]=0,this[y("0x7")]=t.plugins[y("0x12")](n.Users),this[y("0x29")](s,y("0x17"),((t,e,s)=>{if(y("0x9")!==s)this.channelSessions[y("0x20")]((t=>t[y("0x1d")]())),this[y("0x5")][y("0x20")]((t=>t[y("0x1d")]())),this[y("0x13")][y("0x1d")]();else for(const[t,e]of this._registeredSessions)for(const s of e)this[y("0x10")](t,s)})),this[y("0x11")](s[y("0x0")].me,!0)}register(t,s){if(this[y("0x24")].has(t))throw new e.CKEditorError(y("0xf"),null,{channelId:t});this[y("0x24")].set(t,s),this[y("0x3")].set(t,new e.Collection),this[y("0x5")][y("0x16")](t,new e.Collection),this[y("0x29")](s,y("0x23"),((e,s)=>this._handleSessionAdd(t,s))),this[y("0x29")](s,"remove",((e,s)=>this._handleSessionRemove(t,s)));for(const e of s)this[y("0x10")](t,e)}[y("0x1b")](t){if(!this[y("0x24")][y("0x18")](t))throw new e.CKEditorError(y("0x1"),null,{channelId:t});const s=this._registeredSessions[y("0x12")](t);this[y("0x2")](s);for(const e of s)"connected"===this[y("0x4")][y("0x6")].get(l)[y("0xd")]&&this[y("0x28")](t,e);this[y("0x24")][y("0xe")](t),this[y("0x3")][y("0xe")](t),this[y("0x5")].delete(t)}get[y("0x27")](){return this[y("0x4")][y("0x6")][y("0x12")](l)[y("0x0")].sessionId}getUserBySessionId(t){for(const e of this[y("0x3")][y("0x8")]())for(const s of e)if(s.id===t)return s[y("0x15")]}[y("0xc")](t,e){const s=e?[this[y("0x3")].get(e)]:this[y("0x3")][y("0x8")](),r=new Set;for(const e of s)for(const s of e)s[y("0x15")].id===t.id&&r[y("0x23")](s.id);return r}[y("0x14")](t){for(const e of this[y("0x3")][y("0x8")]())for(const s of e)if(s[y("0x15")]===t)return s.role}[y("0x10")](t,e){if(y("0x9")!==this[y("0x4")][y("0x6")][y("0x12")](l)[y("0xd")])return;const s=e.user,r=this[y("0x7")].getUser(s.id)||this[y("0x11")](s),n=Object.assign({},e,{user:r});this.channelSessions[y("0x12")](t).add(n);const i=this[y("0x5")][y("0x12")](t);i[y("0x18")](r.id)||i[y("0x23")](r),this[y("0x13")][y("0x18")](r.id)||this[y("0x13")][y("0x23")](r),this[y("0x19")]("sessionAdd:"+t,{channelId:t,session:n})}[y("0x28")](t,e){if(y("0x9")!==this.context[y("0x6")][y("0x12")](l)[y("0xd")])return;const s=this[y("0x5")][y("0x12")](t),r=e.user;this[y("0x3")][y("0x12")](t).remove(e.id),s.has(r.id)&&!this[y("0xc")](r,t)[y("0x1a")]&&s[y("0x25")](r.id),this.allConnectedUsers[y("0x12")](r.id)&&!this[y("0xc")](r)[y("0x1a")]&&this[y("0x13")][y("0x25")](r.id)}[y("0x11")](t,e){const s=this[y("0x7")][y("0x26")](t);return e&&this[y("0x7")][y("0x21")](t.id),s[y("0x1f")]=this._uniqueUsersCount++,s}}var v=__webpack_require__(7594),x=__webpack_require__.n(v),_=__webpack_require__(9940),g={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};x()(_.Z,g);_.Z.locals;const b=["editing","root","getContainedElement","user:range:","checkChild","element","set","change","editor","tableCell","reconvertMarker","$graveyard","commands","afterInit","applyOperation","user:range","markerName","$text",'&#8203;<span class="ck-user__marker-line"><span class="ck-user__marker-dot"></span></span>',"addMarker","has","update:user:range","getUserBySessionId","name","end","batch","for","change:range","ck-user__selection","start","plugins","getSelectionClass","conversion","getStart","getAttribute","editingDowncast","isInline","createRange","createUIElement","contenteditable","enqueueChange","data-session-id","priority","selection","requires","deletionPosition","marker","user:","getMarkerClass","rootName","getCustomProperty","toDomElement","get","model","parent","schema","ck-user__marker ","isObject","getFirstRange","getRange","hasContent","color","UserMarkers","getPositions","document","user:position:","split","mySessionId","delete","removeMarker","userPositionMarker","isLimit","nodeAfter","getNearestSelectionRange","span","detach","oldRange","hasDomSelection","newRange","markers","init"];var w,O;w=b,O=464,function(t){for(;--t;)w.push(w.shift())}(++O);const S=function(t,e){return b[t-=0]};class E extends t.Plugin{static get[S("0x42")](){return[m]}static get pluginName(){return S("0x3")}[S("0x15")](){const t=this[S("0x1e")],e=t[S("0x34")][S("0x4a")](m);t[S("0x36")].for(S("0x39")).markerToElement({model:"user:position",view:(s,{writer:r})=>function(t,e,s,r){const n=t[S("0x26")].split(":")[2],i=s[S("0x2c")](n);if(!i||n===s[S("0x8")])return;if(!r[S("0x4b")].schema[S("0x1a")](t.markerRange[S("0x33")],S("0x27")))return;const o={class:S("0x4e")+i[S("0x2")][S("0x46")](),"data-name":i.name,"data-session-id":n},a=r[S("0x4b")].markers[S("0x4a")](t[S("0x26")])[S("0x37")](),c=a[S("0xd")],u=r[S("0x4b")][S("0x4d")];if(c&&u[S("0x4f")](c)&&u[S("0x3a")](c)&&!r[S("0x4b")].markers.get(S("0x19")+n)[S("0x0")]().isCollapsed)return;const d=a[S("0x4c")];r[S("0x4b")].schema[S("0xc")](d)&&!r[S("0x4b")][S("0x1")](d)&&(o[S("0x3d")]=!1);const l=function(t,e){const s=t[S("0x3c")](S("0xf"),e);return t.setCustomProperty(S("0xb"),!0,s),s.render=function(t){const e=this[S("0x49")](t);return e.innerHTML=S("0x28"),e},s.isSimilar=function(t){return this[S("0x48")](S("0xb"))&&t[S("0x48")]("userPositionMarker")&&this[S("0x38")](S("0x3f"))==t[S("0x38")](S("0x3f"))},s}(e,o);return l[S("0x40")]=1e3+i.orderNumber,l}(s,r,e,t)}),t.conversion[S("0x30")](S("0x39")).markerToHighlight({model:S("0x25"),view:t=>function(t,e){const s=t[S("0x26")].split(":")[2];if(s===e[S("0x8")])return;const r=e[S("0x2c")](s);return r?{id:s,classes:[S("0x32"),r[S("0x2")][S("0x35")]()],attributes:{"data-session-id":s},priority:2e3+r.orderNumber}:{id:s}}(t,e)}),function(t){const e=t[S("0x4b")],r=new Map,n=t.plugins[S("0x4a")](m);e.markers.on(S("0x2b"),((i,o,a,c)=>{if(!c&&r.get(o.name))return r[S("0x4a")](o.name)[S("0x10")](),void r[S("0x9")](o[S("0x2d")]);const u=o[S("0x2d")][S("0x7")](":")[2];if(u===n[S("0x8")])return;const d=S("0x6")+u;e[S("0x14")][S("0x2a")](d)&&t[S("0x16")][S("0x20")](d),o.on(S("0x31"),((t,n,i)=>{if(S("0x21")!=n[S("0x17")][S("0x47")]&&S("0x21")==o[S("0x0")]()[S("0x17")][S("0x47")]&&!r[S("0x2a")](o[S("0x2d")])){const t=e[S("0x4d")].getNearestSelectionRange(i[S("0x43")]);if(t){const n=s.LiveRange.fromRange(t);r[S("0x1c")](o[S("0x2d")],n),n.on(S("0x31"),((t,s,i)=>{if(S("0x21")==n[S("0x17")][S("0x47")]){const t=e[S("0x4d")][S("0xe")](i[S("0x43")]);t?(n[S("0x33")]=t[S("0x33")],n.end=t[S("0x2e")]):(r[S("0x9")](o[S("0x2d")]),n[S("0x10")]())}}))}}}))})),e.document.on(S("0x1d"),(()=>{r.size>0&&e.enqueueChange({isUndoable:!1},(t=>{for(const[s,n]of r)S("0x21")==e[S("0x14")][S("0x4a")](s)[S("0x0")]()[S("0x17")][S("0x47")]&&(k(s.split(":")[2],n.toRange(),e,t),n[S("0x10")]());r.clear()}))}))}(t)}[S("0x23")](){const t=this[S("0x1e")],e=t[S("0x22")][S("0x4a")]("undo");e&&t[S("0x4b")].on(S("0x24"),((s,r)=>{const n=r[0];if(S("0x44")!=n.type||!n.name.startsWith(S("0x45")))return;const i=n[S("0x2f")];e._createdBatches[S("0x2a")](i)&&(n[S("0x13")]=n[S("0x11")]?t[S("0x4b")].createRange(n[S("0x11")][S("0x33")],n[S("0x11")].end):null)}),{priority:"highest"})}createUserMarkerOperations(){const t=this[S("0x1e")],e=t[S("0x4b")][S("0x5")],s=t.plugins[S("0x4a")](m);t.model[S("0x3e")]({isUndoable:!1},(r=>{const n=S("0x19")+s[S("0x8")],i=S("0x6")+s[S("0x8")],o=t[S("0x4b")][S("0x14")].has(n);t[S("0x16")].view[S("0x12")]?k(s[S("0x8")],e[S("0x41")][S("0x50")](),t.model,r):o&&(r.removeMarker(n),r[S("0xa")](i))}))}}function k(t,e,s,r){const n=S("0x19")+t,i=S("0x6")+t,o=e[S("0x18")]();let a=e.start;o&&o.is(S("0x1b"),S("0x1f"))&&(a=function(t,e){for(const s of t[S("0x4")]())if(e.schema[S("0x1a")](s,S("0x27")))return s}(e,s),e=r.createRange(a)),a=r[S("0x3b")](a),s[S("0x14")][S("0x2a")](n)?(r.updateMarker(n,{range:e}),r.updateMarker(i,{range:a})):(r[S("0x29")](n,{range:e,usingOperation:!0}),r[S("0x29")](i,{range:a,usingOperation:!0}))}function T(t,e,s){const r=t.t;switch(e){case"PENDING_ACTION_SENDING_DATA":return r({string:"Sending data to the server.",id:"PENDING_ACTION_SENDING_DATA"});case"The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.":return r("The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.");case"The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.":return r("The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.");case"The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.":return r("The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.");case"The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.":return r("The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.");case"Synchronization issue":return r("Synchronization issue");case"PENDING_ACTION_REVISION_HISTORY":return r({string:"Unsaved change in revision history.",id:"PENDING_ACTION_REVISION_HISTORY"});case"CONNECTED_USERS":return r({string:"1 connected user (me)",plural:"%0 connected users",id:"CONNECTED_USERS"},s)}}var C=__webpack_require__(9933),I=__webpack_require__.n(C);const A=function(){this.__data__=[],this.size=0};const R=function(t,e){return t===e||t!=t&&e!=e};const N=function(t,e){for(var s=t.length;s--;)if(R(t[s][0],e))return s;return-1};var j=Array.prototype.splice;const P=function(t){var e=this.__data__,s=N(e,t);return!(s<0)&&(s==e.length-1?e.pop():j.call(e,s,1),--this.size,!0)};const D=function(t){var e=this.__data__,s=N(e,t);return s<0?void 0:e[s][1]};const M=function(t){return N(this.__data__,t)>-1};const B=function(t,e){var s=this.__data__,r=N(s,t);return r<0?(++this.size,s.push([t,e])):s[r][1]=e,this};function J(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}J.prototype.clear=A,J.prototype.delete=P,J.prototype.get=D,J.prototype.has=M,J.prototype.set=B;const V=J;const U=function(){this.__data__=new V,this.size=0};const q=function(t){var e=this.__data__,s=e.delete(t);return this.size=e.size,s};const F=function(t){return this.__data__.get(t)};const L=function(t){return this.__data__.has(t)};const Y="object"==typeof global&&global&&global.Object===Object&&global;var G="object"==typeof self&&self&&self.Object===Object&&self;const z=Y||G||Function("return this")();const $=z.Symbol;var W=Object.prototype,H=W.hasOwnProperty,K=W.toString,Z=$?$.toStringTag:void 0;const X=function(t){var e=H.call(t,Z),s=t[Z];try{t[Z]=void 0;var r=!0}catch(t){}var n=K.call(t);return r&&(e?t[Z]=s:delete t[Z]),n};var Q=Object.prototype.toString;const tt=function(t){return Q.call(t)};var et=$?$.toStringTag:void 0;const st=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":et&&et in Object(t)?X(t):tt(t)};const rt=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)};const nt=function(t){if(!rt(t))return!1;var e=st(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e};const it=z["__core-js_shared__"];var ot,at=(ot=/[^.]+$/.exec(it&&it.keys&&it.keys.IE_PROTO||""))?"Symbol(src)_1."+ot:"";const ct=function(t){return!!at&&at in t};var ut=Function.prototype.toString;const dt=function(t){if(null!=t){try{return ut.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var lt=/^\[object .+?Constructor\]$/,ht=Function.prototype,ft=Object.prototype,pt=ht.toString,yt=ft.hasOwnProperty,mt=RegExp("^"+pt.call(yt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const vt=function(t){return!(!rt(t)||ct(t))&&(nt(t)?mt:lt).test(dt(t))};const xt=function(t,e){return null==t?void 0:t[e]};const _t=function(t,e){var s=xt(t,e);return vt(s)?s:void 0};const gt=_t(z,"Map");const bt=_t(Object,"create");const wt=function(){this.__data__=bt?bt(null):{},this.size=0};const Ot=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e};var St=Object.prototype.hasOwnProperty;const Et=function(t){var e=this.__data__;if(bt){var s=e[t];return"__lodash_hash_undefined__"===s?void 0:s}return St.call(e,t)?e[t]:void 0};var kt=Object.prototype.hasOwnProperty;const Tt=function(t){var e=this.__data__;return bt?void 0!==e[t]:kt.call(e,t)};const Ct=function(t,e){var s=this.__data__;return this.size+=this.has(t)?0:1,s[t]=bt&&void 0===e?"__lodash_hash_undefined__":e,this};function It(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}It.prototype.clear=wt,It.prototype.delete=Ot,It.prototype.get=Et,It.prototype.has=Tt,It.prototype.set=Ct;const At=It;const Rt=function(){this.size=0,this.__data__={hash:new At,map:new(gt||V),string:new At}};const Nt=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t};const jt=function(t,e){var s=t.__data__;return Nt(e)?s["string"==typeof e?"string":"hash"]:s.map};const Pt=function(t){var e=jt(this,t).delete(t);return this.size-=e?1:0,e};const Dt=function(t){return jt(this,t).get(t)};const Mt=function(t){return jt(this,t).has(t)};const Bt=function(t,e){var s=jt(this,t),r=s.size;return s.set(t,e),this.size+=s.size==r?0:1,this};function Jt(t){var e=-1,s=null==t?0:t.length;for(this.clear();++e<s;){var r=t[e];this.set(r[0],r[1])}}Jt.prototype.clear=Rt,Jt.prototype.delete=Pt,Jt.prototype.get=Dt,Jt.prototype.has=Mt,Jt.prototype.set=Bt;const Vt=Jt;const Ut=function(t,e){var s=this.__data__;if(s instanceof V){var r=s.__data__;if(!gt||r.length<199)return r.push([t,e]),this.size=++s.size,this;s=this.__data__=new Vt(r)}return s.set(t,e),this.size=s.size,this};function qt(t){var e=this.__data__=new V(t);this.size=e.size}qt.prototype.clear=U,qt.prototype.delete=q,qt.prototype.get=F,qt.prototype.has=L,qt.prototype.set=Ut;const Ft=qt;const Lt=function(t,e){for(var s=-1,r=null==t?0:t.length;++s<r&&!1!==e(t[s],s,t););return t};const Yt=function(){try{var t=_t(Object,"defineProperty");return t({},"",{}),t}catch(t){}}();const Gt=function(t,e,s){"__proto__"==e&&Yt?Yt(t,e,{configurable:!0,enumerable:!0,value:s,writable:!0}):t[e]=s};var zt=Object.prototype.hasOwnProperty;const $t=function(t,e,s){var r=t[e];zt.call(t,e)&&R(r,s)&&(void 0!==s||e in t)||Gt(t,e,s)};const Wt=function(t,e,s,r){var n=!s;s||(s={});for(var i=-1,o=e.length;++i<o;){var a=e[i],c=r?r(s[a],t[a],a,s,t):void 0;void 0===c&&(c=t[a]),n?Gt(s,a,c):$t(s,a,c)}return s};const Ht=function(t,e){for(var s=-1,r=Array(t);++s<t;)r[s]=e(s);return r};const Kt=function(t){return null!=t&&"object"==typeof t};const Zt=function(t){return Kt(t)&&"[object Arguments]"==st(t)};var Xt=Object.prototype,Qt=Xt.hasOwnProperty,te=Xt.propertyIsEnumerable;const ee=Zt(function(){return arguments}())?Zt:function(t){return Kt(t)&&Qt.call(t,"callee")&&!te.call(t,"callee")};const se=Array.isArray;const re=function(){return!1};var ne="object"==typeof exports&&exports&&!exports.nodeType&&exports,ie=ne&&"object"==typeof module&&module&&!module.nodeType&&module,oe=ie&&ie.exports===ne?z.Buffer:void 0;const ae=(oe?oe.isBuffer:void 0)||re;var ce=/^(?:0|[1-9]\d*)$/;const ue=function(t,e){var s=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==s||"symbol"!=s&&ce.test(t))&&t>-1&&t%1==0&&t<e};const de=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var le={};le["[object Float32Array]"]=le["[object Float64Array]"]=le["[object Int8Array]"]=le["[object Int16Array]"]=le["[object Int32Array]"]=le["[object Uint8Array]"]=le["[object Uint8ClampedArray]"]=le["[object Uint16Array]"]=le["[object Uint32Array]"]=!0,le["[object Arguments]"]=le["[object Array]"]=le["[object ArrayBuffer]"]=le["[object Boolean]"]=le["[object DataView]"]=le["[object Date]"]=le["[object Error]"]=le["[object Function]"]=le["[object Map]"]=le["[object Number]"]=le["[object Object]"]=le["[object RegExp]"]=le["[object Set]"]=le["[object String]"]=le["[object WeakMap]"]=!1;const he=function(t){return Kt(t)&&de(t.length)&&!!le[st(t)]};const fe=function(t){return function(e){return t(e)}};var pe="object"==typeof exports&&exports&&!exports.nodeType&&exports,ye=pe&&"object"==typeof module&&module&&!module.nodeType&&module,me=ye&&ye.exports===pe&&Y.process;const ve=function(){try{var t=ye&&ye.require&&ye.require("util").types;return t||me&&me.binding&&me.binding("util")}catch(t){}}();var xe=ve&&ve.isTypedArray;const _e=xe?fe(xe):he;var ge=Object.prototype.hasOwnProperty;const be=function(t,e){var s=se(t),r=!s&&ee(t),n=!s&&!r&&ae(t),i=!s&&!r&&!n&&_e(t),o=s||r||n||i,a=o?Ht(t.length,String):[],c=a.length;for(var u in t)!e&&!ge.call(t,u)||o&&("length"==u||n&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||ue(u,c))||a.push(u);return a};var we=Object.prototype;const Oe=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||we)};const Se=function(t,e){return function(s){return t(e(s))}};const Ee=Se(Object.keys,Object);var ke=Object.prototype.hasOwnProperty;const Te=function(t){if(!Oe(t))return Ee(t);var e=[];for(var s in Object(t))ke.call(t,s)&&"constructor"!=s&&e.push(s);return e};const Ce=function(t){return null!=t&&de(t.length)&&!nt(t)};const Ie=function(t){return Ce(t)?be(t):Te(t)};const Ae=function(t,e){return t&&Wt(e,Ie(e),t)};const Re=function(t){var e=[];if(null!=t)for(var s in Object(t))e.push(s);return e};var Ne=Object.prototype.hasOwnProperty;const je=function(t){if(!rt(t))return Re(t);var e=Oe(t),s=[];for(var r in t)("constructor"!=r||!e&&Ne.call(t,r))&&s.push(r);return s};const Pe=function(t){return Ce(t)?be(t,!0):je(t)};const De=function(t,e){return t&&Wt(e,Pe(e),t)};var Me="object"==typeof exports&&exports&&!exports.nodeType&&exports,Be=Me&&"object"==typeof module&&module&&!module.nodeType&&module,Je=Be&&Be.exports===Me?z.Buffer:void 0,Ve=Je?Je.allocUnsafe:void 0;const Ue=function(t,e){if(e)return t.slice();var s=t.length,r=Ve?Ve(s):new t.constructor(s);return t.copy(r),r};const qe=function(t,e){var s=-1,r=t.length;for(e||(e=Array(r));++s<r;)e[s]=t[s];return e};const Fe=function(t,e){for(var s=-1,r=null==t?0:t.length,n=0,i=[];++s<r;){var o=t[s];e(o,s,t)&&(i[n++]=o)}return i};const Le=function(){return[]};var Ye=Object.prototype.propertyIsEnumerable,Ge=Object.getOwnPropertySymbols;const ze=Ge?function(t){return null==t?[]:(t=Object(t),Fe(Ge(t),(function(e){return Ye.call(t,e)})))}:Le;const $e=function(t,e){return Wt(t,ze(t),e)};const We=function(t,e){for(var s=-1,r=e.length,n=t.length;++s<r;)t[n+s]=e[s];return t};const He=Se(Object.getPrototypeOf,Object);const Ke=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)We(e,ze(t)),t=He(t);return e}:Le;const Ze=function(t,e){return Wt(t,Ke(t),e)};const Xe=function(t,e,s){var r=e(t);return se(t)?r:We(r,s(t))};const Qe=function(t){return Xe(t,Ie,ze)};const ts=function(t){return Xe(t,Pe,Ke)};const es=_t(z,"DataView");const ss=_t(z,"Promise");const rs=_t(z,"Set");const ns=_t(z,"WeakMap");var is="[object Map]",os="[object Promise]",as="[object Set]",cs="[object WeakMap]",us="[object DataView]",ds=dt(es),ls=dt(gt),hs=dt(ss),fs=dt(rs),ps=dt(ns),ys=st;(es&&ys(new es(new ArrayBuffer(1)))!=us||gt&&ys(new gt)!=is||ss&&ys(ss.resolve())!=os||rs&&ys(new rs)!=as||ns&&ys(new ns)!=cs)&&(ys=function(t){var e=st(t),s="[object Object]"==e?t.constructor:void 0,r=s?dt(s):"";if(r)switch(r){case ds:return us;case ls:return is;case hs:return os;case fs:return as;case ps:return cs}return e});const ms=ys;var vs=Object.prototype.hasOwnProperty;const xs=function(t){var e=t.length,s=new t.constructor(e);return e&&"string"==typeof t[0]&&vs.call(t,"index")&&(s.index=t.index,s.input=t.input),s};const _s=z.Uint8Array;const gs=function(t){var e=new t.constructor(t.byteLength);return new _s(e).set(new _s(t)),e};const bs=function(t,e){var s=e?gs(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.byteLength)};var ws=/\w*$/;const Os=function(t){var e=new t.constructor(t.source,ws.exec(t));return e.lastIndex=t.lastIndex,e};var Ss=$?$.prototype:void 0,Es=Ss?Ss.valueOf:void 0;const ks=function(t){return Es?Object(Es.call(t)):{}};const Ts=function(t,e){var s=e?gs(t.buffer):t.buffer;return new t.constructor(s,t.byteOffset,t.length)};const Cs=function(t,e,s){var r=t.constructor;switch(e){case"[object ArrayBuffer]":return gs(t);case"[object Boolean]":case"[object Date]":return new r(+t);case"[object DataView]":return bs(t,s);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ts(t,s);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(t);case"[object RegExp]":return Os(t);case"[object Symbol]":return ks(t)}};var Is=Object.create;const As=function(){function t(){}return function(e){if(!rt(e))return{};if(Is)return Is(e);t.prototype=e;var s=new t;return t.prototype=void 0,s}}();const Rs=function(t){return"function"!=typeof t.constructor||Oe(t)?{}:As(He(t))};const Ns=function(t){return Kt(t)&&"[object Map]"==ms(t)};var js=ve&&ve.isMap;const Ps=js?fe(js):Ns;const Ds=function(t){return Kt(t)&&"[object Set]"==ms(t)};var Ms=ve&&ve.isSet;const Bs=Ms?fe(Ms):Ds;var Js="[object Arguments]",Vs="[object Function]",Us="[object Object]",qs={};qs[Js]=qs["[object Array]"]=qs["[object ArrayBuffer]"]=qs["[object DataView]"]=qs["[object Boolean]"]=qs["[object Date]"]=qs["[object Float32Array]"]=qs["[object Float64Array]"]=qs["[object Int8Array]"]=qs["[object Int16Array]"]=qs["[object Int32Array]"]=qs["[object Map]"]=qs["[object Number]"]=qs["[object Object]"]=qs["[object RegExp]"]=qs["[object Set]"]=qs["[object String]"]=qs["[object Symbol]"]=qs["[object Uint8Array]"]=qs["[object Uint8ClampedArray]"]=qs["[object Uint16Array]"]=qs["[object Uint32Array]"]=!0,qs["[object Error]"]=qs[Vs]=qs["[object WeakMap]"]=!1;const Fs=function t(e,s,r,n,i,o){var a,c=1&s,u=2&s,d=4&s;if(r&&(a=i?r(e,n,i,o):r(e)),void 0!==a)return a;if(!rt(e))return e;var l=se(e);if(l){if(a=xs(e),!c)return qe(e,a)}else{var h=ms(e),f=h==Vs||"[object GeneratorFunction]"==h;if(ae(e))return Ue(e,c);if(h==Us||h==Js||f&&!i){if(a=u||f?{}:Rs(e),!c)return u?Ze(e,De(a,e)):$e(e,Ae(a,e))}else{if(!qs[h])return i?e:{};a=Cs(e,h,c)}}o||(o=new Ft);var p=o.get(e);if(p)return p;o.set(e,a),Bs(e)?e.forEach((function(n){a.add(t(n,s,r,n,e,o))})):Ps(e)&&e.forEach((function(n,i){a.set(i,t(n,s,r,i,e,o))}));var y=l?void 0:(d?u?ts:Qe:u?Pe:Ie)(e);return Lt(y||e,(function(n,i){y&&(n=e[i=n]),$t(a,i,t(n,s,r,i,e,o))})),a};const Ls=function(t){return Fs(t,5)},Ys=["_description","toObject","getDescriptor","decode","_protobufRoot","verify","encode","protobuffactory-cannot-get-descriptor-before-build","_protobuf","decompress","compress","finish","nested"];var Gs,zs;Gs=Ys,zs=240,function(t){for(;--t;)Gs.push(Gs.shift())}(++zs);const $s=function(t,e){return Ys[t-=0]};class Ws{constructor(){this[$s("0x7")]={nested:{}}}registerDescriptor(t,e){this[$s("0x7")][$s("0x6")][t]=Ls(e)}build(){this[$s("0xb")]=I().Root.fromJSON(this[$s("0x7")])}[$s("0x9")](t){if(!this._protobufRoot)throw new e.CKEditorError($s("0x1"),this);return new Hs(this[$s("0xb")].lookupType(t))}}class Hs{constructor(t){this[$s("0x2")]=t}[$s("0x4")](t){const e=this._protobuf[$s("0xc")](t);if(e)throw Error(e);return this._protobuf[$s("0x0")](this._protobuf.create(t))[$s("0x5")]()}[$s("0x3")](t){return this._protobuf[$s("0x8")](this[$s("0x2")][$s("0xa")](t),{oneofs:!0})}}var Ks,Zs,Xs=["Element","string","Position","bool","repeated","uint32"];Ks=Xs,Zs=222,function(t){for(;--t;)Ks.push(Ks.shift())}(++Zs);var Qs=function(t,e){return Xs[t-=0]};const tr={Position:{fields:{root:{type:Qs("0x1"),id:1},rootMain:{type:Qs("0x3"),id:2},rootGraveyard:{type:Qs("0x3"),id:3},path:{rule:Qs("0x4"),type:Qs("0x5"),id:4},stickiness:{type:Qs("0x1"),id:5}}},Range:{fields:{start:{type:Qs("0x2"),id:1},end:{type:Qs("0x2"),id:2}}},Element:{fields:{name:{type:Qs("0x1"),id:1},children:{rule:"repeated",type:Qs("0x0"),id:2},data:{type:Qs("0x1"),id:3},attributesBoolean:{keyType:Qs("0x1"),type:Qs("0x3"),id:4},attributesJson:{type:Qs("0x1"),id:5}}}};const er=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this};const sr=function(t){return this.__data__.has(t)};function rr(t){var e=-1,s=null==t?0:t.length;for(this.__data__=new Vt;++e<s;)this.add(t[e])}rr.prototype.add=rr.prototype.push=er,rr.prototype.has=sr;const nr=rr;const ir=function(t,e){for(var s=-1,r=null==t?0:t.length;++s<r;)if(e(t[s],s,t))return!0;return!1};const or=function(t,e){return t.has(e)};const ar=function(t,e,s,r,n,i){var o=1&s,a=t.length,c=e.length;if(a!=c&&!(o&&c>a))return!1;var u=i.get(t),d=i.get(e);if(u&&d)return u==e&&d==t;var l=-1,h=!0,f=2&s?new nr:void 0;for(i.set(t,e),i.set(e,t);++l<a;){var p=t[l],y=e[l];if(r)var m=o?r(y,p,l,e,t,i):r(p,y,l,t,e,i);if(void 0!==m){if(m)continue;h=!1;break}if(f){if(!ir(e,(function(t,e){if(!or(f,e)&&(p===t||n(p,t,s,r,i)))return f.push(e)}))){h=!1;break}}else if(p!==y&&!n(p,y,s,r,i)){h=!1;break}}return i.delete(t),i.delete(e),h};const cr=function(t){var e=-1,s=Array(t.size);return t.forEach((function(t,r){s[++e]=[r,t]})),s};const ur=function(t){var e=-1,s=Array(t.size);return t.forEach((function(t){s[++e]=t})),s};var dr=$?$.prototype:void 0,lr=dr?dr.valueOf:void 0;const hr=function(t,e,s,r,n,i,o){switch(s){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!i(new _s(t),new _s(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return R(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=cr;case"[object Set]":var c=1&r;if(a||(a=ur),t.size!=e.size&&!c)return!1;var u=o.get(t);if(u)return u==e;r|=2,o.set(t,e);var d=ar(a(t),a(e),r,n,i,o);return o.delete(t),d;case"[object Symbol]":if(lr)return lr.call(t)==lr.call(e)}return!1};var fr=Object.prototype.hasOwnProperty;const pr=function(t,e,s,r,n,i){var o=1&s,a=Qe(t),c=a.length;if(c!=Qe(e).length&&!o)return!1;for(var u=c;u--;){var d=a[u];if(!(o?d in e:fr.call(e,d)))return!1}var l=i.get(t),h=i.get(e);if(l&&h)return l==e&&h==t;var f=!0;i.set(t,e),i.set(e,t);for(var p=o;++u<c;){var y=t[d=a[u]],m=e[d];if(r)var v=o?r(m,y,d,e,t,i):r(y,m,d,t,e,i);if(!(void 0===v?y===m||n(y,m,s,r,i):v)){f=!1;break}p||(p="constructor"==d)}if(f&&!p){var x=t.constructor,_=e.constructor;x==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof x&&x instanceof x&&"function"==typeof _&&_ instanceof _||(f=!1)}return i.delete(t),i.delete(e),f};var yr="[object Arguments]",mr="[object Array]",vr="[object Object]",xr=Object.prototype.hasOwnProperty;const _r=function(t,e,s,r,n,i){var o=se(t),a=se(e),c=o?mr:ms(t),u=a?mr:ms(e),d=(c=c==yr?vr:c)==vr,l=(u=u==yr?vr:u)==vr,h=c==u;if(h&&ae(t)){if(!ae(e))return!1;o=!0,d=!1}if(h&&!d)return i||(i=new Ft),o||_e(t)?ar(t,e,s,r,n,i):hr(t,e,c,s,r,n,i);if(!(1&s)){var f=d&&xr.call(t,"__wrapped__"),p=l&&xr.call(e,"__wrapped__");if(f||p){var y=f?t.value():t,m=p?e.value():e;return i||(i=new Ft),n(y,m,s,r,i)}}return!!h&&(i||(i=new Ft),pr(t,e,s,r,n,i))};const gr=function t(e,s,r,n,i){return e===s||(null==e||null==s||!Kt(e)&&!Kt(s)?e!=e&&s!=s:_r(e,s,r,n,t,i))};const br=function(t,e){return gr(t,e)},wr=["root","path","nodes","rootGraveyard","main","$graveyard","rootMain"];var Or,Sr;Or=wr,Sr=163,function(t){for(;--t;)Or.push(Or.shift())}(++Sr);const Er=function(t,e){return wr[t-=0]};function kr(t,e){const s=Ls(t);return s[Er("0x6")][s[Er("0x6")].length-1]+=e,s}function Tr(t,e){return t.root===e[Er("0x5")]&&br(t[Er("0x6")],e.path)}function Cr(t){Ar(t,(t=>(Er("0x2")==t.root?(t[Er("0x4")]=!0,delete t[Er("0x5")]):Er("0x3")==t[Er("0x5")]&&(t.rootGraveyard=!0,delete t[Er("0x5")]),t)))}function Ir(t){Ar(t,(t=>(t[Er("0x4")]?(t[Er("0x5")]=Er("0x2"),delete t.rootMain):t[Er("0x1")]&&(t.root=Er("0x3"),delete t[Er("0x1")]),t)))}function Ar(t,e){for(const s in t){const r=t[s];Er("0x0")!==s&&rt(r)&&(r.path&&(r[Er("0x5")]||r[Er("0x4")]||r[Er("0x1")])?t[s]=e(r):Ar(r,e))}return t}const Rr=["shift","_protobufDescriptor","types","push","decompress","compress","buffers"];var Nr,jr;Nr=Rr,jr=131,function(t){for(;--t;)Nr.push(Nr.shift())}(++jr);const Pr=function(t,e){return Rr[t-=0]};class Dr{constructor(t,e,s){this.id=t,this.operationName=e,this._protobufDescriptor=s}[Pr("0x0")](t,e){const s=e[Pr("0x2")]();Cr(s),t.buffers[Pr("0x5")](this[Pr("0x3")].compress(s)),t[Pr("0x4")][Pr("0x5")](this.id)}decompress(t,e){e[Pr("0x4")][Pr("0x2")]();const s=this[Pr("0x3")][Pr("0x6")](e[Pr("0x1")].shift());Ir(s),s.__className=this.operationName,t[Pr("0x5")](s)}}const Mr=["bool","__className","decompress","compress","shift","string","parse","Json","newValue","description","types","Boolean","buffers","oldValue","push","operationName"];var Br,Jr;Br=Mr,Jr=489,function(t){for(;--t;)Br.push(Br.shift())}(++Jr);const Vr=function(t,e){return Mr[t-=0]};class Ur extends Dr{static get[Vr("0x0")](){return{fields:{range:{type:"Range",id:1},key:{type:"string",id:2},oldValueBoolean:{type:"bool",id:3},oldValueJson:{type:Vr("0xc"),id:4},newValueBoolean:{type:Vr("0x7"),id:5},newValueJson:{type:Vr("0xc"),id:6},wasUndone:{type:Vr("0x7"),id:7}}}}[Vr("0xa")](t,e){const s=e.shift();qr(Vr("0x4"),s),qr(Vr("0xf"),s),Cr(s),t[Vr("0x3")][Vr("0x5")](this._protobufDescriptor[Vr("0xa")](s)),t[Vr("0x1")][Vr("0x5")](this.id)}[Vr("0x9")](t,e){const{types:s,buffers:r}=e,n=this._protobufDescriptor.decompress(r[Vr("0xb")]());s.shift(),Fr("oldValue",n),Fr(Vr("0xf"),n),Ir(n),n[Vr("0x8")]=this[Vr("0x6")],t[Vr("0x5")](n)}}function qr(t,e){const s=e[t];"boolean"==typeof s?e[t+Vr("0x2")]=s:e[t+Vr("0xe")]=JSON.stringify(s)}function Fr(t,e){const s=t+"Json";e[s]?(e[t]=JSON[Vr("0xd")](e[s]),delete e[s]):(e[t]=e[t+"Boolean"],delete e[t+"Boolean"])}const Lr=["bool","push","compress","attributes","repeated","children","types","nodes","attributesBoolean","stringify","keys","every","decompress","parse","description","shift","__className","Position","attributesJson","operationName","_protobufDescriptor"];var Yr,Gr;Yr=Lr,Gr=176,function(t){for(;--t;)Yr.push(Yr.shift())}(++Gr);const zr=function(t,e){return Lr[t-=0]};class $r extends Dr{static get[zr("0x6")](){return{fields:{position:{type:zr("0x9"),id:1},nodes:{rule:zr("0x11"),type:"Element",id:2},shouldReceiveAttributes:{type:zr("0xd"),id:3},wasUndone:{type:zr("0xd"),id:4}}}}[zr("0xf")](t,e){const s=e[zr("0x7")]();Wr(s[zr("0x14")]),Cr(s),t.buffers[zr("0xe")](this[zr("0xc")].compress(s)),t[zr("0x13")].push(this.id)}[zr("0x4")](t,e){const{types:s,buffers:r}=e,n=this[zr("0xc")].decompress(r[zr("0x7")]());s.shift(),n[zr("0x14")]||(n.nodes=[]),Hr(n[zr("0x14")]),Ir(n),n[zr("0x8")]=this[zr("0xb")],t.push(n)}}function Wr(t){for(const e of t){if(e[zr("0x10")]){const t=e[zr("0x10")];Kr(t)?e[zr("0x0")]=t:e[zr("0xa")]=JSON[zr("0x1")](t)}e[zr("0x12")]&&Wr(e[zr("0x12")])}}function Hr(t){for(const e of t)(e[zr("0x0")]||e[zr("0xa")])&&(e[zr("0x0")]?(e[zr("0x10")]=e[zr("0x0")],delete e[zr("0x0")]):(e.attributes=JSON[zr("0x5")](e[zr("0xa")]),delete e.attributesJson)),e[zr("0x12")]&&Hr(e.children)}function Kr(t){return Object[zr("0x2")](t)[zr("0x3")]((e=>"boolean"==typeof t[e]))}const Zr=["oldRange","Range","bool","decompress","newRange","description"];var Xr,Qr;Xr=Zr,Qr=419,function(t){for(;--t;)Xr.push(Xr.shift())}(++Qr);const tn=function(t,e){return Zr[t-=0]};class en extends Dr{static get[tn("0x0")](){return{fields:{name:{type:"string",id:1},oldRange:{type:"Range",id:2},newRange:{type:tn("0x2"),id:3},affectsData:{type:"bool",id:4},wasUndone:{type:tn("0x3"),id:5}}}}[tn("0x4")](t,e){super.decompress(t,e);const s=t[t.length-1];s.oldRange||(s[tn("0x1")]=null),s[tn("0x5")]||(s[tn("0x5")]=null)}}var sn,rn,nn=["description","Position","bool"];sn=nn,rn=184,function(t){for(;--t;)sn.push(sn.shift())}(++rn);var on=function(t,e){return nn[t-=0]};class an extends Dr{static get[on("0x2")](){return{fields:{sourcePosition:{type:on("0x0"),id:1},targetPosition:{type:on("0x0"),id:2},graveyardPosition:{type:"Position",id:3},howMany:{type:"uint32",id:4},wasUndone:{type:on("0x1"),id:5}}}}}var cn,un,dn=["description","Position"];cn=dn,un=117,function(t){for(;--t;)cn.push(cn.shift())}(++un);var ln=function(t,e){return dn[t-=0]};class hn extends Dr{static get[ln("0x1")](){return{fields:{sourcePosition:{type:ln("0x0"),id:1},howMany:{type:"uint32",id:2},targetPosition:{type:ln("0x0"),id:3},wasUndone:{type:"bool",id:4}}}}}var fn,pn,yn=["Position","string","description"];fn=yn,pn=180,function(t){for(;--t;)fn.push(fn.shift())}(++pn);var mn=function(t,e){return yn[t-=0]};class vn extends Dr{static get[mn("0x2")](){return{fields:{position:{type:mn("0x0"),id:1},oldName:{type:mn("0x1"),id:2},newName:{type:mn("0x1"),id:3},wasUndone:{type:"bool",id:4}}}}}const xn=["description","fields","root"];var _n,gn;_n=xn,gn=211,function(t){for(;--t;)_n.push(_n.shift())}(++gn);const bn=function(t,e){return xn[t-=0]};class wn extends Ur{static get[bn("0x2")](){const t=Ur[bn("0x2")];return delete t[bn("0x0")].range,t[bn("0x0")][bn("0x1")]={type:"string",id:1},t}}var On,Sn,En=["uint32","description","bool","Position"];On=En,Sn=301,function(t){for(;--t;)On.push(On.shift())}(++Sn);var kn=function(t,e){return En[t-=0]};class Tn extends Dr{static get[kn("0x0")](){return{fields:{splitPosition:{type:kn("0x2"),id:1},graveyardPosition:{type:"Position",id:2},howMany:{type:kn("0x3"),id:3},insertionPosition:{type:"Position",id:4},wasUndone:{type:kn("0x1"),id:5}}}}}var Cn,In,An=["types","compress","shift","push"];Cn=An,In=345,function(t){for(;--t;)Cn.push(Cn.shift())}(++In);var Rn=function(t,e){return An[t-=0]};class Nn extends Dr{[Rn("0x0")](t,e){e[Rn("0x1")](),t[Rn("0x3")][Rn("0x2")](this.id)}decompress(t,e){e[Rn("0x3")][Rn("0x1")](),t.push({__className:this.operationName})}}const jn=["_omittedNamespace","decompress","startsWith","replace","__className","compress","name"];var Pn,Dn;Pn=jn,Dn=311,function(t){for(;--t;)Pn.push(Pn.shift())}(++Dn);const Mn=function(t,e){return jn[t-=0]};class Bn extends en{constructor(t,e,s,r){super(t,e,s),this._omittedNamespace=r+":"}[Mn("0x2")](t,e){return!("MarkerOperation"!=e[0][Mn("0x1")]||!e[0][Mn("0x3")][Mn("0x6")](this[Mn("0x4")])||(e[0][Mn("0x3")]=e[0][Mn("0x3")][Mn("0x0")](new RegExp("^"+this._omittedNamespace),""),super.compress(t,e),0))}decompress(t,e){super[Mn("0x5")](t,e);const s=t[t.length-1];s[Mn("0x3")]=this._omittedNamespace+s[Mn("0x3")]}}const Jn=["_compareOperations","length","_splitCurrent","_compressSingleOperation","shift","compress","push","_decompressSingleOperation","types","_combineNext","buffers","_context"];var Vn,Un;Vn=Jn,Un=454,function(t){for(;--t;)Vn.push(Vn.shift())}(++Un);const qn=function(t,e){return Jn[t-=0]};class Fn{constructor(t,e){this.id=t,this[qn("0x1")]=e}[qn("0x7")](t,e){let s;for(;e[qn("0x3")]>1&&this[qn("0x2")](e[0],e[1]);)s?(s=this[qn("0xb")](e[qn("0x6")](),s),t.types[qn("0x8")](0)):(s=Ls(e[qn("0x6")]()),t[qn("0xa")][qn("0x8")](this.id));return!!s&&(s=this._combineNext(e.shift(),s),t[qn("0xa")][qn("0x8")](0),t[qn("0x0")][qn("0x8")](this[qn("0x5")](s)),!0)}decompress(t,e){const s=this[qn("0x9")](e);for(;0==e[qn("0xa")][0];)e.types[qn("0x6")](),t.push(this[qn("0x4")](s));t[qn("0x8")](s)}}const Ln=["decompress","_compressSingleOperation","buffers","compress","every","wasUndone","_compareOperations","from","__className","data","keys","position","length","nodes","value","iterator","_splitCurrent","attributes","next","_context","InsertOperation"];var Yn,Gn;Yn=Ln,Gn=404,function(t){for(;--t;)Yn.push(Yn.shift())}(++Gn);const zn=function(t,e){return Ln[t-=0]};class $n extends Fn{_combineNext(t,e){return e.nodes[0].data+=t[zn("0x8")][0][zn("0x4")],e}[zn("0xb")](t){const e=Ls(t),s=e[zn("0x8")][0],r=t.nodes[0],n=r[zn("0x4")][Symbol[zn("0xa")]]()[zn("0xd")]()[zn("0x9")],i=n[zn("0x7")];return s.data=n,r[zn("0x4")]=r.data.substr(i),t.position=kr(t.position,i),e}[zn("0x1")](t,e){if(Wn(t)&&Wn(e)){const s=t[zn("0x8")][0][zn("0x4")].length,r=Tr(kr(t[zn("0x6")],s),e[zn("0x6")]),n=t[zn("0x8")][0],i=e[zn("0x8")][0];return r&&function(t,e){const s=Object[zn("0x5")](t[zn("0xc")]||{}),r=Object[zn("0x5")](e[zn("0xc")]||{});return s[zn("0x7")]===r[zn("0x7")]&&s[zn("0x14")]((s=>e[zn("0xc")][s]&&e[zn("0xc")][s]===t[zn("0xc")][s]))}(n,i)}return!1}[zn("0x11")](t){const e={types:[],buffers:[],baseVersion:0};return this[zn("0xe")]._getCompressorByName(zn("0xf"))[zn("0x13")](e,[t]),e[zn("0x12")][0]}_decompressSingleOperation(t){const e=[];return this[zn("0xe")]._getCompressorByName(zn("0xf"))[zn("0x10")](e,t),e[0]}}function Wn(t){return"InsertOperation"==t[zn("0x3")]&&1==t[zn("0x8")][zn("0x7")]&&t.nodes[0][zn("0x4")]&&!t[zn("0x0")]&&1==Array[zn("0x2")](t[zn("0x8")][0][zn("0x4")])[zn("0x7")]}const Hn=["$graveyard","_combineNext","howMany","_splitCurrent","_compressSingleOperation","_decompressSingleOperation","wasUndone","buffers","_context","_compareOperations","decompress","compress","sourcePosition","targetPosition","_getCompressorByName","root"];var Kn,Zn;Kn=Hn,Zn=448,function(t){for(;--t;)Kn.push(Kn.shift())}(++Zn);const Xn=function(t,e){return Hn[t-=0]};class Qn extends Fn{[Xn("0x1")](t,e){return e.howMany++,e[Xn("0xc")]=Ls(t[Xn("0xc")]),e}[Xn("0x3")](t){const e=Ls(t);return t[Xn("0x2")]--,e[Xn("0x2")]=1,e[Xn("0xc")]=kr(e[Xn("0xc")],t.howMany),e}[Xn("0x9")](t,e){return!(!ti(t)||!ti(e))&&Tr(kr(t[Xn("0xc")],-1),e[Xn("0xc")])&&Tr(t[Xn("0xd")],e[Xn("0xd")])}[Xn("0x4")](t){const e={types:[],buffers:[],baseVersion:0};return this[Xn("0x8")][Xn("0xe")]("MoveOperation")[Xn("0xb")](e,[t]),e[Xn("0x7")][0]}[Xn("0x5")](t){const e=[];return this._context[Xn("0xe")]("MoveOperation")[Xn("0xa")](e,t),e[0]}}function ti(t){return"MoveOperation"==t.__className&&Xn("0x0")==t[Xn("0xd")][Xn("0xf")]&&1==t[Xn("0x2")]&&!t[Xn("0x6")]}const ei=["_compareOperations","howMany","sourcePosition","buffers","wasUndone","_combineNext","decompress","_context","$graveyard","root","_splitCurrent","targetPosition","MoveOperation","compress","_getCompressorByName"];var si,ri;si=ei,ri=254,function(t){for(;--t;)si.push(si.shift())}(++ri);const ni=function(t,e){return ei[t-=0]};class ii extends Fn{[ni("0x6")](t,e){return e[ni("0x2")]++,e}[ni("0xb")](t){const e=Ls(t);return e[ni("0x2")]=1,t[ni("0x2")]--,e}[ni("0x1")](t,e){return!(!oi(t)||!oi(e))&&Tr(t[ni("0x3")],e[ni("0x3")])&&Tr(t.targetPosition,e[ni("0xc")])}_compressSingleOperation(t){const e={types:[],buffers:[],baseVersion:0};return this[ni("0x8")][ni("0x0")](ni("0xd"))[ni("0xe")](e,[t]),e[ni("0x4")][0]}_decompressSingleOperation(t){const e=[];return this[ni("0x8")][ni("0x0")](ni("0xd"))[ni("0x7")](e,t),e[0]}}function oi(t){return ni("0xd")==t.__className&&ni("0x9")==t[ni("0xc")][ni("0xa")]&&1==t.howMany&&!t[ni("0x5")]}const ai=["shift","split","start","end","user:","buffers","user:position:","_decompressSingleOperation","_context","toNone","MarkerOperation","types","_getCompressorByName","_compressSingleOperation","push","oldRange","compress","stickiness","startsWith","name","newRange","decompress"];var ci,ui;ci=ai,ui=279,function(t){for(;--t;)ci.push(ci.shift())}(++ui);const di=function(t,e){return ai[t-=0]};class li extends Fn{[di("0x1")](t,e){if(s=e[0],r=e[1],!(s&&r&&"MarkerOperation"==s.__className&&di("0x11")==r.__className&&s[di("0x4")][di("0x3")]("user:")&&r[di("0x4")].startsWith(di("0xb"))&&s[di("0x4")]!=r[di("0x4")]))return!1;var s,r;const n=e[di("0x7")]();return n[di("0x0")]=null,n.newRange&&Tr(n[di("0x5")][di("0x9")],n[di("0x5")][di("0xa")])&&(n.newRange[di("0xa")]=null),e[di("0x7")](),t[di("0x12")][di("0x15")](this.id),t.types[di("0x15")](0),t[di("0xc")].push(this[di("0x14")](n)),!0}decompress(t,e){const s=this._decompressSingleOperation(e);s.newRange&&!s.newRange[di("0xa")]&&(s[di("0x5")][di("0xa")]=Ls(s.newRange[di("0x9")]));const r=Ls(s);r.newRange&&(r[di("0x5")].start[di("0x2")]=di("0x10"),r[di("0x5")][di("0xa")]=Ls(r.newRange[di("0x9")])),r[di("0x4")]=di("0xd")+r.name[di("0x8")](":")[2],e.types.shift(),t.push(s),t[di("0x15")](r)}[di("0x14")](t){const e={types:[],buffers:[],baseVersion:0};return this[di("0xf")]._getCompressorByName("MarkerOperation")[di("0x1")](e,[t]),e[di("0xc")][0]}[di("0xe")](t){const e=[];return this[di("0xf")][di("0x13")](di("0x11"))[di("0x6")](e,t),e[0]}}const hi=["suggestion","description","set","AttributeOperation","Range","RootAttributeOperation","__className","build","InsertOperation","DeletingAction","_registerActionCompressor","SuggestionMarkerOperation","ForwardDeletingAction","forEach","_protobufFactory","compress","registerDescriptor","RenameOperation","types","NoOperation","MoveOperation","_compressorById","_registerOperationCompressor","_getCompressorByName","no-operations-provided","Element","_registerCompressor","baseVersion","TypingAction","MarkerOperation","get","_compressorByName","getDescriptor","SplitOperation","length","CommentMarkerOperation","MergeOperation"];var fi,pi;fi=hi,pi=404,function(t){for(;--t;)fi.push(fi.shift())}(++pi);const yi=function(t,e){return hi[t-=0]};class mi{constructor(){this[yi("0x18")]=new Map,this[yi("0x22")]=new Map,this._protobufFactory=new Ws,this[yi("0x11")][yi("0x13")]("Position",tr.Position),this._protobufFactory[yi("0x13")](yi("0x7"),tr[yi("0x7")]),this._protobufFactory[yi("0x13")](yi("0x1c"),tr.Element),this[yi("0x11")][yi("0x13")](yi("0x6"),Ur[yi("0x4")]),this[yi("0x11")].registerDescriptor(yi("0xb"),$r[yi("0x4")]),this[yi("0x11")][yi("0x13")]("MarkerOperation",en[yi("0x4")]),this[yi("0x11")][yi("0x13")](yi("0x2"),an.description),this[yi("0x11")].registerDescriptor(yi("0x17"),hn[yi("0x4")]),this[yi("0x11")].registerDescriptor(yi("0x14"),vn[yi("0x4")]),this[yi("0x11")].registerDescriptor(yi("0x8"),wn.description),this._protobufFactory[yi("0x13")](yi("0x24"),Tn[yi("0x4")]),this[yi("0x11")][yi("0xa")](),this[yi("0x1d")](1,yi("0x16"),new Nn(1,yi("0x16"))),this[yi("0x19")](10,yi("0x6"),Ur),this[yi("0x19")](11,yi("0xb"),$r),this[yi("0x19")](12,yi("0x20"),en),this[yi("0x19")](13,yi("0x2"),an),this[yi("0x19")](14,yi("0x17"),hn),this[yi("0x19")](15,yi("0x14"),vn),this[yi("0x19")](16,yi("0x8"),wn),this._registerOperationCompressor(17,yi("0x24"),Tn);const t=this._protobufFactory[yi("0x23")](yi("0x20"));this[yi("0x1d")](18,yi("0x1"),new Bn(18,yi("0x20"),t,"comment")),this[yi("0x1d")](19,yi("0xe"),new Bn(19,yi("0x20"),t,yi("0x3"))),this[yi("0xd")](100,yi("0x1f"),$n),this[yi("0xd")](101,yi("0xc"),Qn),this[yi("0xd")](102,yi("0xf"),ii),this[yi("0xd")](103,"UserSelectionAction",li)}_registerOperationCompressor(t,e,s){const r=new s(t,e,this[yi("0x11")].getDescriptor(e));this._registerCompressor(t,e,r)}[yi("0xd")](t,e,s){const r=new s(t,this);this[yi("0x1d")](t,e,r)}_registerCompressor(t,e,s){this[yi("0x18")][yi("0x5")](t,s),this[yi("0x22")][yi("0x5")](e,s)}[yi("0x1a")](t){return this._compressorByName[yi("0x21")](t)}[yi("0x12")](t){if(!t||!t[0])throw new e.CKEditorError(yi("0x1b"),this);const s={types:[],buffers:[],baseVersion:t[0].baseVersion};for(;t.length;)this[yi("0x1a")]("UserSelectionAction").compress(s,t)||this[yi("0x1a")](yi("0x1f"))[yi("0x12")](s,t)||this[yi("0x1a")]("DeletingAction")[yi("0x12")](s,t)||this[yi("0x1a")](yi("0xf")).compress(s,t)||this[yi("0x1a")](yi("0x1"))[yi("0x12")](s,t)||this[yi("0x1a")]("SuggestionMarkerOperation")[yi("0x12")](s,t)||this._getCompressorByName(t[0][yi("0x9")]).compress(s,t);return s}decompress(t){const e=[];for(;t.types[yi("0x0")];)this._compressorById[yi("0x21")](t[yi("0x15")][0]).decompress(e,t);return e[yi("0x10")](((e,s)=>e[yi("0x1e")]=t[yi("0x1e")]+s)),e}}var vi=__webpack_require__(7622),xi=__webpack_require__.n(vi),_i=__webpack_require__(7530),gi=__webpack_require__.n(_i);const bi=["enableReadOnlyMode","cloud-services-internal-error: Collaborative Editing Service is not connected.","The local document and server document differ and merging them can cause unexpected behavior. To not lose your content save it locally and refresh the editor.","enqueueChange","getUser","_handleInitialConnectionData","history","_isInit","editing","pluginName","_ignoredOperations","disconnected","init","The last saved version of the document does not match the local version. To not lose your content save it locally and refresh the editor.","_isDisconnection","removeFromReconnectionStack","_channelId","sessionAdd:","requires","data","_initThrowingOnDataSet","mySessionId","_sendBufferedOperationsDelayId","connect","_lastServerVersion","createPositionFromPath","_sendBufferedOperationsDelayed","reconnection: flushed session","userId","_lastSyncedOperationId","createPositionAt","showWarning","destroy","_hasSynchronizationProblem","getRoot","baseVersion","rtc-destroyed","rtc-offline","lastDocumentSession","CommentsOnly","offset","set","locale","has","_disconnectService","reset","config","_compressOperations","_currentBufferDelay","_sendBufferedOperations","affectsData","map","createdAt","view","fromJSON","_hasSelectionChanged","_compressor","_assignOperationsMetaData","suppressErrorInCollaboration","cs:removeUser","_updateServerHistory","_shouldSendSelectionUpdate","sessionId","code","collaboration","_isEditingAllowed","realtimecollaborationclient-editor-setdata-and-editor-data-set-are-forbidden-in-real-time-collaboration","The document cannot be connected back to the server. To not lose your content save it locally and refresh the editor.","_getOperationsFromInitData","_setUpDataInit","_authorId","connected","lastOperationId","isDocumentOperation","sessionCreatedAt","PENDING_ACTION_SENDING_DATA","_operationIdentifier","_fetchMissingUsers","_initSessionsHandling","addToReconnectionStack","reconnect","_connectService","getOperationAuthor","editor","message","setIdForTheLastOperation","_operationToId","The document details could not be taken during the reconnection. To not lose your content save it locally and refresh the editor.","_crash","channelSessions","from","_handleReconnectionResponse","marker","getIdOfTheLastOperation","setPermissions","length","disableReadOnlyMode","wasUndone","cloudServices.bundleVersion","_isPendingUpdate","unregister","getOperations","document:write","get","path","_baseBufferDelay","define","applyOperation","compress","add","high","_shouldSendUpdate","404","isEnabled","string","bind","stop","toJSON","_handleExternalOperations","_pendingAction","_applyOperationsSet","change:hasDomSelection","batch","realtimecollaborationclient-initservice-incorrect-server-operation","currentDocumentSession","push","_bufferedOperations","start","serverHistory","clone","wereChangesApplied","realtimecollaborationclient-init-non-existent-root","catch","metadata","error","_refreshUserSelectionMarkers","selection","plugins","version","createUserMarkerOperations","lastSyncVersion","ready","_clearPendingAction","remove","operationsReceived","lastOperationAcceptedAt","_isConnected","_handleSendingSelectionMarkers","document","initData","sendOperations","getDocumentDetails","realtimecollaborationclient-init-connection-failed","cloud-services-internal-error: Request timeout.","disconnect","_connectAfterSessionHasBeenFlushed","connection","round","_setPendingAction","_decompressOperations","markers","apply","realtimecollaborationclient-handleserverresponse","_knownOperations","_document","off","roots","_offset","_sendBufferedOperationsDelay","addOperation","decompress","forEach","then","_disconnectionOperations","startsWith","parse","cloud-services-internal-error: Not connected.","slice","isReadOnly","_service","includes","realtimecollaborationclient-sendbufferedoperations","_handleServerResponse","model","listenTo","type","_handleReconnectionError","getConnectedSessions","collaboration-missing-channelid","return","_handleReceivedOperations","CollaborativeEditingService","keys","filter","addUser","realtimecollaborationclient-initservice-internal-error"];var wi,Oi;wi=bi,Oi=193,function(t){for(;--t;)wi.push(wi.shift())}(++Oi);const Si=function(t,e){return bi[t-=0]};let Ei=1;class ki extends t.Plugin{static get[Si("0x15")](){return[l,m,E,t.PendingActions,n.Users,r.Notification]}static get[Si("0xc")](){return"RealTimeCollaborationClient"}get cloudDocumentVersion(){return this[Si("0x1b")]+this[Si("0xaa")]}get[Si("0x1b")](){return this[Si("0x83")][Si("0x8d")]-this._offset}get[Si("0x8f")](){const t=this.serverHistory[Si("0x68")]();for(let e=t.length-1;e>=0;e--){const s=t[e];if(!this[Si("0xb0")][Si("0x2e")](s))return s[Si("0x26")]+1-this[Si("0xaa")]}return 0}[Si("0xf")](){const t=this[Si("0x56")],r=t.plugins[Si("0x6a")](n.Users),i=t.plugins[Si("0x6a")](l);if(this[Si("0xaa")]=0,this[Si("0x41")]=null,this[Si("0x83")]=new s.History,this.editor.config[Si("0x6d")](Si("0x43"),{}),this[Si("0x13")]=t[Si("0x31")][Si("0x6a")]("collaboration.channelId"),!this._channelId)throw new e.CKEditorError(Si("0xbf"),this);this.listenTo(r,Si("0x55"),((t,e)=>{const s=e[0];s._authorId&&(t[Si("0xc0")]=r[Si("0x7")](s[Si("0x49")]),t[Si("0x77")]()),null===s[Si("0x49")]&&(t.return=null,t[Si("0x77")]())}),{priority:Si("0x71")});const o=t[Si("0x31")].get(Si("0x65"))||e.version;this[Si("0xb6")]=new(ki[Si("0xc2")])(o,this[Si("0x13")]),this._document=this[Si("0x56")].model[Si("0x97")],this[Si("0x3b")]=new mi,this[Si("0x81")]=[],this[Si("0xa6")]=new WeakSet,this[Si("0x2c")]("_isPendingUpdate",!1),this.set(Si("0x24"),!1),this[Si("0x7a")]=null,this[Si("0x3a")]=!1,this[Si("0x19")]=null,this[Si("0x6c")]=300,this[Si("0x33")]=this[Si("0x6c")],this[Si("0x20")]=null,this[Si("0xb0")]=new WeakSet,this[Si("0x4f")]=new Ii(this[Si("0xb0")]),this[Si("0xbb")](t[Si("0xba")][Si("0x97")][Si("0x8b")],"change:range",((t,e)=>{e.directChange&&this[Si("0x8a")]()})),this[Si("0xbb")](t[Si("0xb")][Si("0x38")],Si("0x7c"),(()=>{this[Si("0x8a")]()})),this[Si("0x17")](),t[Si("0x8c")][Si("0x6a")](l)[Si("0x52")](this),t.model.on(Si("0x6e"),((t,e)=>{const s=e[0];s[Si("0x4c")]&&(this._saveOperationInBuffer(s),this[Si("0x72")]()&&this[Si("0x1d")]())})),this[Si("0x48")](),this[Si("0x76")](Si("0x44")).to(i,"state",this,"_hasSynchronizationProblem",((t,e)=>Si("0x4a")===t&&!e)),this.on("change:_isEditingAllowed",(()=>{this[Si("0x44")]?t[Si("0x63")](Si("0x28")):t[Si("0x3")]("rtc-offline")})),this[Si("0x44")]?t[Si("0x63")](Si("0x28")):t[Si("0x3")](Si("0x28")),this[Si("0x2c")](Si("0x95"),!1)}async[Si("0x53")](){const t=this[Si("0x56")][Si("0x8c")][Si("0x6a")](m),e=this.editor[Si("0x8c")].get(l);try{this._isPendingUpdate=!0,t[Si("0x67")](this._channelId);const s=await this[Si("0xb6")][Si("0x53")](e[Si("0x9f")],this[Si("0x8f")]);await this[Si("0x5e")](s)&&(this[Si("0x66")]=!1,this[Si("0x91")]());const r=await this[Si("0xb6")][Si("0xbe")]();t.register(this[Si("0x13")],r),this[Si("0x96")](),this[Si("0x95")]=!0}catch(t){if(s=t,Si("0x73")===s.code&&this[Si("0x41")])await this[Si("0x9e")]();else if("409"===t[Si("0x42")]){const t=T(this[Si("0x56")][Si("0x2d")],Si("0x46"));this[Si("0xbd")](t)}else{if(!(t instanceof Ti))throw t;this[Si("0xbd")]()}}var s}destroy(){const t=this[Si("0x56")][Si("0x8c")][Si("0x6a")](l),e=this.editor[Si("0x8c")][Si("0x6a")](m);this.editor[Si("0x3")](Si("0x27")),e[Si("0x5c")][Si("0x2e")](this[Si("0x13")])&&e[Si("0x67")](this._channelId),t[Si("0x12")](this),this[Si("0x2f")](),super[Si("0x23")]()}async[Si("0x5e")](t){if(this[Si("0x41")]!==t[Si("0x41")]&&this[Si("0x20")]!==t[Si("0x4b")])throw new Ti;return this[Si("0x41")]=t[Si("0x41")],this[Si("0xb9")]([],{...t,wereChangesApplied:!1,data:t[Si("0x16")]},Si("0x53"))}async[Si("0x54")](t,e=!1){const{connection:s}=this[Si("0x56")][Si("0x8c")][Si("0x6a")](l);ki[Si("0xc2")].getConnectedSessions(s,this[Si("0x13")])[Si("0xaf")]((t=>this[Si("0x51")](t)))[Si("0x87")]((t=>{this[Si("0x5b")]("realtimecollaborationclient-init-session-connection-error",t)})),this[Si("0xbb")](this._service,Si("0x93"),this._handleReceivedOperations.bind(this)),this[Si("0xbb")](this[Si("0xb6")],Si("0x89"),((t,e)=>{this[Si("0x5b")](Si("0x2"),e)})),this[Si("0xbb")](this[Si("0xb6")],Si("0xe"),(()=>{this[Si("0x95")]=!1}));const r=this[Si("0x4f")][Si("0x60")](t),n=await this[Si("0xb6")][Si("0x1a")](s,this[Si("0x32")](t),r);if(this[Si("0x41")]=n.sessionId,n[Si("0x85")]&&(this[Si("0x66")]=!1,this[Si("0x91")]()),e){if(!n[Si("0x85")])return void this._handleReconnectionError();this[Si("0x83")][Si("0x30")](),this._offset=n[Si("0x2b")],this[Si("0x83")].version=this[Si("0xaa")],await this[Si("0xb9")](t,n,Si("0x1e"))}else await this[Si("0x8")](n,t);this._handleSendingSelectionMarkers(),this[Si("0x95")]=!0}[Si("0x96")](){const t=this[Si("0x56")][Si("0x8c")].get(m),e=t.channelSessions[Si("0x6a")](this[Si("0x13")]);e&&e[Si("0x62")]>1?(this._hasSelectionChanged=!0,this[Si("0x1d")]()):this[Si("0xbb")](t,Si("0x14")+this[Si("0x13")],(e=>{t[Si("0x5c")][Si("0x6a")](this[Si("0x13")])[Si("0x62")]>1&&(this[Si("0x3a")]=!0,this[Si("0x1d")](),e[Si("0xa8")]())}))}async[Si("0xc1")](t,e,s,r){if(!this[Si("0x66")]&&this[Si("0xa7")][Si("0x8d")]==e){const t=this[Si("0xa2")](s,r);await this[Si("0x50")](t),this[Si("0x79")](t,e,s[Si("0x4b")])||this._crash(Si("0x7e"))}}async[Si("0x9e")](){this._disconnectService();const{locale:t}=this.editor;let e;try{e=await this[Si("0xb6")][Si("0x9a")]()}catch(e){const s=T(t,Si("0x5a"));return void this[Si("0xbd")](s)}const s=e[Si("0x7f")]||e[Si("0x29")];if(this[Si("0x20")]===s.lastOperationId)await this[Si("0x54")](this[Si("0x56")][Si("0xba")][Si("0x97")].history.getOperations(),!0);else{const e=T(t,Si("0x10"));this._handleReconnectionError(e)}}[Si("0x2f")](){this[Si("0xb6")][Si("0x9d")](),this[Si("0x81")]=[],clearTimeout(this[Si("0xab")]),this.stopListening(this[Si("0xb6")])}_initSessionsHandling(t){const e=this.editor.plugins[Si("0x6a")](m);this[Si("0xbb")](e,Si("0x14")+this[Si("0x13")],((t,{session:s})=>{if(s.id===e[Si("0x18")]){t[Si("0xa8")]();const e=this[Si("0x56")][Si("0x8c")][Si("0x2e")](Si("0x2a"))&&this.editor[Si("0x8c")][Si("0x6a")](Si("0x2a"));let r=s.permissions;e&&e[Si("0x74")]&&(r=r[Si("0x0")]((t=>Si("0x69")!==t))),this.editor[Si("0x8c")].get("Permissions")[Si("0x61")](r,this[Si("0x13")])}})),e.register(this[Si("0x13")],t)}_initThrowingOnDataSet(){const t=this[Si("0x56")].data[Si("0x2c")];this[Si("0x56")][Si("0x16")][Si("0x2c")]=(...s)=>{if(!s[s.length-1][Si("0x3d")])throw new e.CKEditorError(Si("0x45"),this);t[Si("0xa4")](this[Si("0x56")][Si("0x16")],s)}}[Si("0x48")](){this[Si("0x56")][Si("0x16")].on(Si("0xf"),((t,[s])=>{if(this._document.version)throw new e.CKEditorError("realtimecollaborationclient-init-document-already-initialized",this);t.stop(),this[Si("0xa1")]();const r=this[Si("0x47")](s);t[Si("0xc0")]=this[Si("0x54")](r)[Si("0xaf")]((()=>{this[Si("0x56")][Si("0x16")].fire(Si("0x90"))}))[Si("0x87")]((t=>this[Si("0x5b")](Si("0x9b"),t))).finally((()=>this[Si("0x91")]()))}),{priority:"high"})}[Si("0x50")](t){const e=this.editor.plugins[Si("0x6a")](n.Users),{connection:s}=this.editor[Si("0x8c")][Si("0x6a")](l),r=new Set;for(const s of t)(i=s[Si("0x49")])&&!e[Si("0x7")](i)&&r[Si("0x70")](i);var i;return Promise.all(Array[Si("0x5d")](r,(async t=>{const r=await gi().get(s,t);e[Si("0x7")](t)||e[Si("0x1")](r)})))}[Si("0x47")](t){const r=this.editor[Si("0xba")],n=[];let i=0;const o=Si("0x75")==typeof t?{main:t}:t;for(const t of Object[Si("0xc3")](o)){if(!this._document[Si("0xa9")][Si("0x2e")](t))throw new e.CKEditorError(Si("0x86"),this);const a=this[Si("0x56")][Si("0x16")][Si("0xb2")](o[t]),c=this[Si("0xa7")][Si("0x25")](t),u=new s.InsertOperation(r[Si("0x21")](c,0),a,i++);n.push(u);for(const[t,e]of a.markers){const o=r.createRange(r[Si("0x1c")](c,e[Si("0x82")][Si("0x6b")][Si("0xb4")]()),r[Si("0x1c")](c,e.end[Si("0x6b")][Si("0xb4")]())),a=new s.MarkerOperation(t,null,o,r[Si("0xa3")],!0,i++);n[Si("0x80")](a)}}return n}async[Si("0x8")](t,e){let s;this[Si("0xaa")]=t.offset;const r=t[Si("0x85")]&&!t[Si("0x98")],n=r?0:t[Si("0x16")][Si("0x26")];if(r)s=e,s[Si("0xae")]((e=>{e[Si("0x37")]=t[Si("0x4d")],e._isInit=!0,e._authorId=null})),this[Si("0x7b")](s,r);else{if(t[Si("0x98")]){const e=this[Si("0x47")](t[Si("0x98")]);this._document[Si("0x9")][Si("0x8d")]=-e[Si("0x62")],e[Si("0xae")]((s=>{s.baseVersion-=e[Si("0x62")],s[Si("0x37")]=t[Si("0x4d")],s[Si("0xa")]=!0,s[Si("0x49")]=null})),this._applyOperationsSet(e,!0),this[Si("0x83")][Si("0x8d")]=-e[Si("0x62")]+this[Si("0xaa")],this[Si("0x3f")](e)}this[Si("0xa7")][Si("0x9")].version=n,s=this._decompressOperations(t.data,t[Si("0x88")]),await this[Si("0x50")](s),this[Si("0x7b")](s,r)}t[Si("0x4b")]&&(this[Si("0x4f")][Si("0x58")](s,t[Si("0x4b")]),this._lastSyncedOperationId=t[Si("0x4b")]),this[Si("0x83")][Si("0x8d")]=n+this[Si("0xaa")],this._updateServerHistory(s)}[Si("0x5b")](t,s){throw this[Si("0x66")]=!0,s&&console.error(s),new e.CKEditorError(t,this[Si("0x56")])}_saveOperationInBuffer(t){this._knownOperations[Si("0x2e")](t)||(this[Si("0xa6")].add(t),this[Si("0x81")][Si("0x80")](t),this._pendingAction||Si("0x5f")==t[Si("0xbc")]&&!t[Si("0x35")]||this._setPendingAction())}[Si("0x1d")](t=!1){!t&&this[Si("0x66")]||(this[Si("0x66")]=!0,clearTimeout(this[Si("0x19")]),this[Si("0x19")]=setTimeout((()=>{this._sendBufferedOperations().then((t=>{t&&(this[Si("0x91")](),this._isPendingUpdate=!1)})).catch((t=>{if(this[Si("0x91")](),this[Si("0x66")]=!1,!((e=t)[Si("0x57")][Si("0xb1")](Si("0xb3"))||e[Si("0x57")][Si("0xb1")](Si("0x4"))||e[Si("0x57")][Si("0xb1")](Si("0x9c"))))throw t;var e}))}),this[Si("0x33")]))}async[Si("0x34")](){const t=this[Si("0x56")][Si("0x8c")].get(E);if(this[Si("0x40")]()&&(t[Si("0x8e")](),this[Si("0x3a")]=!1),!this[Si("0x72")]())return!0;const e=[...this._bufferedOperations];for(const t of e)t[Si("0x64")]=this._document.history.isUndoneOperation(t);const s=this[Si("0x4f")][Si("0x60")](e),r=Ei++,n=this[Si("0x32")](e),i=await this[Si("0xb6")][Si("0x99")](n,n.baseVersion,s);try{return await this[Si("0xb9")](e,i,r)}catch(t){return this[Si("0x5b")](Si("0xb8"),t)}}async[Si("0xb9")](t,e,s){if(e[Si("0x89")])throw e.error;let r=!1;if(e.wereChangesApplied){e[Si("0x4b")]&&(this[Si("0x20")]=e[Si("0x4b")]),this[Si("0x81")]=this[Si("0x81")].filter((e=>!t[Si("0xb7")](e)));for(const s of t)s[Si("0x37")]=e[Si("0x94")];this[Si("0x3f")](t),r=!0,this[Si("0x33")]=this._baseBufferDelay}else{const t=this._decompressOperations(e[Si("0x16")],e.metadata).filter((t=>t.baseVersion>=this[Si("0x1b")]));await this._fetchMissingUsers(t),r=this[Si("0x79")](t,e.version,e[Si("0x4b")]),this[Si("0x33")]=Math[Si("0xa0")](this[Si("0x33")]/2)}return r?!this._shouldSendUpdate()||(this[Si("0x1d")](!0),!1):this[Si("0x5b")](Si("0xa5"))}[Si("0x79")](t,e,r){try{const n={document:this[Si("0xa7")],useRelations:!1,padWithNoOps:!0},{operationsA:i,operationsB:o,originalOperations:a}=(0,s.transformSets)(t,this[Si("0x81")],n);Ci(i,this._document.version),Ci(o,e);for(const t of i){const e=a[Si("0x6a")](t);t._authorId=e?e[Si("0x49")]:null}r&&(this[Si("0x4f")].setIdForTheLastOperation(t,r),this._lastSyncedOperationId=r),this[Si("0x81")]=[...o],this[Si("0x7b")](i),this._updateServerHistory(t)}catch(t){return console.error(t),!1}return!0}_applyOperationsSet(t,e=!1){this[Si("0x56")][Si("0xba")][Si("0x6")]({isUndoable:!1,isLocal:!1},(e=>{for(const s of t)this[Si("0xa6")].add(s),e[Si("0x7d")][Si("0xac")](s),this[Si("0x56")][Si("0xba")].applyOperation(s)}))}[Si("0x3f")](t){t.forEach((t=>{const e=t[Si("0x84")]();e._authorId=t._authorId,e[Si("0xa")]=!!t._isInit,e[Si("0x37")]=t.createdAt,e.baseVersion+=this[Si("0xaa")],t._isDisconnection&&this[Si("0xb0")].add(e),this.serverHistory[Si("0xac")](e)}))}[Si("0xbd")](t){const e=this[Si("0x56")][Si("0x8c")][Si("0x6a")]("Notification"),s=this[Si("0x56")][Si("0x2d")];t||(t=T(s,Si("0x5"))),e[Si("0x22")](t,{title:T(s,"Synchronization issue"),namespace:"real-time-collaboration"}),this[Si("0x24")]=!0,clearTimeout(this[Si("0x19")]),this[Si("0x81")]=[],this[Si("0x56")].plugins[Si("0x6a")](l).destroy()}[Si("0xa1")](){this[Si("0x7a")]||(this[Si("0x7a")]=this[Si("0x56")].plugins[Si("0x6a")](t.PendingActions)[Si("0x70")](T(this[Si("0x56")][Si("0x2d")],Si("0x4e"))))}[Si("0x91")](){this._pendingAction&&(this[Si("0x56")][Si("0x8c")][Si("0x6a")](t.PendingActions)[Si("0x92")](this[Si("0x7a")]),this[Si("0x7a")]=null)}[Si("0x32")](t){const e=t.map((t=>t[Si("0x78")]()));return this._compressor[Si("0x6f")](e)}[Si("0xa2")](t,e){const r=this[Si("0x3b")][Si("0xad")](t)[Si("0x36")](((t,r)=>{const n=s.OperationFactory[Si("0x39")](t,this[Si("0xa7")]);return n[Si("0x64")]=t[Si("0x64")],Si("0x3e")===e[r].type&&(n[Si("0x11")]=!0),n}));return this[Si("0x3c")](r,e),r}[Si("0x3c")](t,e){for(let s=0;s<t[Si("0x62")];s++)Si("0xf")==e[s][Si("0xbc")]?(t[s][Si("0xa")]=!0,t[s][Si("0x49")]=null):(t[s][Si("0xa")]=!1,t[s][Si("0x49")]=e[s][Si("0x1f")]),t[s].createdAt=e[s][Si("0x37")]}_refreshUserSelectionMarkers(){this[Si("0x3a")]=!0,this._shouldSendSelectionUpdate()&&this[Si("0x1d")]()}[Si("0x40")](){const t=this[Si("0x56")].plugins[Si("0x6a")](m)[Si("0x5c")][Si("0x6a")](this[Si("0x13")]);return!this[Si("0x56")][Si("0xb5")]&&t&&t[Si("0x62")]>1&&this[Si("0x3a")]}[Si("0x72")](){return this[Si("0x81")].length>0||this._shouldSendSelectionUpdate()}}class Ti extends Error{}function Ci(t,e){for(const s of t)s[Si("0x26")]=e++}ki[Si("0xc2")]=xi();class Ii{constructor(t){this._ignoredOperations=t,this[Si("0x59")]=new WeakMap}[Si("0x60")](t){let s=t.length;for(;s--;){const r=t[s];if(!this[Si("0xd")].has(r)){if(!this[Si("0x59")].has(r)){const t=(0,e.uid)()[Si("0xb4")](1,18);this[Si("0x59")][Si("0x2c")](r,t)}return this[Si("0x59")].get(r)}}}setIdForTheLastOperation(t,e){if(!e)return;let s=t[Si("0x62")];for(;s--;){const r=t[s];this[Si("0xd")].has(r)||this._operationToId[Si("0x2c")](r,e)}}}var Ai,Ri,Ni=["requires","RealTimeCollaborativeEditing"];Ai=Ni,Ri=195,function(t){for(;--t;)Ai.push(Ai.shift())}(++Ri);var ji=function(t,e){return Ni[t-=0]};class Pi extends t.Plugin{static get[ji("0x1")](){return[ki]}static get pluginName(){return ji("0x0")}}var Di=__webpack_require__(125),Mi=__webpack_require__.n(Di),Bi=__webpack_require__(6042),Ji=__webpack_require__.n(Bi);const Vi=["delete","getComment","CommentsRepository","_connectService","_fetchMissingUsersForThreads","_terminateService","userId","message","Permissions","attributes","init","permissions","get","_setUpService","update","set","getConnectedSessions","config","listenTo","_services","addComment","hasCommentThread","has","startsWith","context","code","getCommentThread","_getService","CommentsService","removeCommentThread","commentUpdated","register","reconnect","collaboration.channelId","mySessionId","destroy","from","cloud-services-internal-error: Not connected.","plugins","createdAt","addUser","commentAdded","catch","connect","removeComment","commentId","commentThreadId","setPermissions","remove","keys","unregister","getCommentThreads","content","404","cloudservicescommentsadapter-connect-already-connected","off","comments","getUser","sessionAdd:","commentThreadRemoved","addCommentThread","add"];var Ui,qi;Ui=Vi,qi=336,function(t){for(;--t;)Ui.push(Ui.shift())}(++qi);const Fi=function(t,e){return Vi[t-=0]};class Li extends t.ContextPlugin{static get requires(){return[l,"CommentsRepository",m,n.Users]}constructor(t){super(t),this._services=new Map}async[Fi("0x2e")](){const e=this[Fi("0x3c")],s=e[Fi("0xc")][Fi("0x30")]("CommentsRepository");if(e[Fi("0xc")][Fi("0x30")](l).addToReconnectionStack(this),s.adapter={getCommentThread:async({channelId:t,threadId:e})=>{const s=await this._getService(t)[Fi("0x0")](e).catch(Gi);return await this[Fi("0x28")]([s]),{threadId:s[Fi("0x14")],comments:s.comments.map(zi)}},removeCommentThread:({channelId:t,threadId:e})=>this[Fi("0x1")](t)[Fi("0x3")](e)[Fi("0x10")](Yi)[Fi("0x10")](Gi),addComment:({channelId:t,threadId:e,commentId:s,content:r,attributes:n})=>this[Fi("0x1")](t)[Fi("0x38")](e,s,r,n)[Fi("0x10")](Gi),updateComment:({channelId:t,threadId:e,commentId:s,content:r,attributes:n})=>this._getService(t).updateComment(e,s,r,n)[Fi("0x10")](Yi)[Fi("0x10")](Gi),removeComment:({channelId:t,threadId:e,commentId:s})=>this[Fi("0x1")](t)[Fi("0x12")](e,s)[Fi("0x10")](Yi)[Fi("0x10")](Gi)},e instanceof t.Context){const t=e.config[Fi("0x30")]("collaboration.channelId"),s=e[Fi("0xc")][Fi("0x30")](m);await this[Fi("0x31")](t);const r=await this[Fi("0x37")].get(t)[Fi("0x34")]();this.listenTo(s,Fi("0x20")+t,((e,{session:r})=>{r.id===s[Fi("0x8")]&&(e[Fi("0x1d")](),this[Fi("0x3c")][Fi("0xc")][Fi("0x30")](Fi("0x2c"))[Fi("0x15")](r[Fi("0x2f")],t))})),s[Fi("0x5")](t,r)}}async _setUpService(t){if(this[Fi("0x37")][Fi("0x3a")](t))throw new e.CKEditorError(Fi("0x1c"),null,{channelId:t});const s=this[Fi("0x3c")][Fi("0xc")][Fi("0x30")]("CommentsRepository"),r=new(Li[Fi("0x2")])(t);this[Fi("0x37")][Fi("0x33")](t,r),this[Fi("0x36")](r,Fi("0x21"),((t,{commentThreadId:e})=>{const r=s[Fi("0x0")](e);r&&r[Fi("0x16")]({isFromAdapter:!0})})),this[Fi("0x36")](r,Fi("0xf"),((e,r)=>{const n=r[Fi("0x14")];s[Fi("0x39")](n)||s[Fi("0x22")]({channelId:t,threadId:n,isFromAdapter:!0});const i=s.getCommentThread(n);i&&i[Fi("0x38")](Object.assign(zi(r),{isFromAdapter:!0}))})),this[Fi("0x36")](r,Fi("0x4"),((t,{commentThreadId:e,commentId:r,content:n,attributes:i})=>{const o=s[Fi("0x0")](e);if(o){const t=o[Fi("0x25")](r);t&&t[Fi("0x32")]({content:n,attributes:i,isFromAdapter:!0})}})),this[Fi("0x36")](r,"commentRemoved",((t,{commentThreadId:e,commentId:r})=>{const n=s[Fi("0x0")](e);if(n){const t=n[Fi("0x25")](r);t&&t[Fi("0x16")]({isFromAdapter:!0})}})),await this[Fi("0x27")](t)}[Fi("0x9")](){if(this[Fi("0x3c")]instanceof t.Context){const t=this[Fi("0x3c")][Fi("0x35")][Fi("0x30")](Fi("0x7"));this._terminateService(t)}}[Fi("0x29")](t){if(!this[Fi("0x37")][Fi("0x3a")](t))throw new e.CKEditorError("cloudservicescommentsadapter-disconnect-not-exist",null,{channelId:t});this[Fi("0x1")](t).disconnect(),this[Fi("0x37")].delete(t)}async[Fi("0x6")](){for(const t of this._services[Fi("0x17")]())await this[Fi("0x27")](t);if(this[Fi("0x3c")]instanceof t.Context){const t=this.context[Fi("0x35")][Fi("0x30")](Fi("0x7")),e=this[Fi("0x3c")].plugins[Fi("0x30")](m);e[Fi("0x18")](t);const s=await this[Fi("0x37")][Fi("0x30")](t).getConnectedSessions();e[Fi("0x5")](t,s)}}async[Fi("0x27")](t){const{connection:e}=this[Fi("0x3c")][Fi("0xc")][Fi("0x30")](l),s=this.context[Fi("0xc")][Fi("0x30")](Fi("0x26")),r=this[Fi("0x37")][Fi("0x30")](t),n=await r[Fi("0x11")](e);await this._fetchMissingUsersForThreads(n);const i=new Set(Array[Fi("0xa")](s[Fi("0x19")]({channelId:t}),(t=>t.id)));for(const t of n)i[Fi("0x24")](t.commentThreadId);for(const t of i)s[Fi("0x0")](t)[Fi("0x16")]({isFromAdapter:!0});for(const e of n){let r=s[Fi("0x0")](e[Fi("0x14")]);r||(r=s[Fi("0x22")]({channelId:t,threadId:e[Fi("0x14")],isFromAdapter:!0}));const n=new Set(Array[Fi("0xa")](r.comments,(t=>t.id)));for(const t of e[Fi("0x1e")])n[Fi("0x24")](t[Fi("0x13")]);for(const t of n)r[Fi("0x25")](t).remove({isFromAdapter:!0});for(const t of e[Fi("0x1e")]){const e=r[Fi("0x25")](t[Fi("0x13")]);e?e[Fi("0x1a")]!==t[Fi("0x1a")]&&e[Fi("0x32")]({content:t.content,isFromAdapter:!0}):r[Fi("0x38")](Object.assign(zi(t),{isFromAdapter:!0}))}}}[Fi("0x1")](t){if(!this[Fi("0x37")][Fi("0x3a")](t))throw new e.CKEditorError("cloudservicescommentsadapter-service-not-exist",null,{channelId:t});return this[Fi("0x37")][Fi("0x30")](t)}[Fi("0x28")](t){const e=this[Fi("0x3c")][Fi("0xc")][Fi("0x30")](n.Users),{connection:s}=this[Fi("0x3c")].plugins[Fi("0x30")](l),r=new Set;for(const{comments:s}of t)for(const{userId:t}of s)e[Fi("0x1f")](t)||r[Fi("0x23")](t);return Promise.all(Array[Fi("0xa")](r,(async t=>{const r=await gi().get(s,t);e[Fi("0x1f")](t)||e[Fi("0xe")](r)})))}}async function Yi(t){if(Fi("0x1b")!==t[Fi("0x3d")])throw t}function Gi(t){if((e=t)[Fi("0x2b")][Fi("0x3b")]("cloud-services-internal-error: Comments Service is not connected.")||e[Fi("0x2b")].startsWith(Fi("0xb"))||e[Fi("0x2b")][Fi("0x3b")]("cloud-services-internal-error: Request timeout."))return new Promise((()=>{}));var e;throw t}function zi(t){return{threadId:t[Fi("0x14")],commentId:t[Fi("0x13")],content:t[Fi("0x1a")],createdAt:t[Fi("0xd")],authorId:t[Fi("0x2a")],attributes:t[Fi("0x2d")]}}Li[Fi("0x2")]=Ji();const $i=["delete","adapter","catch","listenTo","TrackChangesService","off","startsWith","suggestionUpdated","TrackChangesEditing","add","_waitForServiceReady","from","_saved","all","attributes","connect","_trackChangesService","values","_bufferedRequests","reconnect","cloud-services-internal-error: Request timeout.","update","init","then","plugins","state","hasSuggestion","find","connection","editor","_fetchMissingUsersForThreads","cloud-services-internal-error: Not connected.","connected","originalSuggestionId","addSuggestionData","open","getUser","get"];var Wi,Hi;Wi=$i,Hi=321,function(t){for(;--t;)Wi.push(Wi.shift())}(++Hi);const Ki=function(t,e){return $i[t-=0]};class Zi extends t.Plugin{static get requires(){return[Li,"TrackChangesEditing",l]}constructor(t){super(t),this[Ki("0x1")]=new Map}[Ki("0x5")](){const t=this[Ki("0xc")][Ki("0x7")].get(l),e=this[Ki("0xc")][Ki("0x7")][Ki("0x14")](Ki("0x1d")),s=this[Ki("0xc")].config[Ki("0x14")]("collaboration.channelId");return t.addToReconnectionStack(this),this[Ki("0x25")]=new(Zi[Ki("0x19")])(s),e[Ki("0x16")]={getSuggestion:async t=>{await this[Ki("0x1f")]();const e=await this._trackChangesService[Ki("0x14")](t)[Ki("0x17")](Xi);return await this[Ki("0xd")]([e]),e},addSuggestion:async({id:t,type:e,data:s,originalSuggestionId:r,attributes:n})=>{await this[Ki("0x1f")]();const i={id:t,type:e,data:s,originalSuggestionId:r,attributes:n},o=await this[Ki("0x25")].add(t,e,s,r,n)[Ki("0x17")]((e=>{if(Qi(e))return new Promise((e=>{this[Ki("0x1")].set(t,{resolve:e,suggestionData:i})}));throw e}));return this[Ki("0x1")][Ki("0x15")](t),o},updateSuggestion:async(t,e)=>{if(await this[Ki("0x1f")](),Ki("0x12")!==e[Ki("0x8")])return this._trackChangesService[Ki("0x4")](t,e)[Ki("0x17")](Xi)}},this[Ki("0x18")](this[Ki("0x25")],Ki("0x1c"),((t,s)=>{e[Ki("0x9")](s.id)&&(e.getSuggestion(s.id)[Ki("0x23")]=s[Ki("0x23")])})),this._trackChangesService[Ki("0x24")](t[Ki("0xb")])[Ki("0x6")]((t=>this._fetchMissingUsersForThreads(t)[Ki("0x6")]((()=>{for(const s of t)e[Ki("0x11")](s)[Ki("0x21")]=!0}))))}async[Ki("0x2")](){const t=this.editor[Ki("0x7")][Ki("0x14")]("TrackChangesEditing"),{connection:e}=this[Ki("0xc")].plugins[Ki("0x14")](l),s=await this[Ki("0x25")][Ki("0x24")](e);await this[Ki("0xd")](s);for(const{suggestionData:t,resolve:e}of this._bufferedRequests[Ki("0x0")]()){let r=s[Ki("0xa")]((e=>e.id===t.id));r||(r=await this[Ki("0x25")][Ki("0x1e")](t.id,t.type,t.data,t[Ki("0x10")])),e(r)}for(const e of s)t[Ki("0x9")](e.id)||t[Ki("0x11")](e)}async[Ki("0x1f")](){this[Ki("0x25")].isConnected||await new Promise((t=>{this[Ki("0x18")](this._trackChangesService,Ki("0xf"),(e=>{e[Ki("0x1a")](),t()}))}))}[Ki("0xd")](t){const e=this[Ki("0xc")].plugins[Ki("0x14")](n.Users),{connection:s}=this.editor[Ki("0x7")][Ki("0x14")](l),r=new Set;for(const{authorId:s}of t)e[Ki("0x13")](s)||r[Ki("0x1e")](s);return Promise[Ki("0x22")](Array[Ki("0x20")](r).map((t=>gi().get(s,t)[Ki("0x6")]((s=>{e.getUser(t)||e.addUser(s)})))))}}function Xi(t){if(Qi(t))return new Promise((()=>{}));throw t}function Qi(t){return t.message[Ki("0x1b")](Ki("0xe"))||t.message[Ki("0x1b")](Ki("0x3"))}Zi[Ki("0x19")]=Mi();const to=["listenTo","RealTimeCollaborativeComments","isThreadsLoadingPaused","pluginName","collaboration.channelId","connected","CommentsEditing","change:state","data","requires","destroy","plugins","_setUpService","config","editor","get","init","CommentsRepository"];var eo,so;eo=to,so=331,function(t){for(;--t;)eo.push(eo.shift())}(++so);const ro=function(t,e){return to[t-=0]};class no extends t.Plugin{static get[ro("0x2")](){return["Comments",Li,Pi,l]}static get[ro("0xe")](){return ro("0xc")}[ro("0x9")](){const t=this[ro("0x7")][ro("0x4")][ro("0x8")](l),e=this.editor[ro("0x4")][ro("0x8")](ro("0x11")),s=this.editor.plugins[ro("0x8")](Li);return this[ro("0x7")][ro("0x1")].once("ready",(()=>{this[ro("0xb")](t,ro("0x0"),((t,s,r)=>{e[ro("0xd")]="connected"!==r}))})),this[ro("0xb")](t,ro("0x0"),((t,e,s)=>{this[ro("0x7")][ro("0x4")].get(ro("0xa")).switchReadOnly(ro("0x10")!==s)})),s[ro("0x5")](this[ro("0x7")][ro("0x6")][ro("0x8")](ro("0xf")))}[ro("0x3")](){this[ro("0x7")].plugins[ro("0x8")](Li)._terminateService(this.editor[ro("0x6")][ro("0x8")](ro("0xf"))),super[ro("0x3")]()}}var io,oo,ao=["TrackChanges","RealTimeCollaborativeTrackChanges"];io=ao,oo=458,function(t){for(;--t;)io.push(io.shift())}(++oo);var co=function(t,e){return ao[t-=0]};class uo extends t.Plugin{static get requires(){return[no,Zi,co("0x0")]}static get pluginName(){return co("0x1")}}var lo=__webpack_require__(8811),ho=__webpack_require__.n(lo),fo=__webpack_require__(8689),po=__webpack_require__.n(fo);const yo=["change:_isConnected","_revisionTracker","_waitForServiceReady","setSource","off","authorsIds","400","affectsData","has","map","repository","config","buildRevisionData","cloud-services-internal-error: Revision History Service is not connected.","all","baseVersion","getRevisions","editor","addRevisionData","_getLatestVersionFromServerOperations","message","authors","startsWith","_getLatestVersion","updateRevisions","init","_offset","Users","stopListening","change:_isPendingUpdate","creatorId","code","destroy","plugins","getOperations","cloud-services-internal-error: Request timeout.","connection","getRevision","cloudServices.bundleVersion","_oldOffset","listenTo","state","_update","_handleRevisionsUpdate","connected","diffData","RevisionHistoryService","keys","addUser","reconnect","set","then","_createCurrentRevision","isEnabled","catch","_lastRequestId","currentRevision","toVersion","reInit","type","get","isBundleUploaded","isEmptyCurrent","_bufferUpdate","filter","_isPendingUpdate","reverse","remove","_preventResendingRevisionData","addToReconnectionStack","serverHistory","max","RevisionTracker","fromVersion","bind","length","_fetchMissingUsers","revisionHistory.resumeUnsavedRevision","sessionId","add","_revisionHistoryService","_domEmitter","getUser","_fixRevision","createdAt"];var mo,vo;mo=yo,vo=402,function(t){for(;--t;)mo.push(mo.shift())}(++vo);const xo=function(t,e){return yo[t-=0]};class _o extends t.Plugin{static get requires(){return[l,ki,xo("0xa"),m,n.Users]}async[xo("0x30")](){this._lastRequestId=null,this[xo("0x18")]=this.editor[xo("0x38")].get(xo("0xa"));const t=this.editor.plugins.get(ki),s=t.serverHistory,r=this.editor[xo("0x38")].get(l);r[xo("0x7")](this);const n=this.editor.config.get("collaboration.channelId");this[xo("0x12")]=new(_o[xo("0x45")])(n),this[xo("0x18")][xo("0x1a")]({history:s,getLatestVersion:()=>this[xo("0x2e")](),getCurrentRevisionId:()=>t[xo("0x10")]});const i=this.editor[xo("0x22")].get(xo("0x3d"))||e.version,o=await po()[xo("0x54")](r[xo("0x3b")],i);o&&this[xo("0x28")][xo("0x22")][xo("0x49")](xo("0xf"),!1),this[xo("0x18")].adapter={getRevision:async({revisionId:t})=>(await this[xo("0x19")](),await this._revisionHistoryService[xo("0x3c")](t)),updateRevisions:async t=>{await this[xo("0x19")]();const e=this[xo("0x18")][xo("0x4f")];if(o){if(0===(t=t[xo("0x2")]((t=>t.id!==e.id))).length)return}else for(const s of t)s.id===e.id&&(s[xo("0x0")]=s.fromVersion===s[xo("0x50")]);return this[xo("0x12")][xo("0x2f")](t,this[xo("0x4e")])[xo("0x4a")]((t=>{this[xo("0x4e")]=t}))[xo("0x4d")]((e=>{if(!(go(e)||xo("0x1d")===e[xo("0x36")]&&void 0!==e.data.wrongRequestId))throw e;for(const e of t)!this._revisionTracker[xo("0x21")][xo("0x3c")](e.id)||this._revisionTracker[xo("0x1")](e.id,e,!1);if(go(e))throw e}))}},this[xo("0x3f")](this._revisionHistoryService,"revisionsUpdated",((t,{revisionsData:e,requestId:s})=>{Math[xo("0x9")](...e.map((t=>t[xo("0x50")])))>this[xo("0x2a")]()-1?this[xo("0x2e")]()[xo("0x4a")]((()=>{this[xo("0x42")](e,s)})):this[xo("0x42")](e,s)}));const{revisions:a,requestId:c}=await this[xo("0x12")].connect(r[xo("0x3b")]);this[xo("0x4e")]=c,await this[xo("0xe")](a);for(const t of a)this._revisionTracker[xo("0x29")](t);this[xo("0x3f")](t,xo("0x17"),((e,s,r)=>{r&&(this._oldOffset=t[xo("0x31")],e[xo("0x1b")]())})),this[xo("0x18")][xo("0xc")](xo("0x4c")).to(r,xo("0x40"),(t=>xo("0x43")===t))}async[xo("0x48")](){const t=this[xo("0x28")][xo("0x38")][xo("0x53")](l),e=this[xo("0x28")][xo("0x38")][xo("0x53")](ki),s=async()=>{const s=this[xo("0x18")][xo("0x4f")],r=s.id,n=r!==e.sessionId;if(n){const t=e[xo("0x31")]-this[xo("0x3e")],n=this[xo("0x2a")]();if(this[xo("0x18")]._revisionDataBuilder[xo("0x51")](),s[xo("0x50")]+t!==n){const e=s[xo("0xb")]+t,r=this.editor[xo("0x38")][xo("0x53")]("Users"),i=this[xo("0x18")].buildRevisionData({currentRevision:s,from:e,to:n});i.id=s.id;const o=i[xo("0x1c")][xo("0x20")]((t=>r[xo("0x14")](t)));s._update({...i,authors:o},!0),this._revisionTracker[xo("0x1")](s.id,i,!0)}this._revisionTracker._startingVersion=n,s.toVersion===s[xo("0xb")]&&!this[xo("0x18")]._bufferedUpdates[xo("0x1f")](r)&&this._revisionTracker[xo("0x21")]._revisions[xo("0x5")](r),this[xo("0x18")][xo("0x4b")](n)}const{revisions:i,requestId:o}=await this[xo("0x12")][xo("0x48")](t[xo("0x3b")],this._lastRequestId);n&&i[xo("0xd")]>0?e._handleReconnectionError():(await this[xo("0xe")](i),this._handleRevisionsUpdate(i,o),this._revisionTracker.sendBufferedUpdates())};return e._isConnected?s():new Promise(((t,r)=>{e.once("change:_isConnected",(()=>{s().then(t)[xo("0x4d")](r)}))}))}[xo("0x37")](){this[xo("0x13")]&&this[xo("0x13")][xo("0x33")](),super.destroy()}async _waitForServiceReady(){this[xo("0x12")].isConnected||await new Promise((t=>{this[xo("0x3f")](this._revisionHistoryService,"connected",(e=>{e[xo("0x1b")](),t()}))}))}[xo("0x2a")](){const t=this[xo("0x28")][xo("0x38")].get(ki)[xo("0x8")];for(const e of t[xo("0x39")]().reverse())if("marker"!==e[xo("0x52")]||e[xo("0x1e")])return e[xo("0x26")]+1}[xo("0x2e")](){const t=this[xo("0x28")][xo("0x38")][xo("0x53")](ki);return new Promise((e=>{t[xo("0x3")]?t.once(xo("0x34"),(()=>{e(this[xo("0x2a")]())})):e(this[xo("0x2a")]())}))}[xo("0x42")](t,e){const s=this[xo("0x18")][xo("0x21")];this[xo("0x4e")]=e;for(const e of t){const t=s[xo("0x3c")](e.id);if(t){if((e[xo("0xb")]||e[xo("0x50")])&&(e[xo("0x44")]=null),t===this._revisionTracker[xo("0x4f")]){const s=Math.max(t.toVersion,e[xo("0x50")]),r=Math[xo("0x9")](t.fromVersion,e.fromVersion);let n;t[xo("0x50")]===e[xo("0x50")]&&t.fromVersion===e.fromVersion?(n=!0,this._preventResendingRevisionData(e)):e.toVersion===s&&e[xo("0xb")]===r?n=!1:(t[xo("0x50")]===s&&t.fromVersion===r||this[xo("0x15")]({revision:t,from:r,to:s}),n=!0),n&&(delete e[xo("0xb")],delete e[xo("0x50")],delete e[xo("0x44")],delete e[xo("0x16")],delete e.authorsIds)}this[xo("0x18")].setRevisionData(e),this[xo("0x6")](e)}else this[xo("0x18")][xo("0x29")](e)}const r=s[xo("0x27")]();r[xo("0x4")]();for(let t=0;t<r.length-1;t++){const e=r[t],s=r[t+1];if(e[xo("0xb")]<s.toVersion){const t=s[xo("0x50")],r=Math[xo("0x9")](t,e[xo("0x50")]);this[xo("0x15")]({revision:e,from:t,to:r})}}}[xo("0x15")]({revision:t,from:e,to:s}={}){const r=this[xo("0x28")][xo("0x38")][xo("0x53")](xo("0x32")),n=this[xo("0x18")][xo("0x23")]({revision:t,from:e,to:s});n[xo("0x2c")]=n.authorsIds[xo("0x20")]((t=>r[xo("0x14")](t))),t[xo("0x41")](n)}[xo("0x6")](t){const e={};e.id=t.id;for(const s of Object[xo("0x46")](t))"id"!==s&&(e[s]=void 0);this._revisionTracker[xo("0x1")](e.id,e,!0)}[xo("0xe")](t){const e=this.editor[xo("0x38")].get(n.Users),{connection:s}=this[xo("0x28")][xo("0x38")][xo("0x53")](l),r=new Set;for(const e of t){for(const t of e[xo("0x1c")])i(t);e[xo("0x35")]&&i(e.creatorId)}return Promise[xo("0x25")](Array.from(r,(async t=>{const r=await gi()[xo("0x53")](s,t);e.getUser(t)||e[xo("0x47")](r)})));function i(t){e[xo("0x14")](t)||r[xo("0x11")](t)}}}function go(t){return t[xo("0x2b")][xo("0x2d")](xo("0x24"))||t.message[xo("0x2d")]("cloud-services-internal-error: Not connected.")||t.message.startsWith(xo("0x3a"))}_o.RevisionHistoryService=ho();var bo,wo,Oo=["pluginName","RealTimeCollaborativeRevisionHistory","RevisionHistory"];bo=Oo,wo=303,function(t){for(;--t;)bo.push(bo.shift())}(++wo);var So=function(t,e){return Oo[t-=0]};class Eo extends t.Plugin{static get requires(){return[So("0x2"),_o,Pi]}static get[So("0x0")](){return So("0x1")}}var ko=Function.prototype,To=Object.prototype,Co=ko.toString,Io=To.hasOwnProperty,Ao=Co.call(Object);const Ro=function(t){if(!Kt(t)||"[object Object]"!=st(t))return!1;var e=He(t);if(null===e)return!0;var s=Io.call(e,"constructor")&&e.constructor;return"function"==typeof s&&s instanceof s&&Co.call(s)==Ao};const No=function(t){return Kt(t)&&1===t.nodeType&&!Ro(t)},jo=["isHidden","div","ck-presence-list__counter--hidden","setTemplate","set","bindTemplate"];var Po,Do;Po=jo,Do=247,function(t){for(;--t;)Po.push(Po.shift())}(++Do);const Mo=function(t,e){return jo[t-=0]};class Bo extends r.View{constructor(t){super(t);const e=this[Mo("0x4")];this[Mo("0x3")]("usersCount",0),this[Mo("0x3")](Mo("0x5"),!0),this[Mo("0x2")]({tag:Mo("0x0"),attributes:{class:["ck","ck-presence-list__counter",e.if(Mo("0x5"),Mo("0x1"))]},children:[{text:e.to("usersCount",(e=>T(t,"CONNECTED_USERS",e)))}]})}}const Jo=["items","bindTemplate","div","setTemplate","fire"];var Vo,Uo;Vo=Jo,Uo=443,function(t){for(;--t;)Vo.push(Vo.shift())}(++Uo);const qo=function(t,e){return Jo[t-=0]};class Fo extends r.View{constructor(t){super(t),this[qo("0x2")]=this.createCollection();const e=this[qo("0x3")];this[qo("0x0")]({tag:qo("0x4"),attributes:{class:["ck","ck-presence-list__list"]},children:this[qo("0x2")],on:{click:e.to((()=>this[qo("0x1")]("execute")))}})}}var Lo=__webpack_require__(3286),Yo={injectType:"singletonStyleTag",attributes:{"data-cke":!0},insert:"head",singleton:!0};x()(Lo.Z,Yo);Lo.Z.locals;const Go=["ck-presence-list--collapsed","isCollapsed","counterView","div","bindTemplate","locale","set","ck-reset"];var zo,$o;zo=Go,$o=212,function(t){for(;--t;)zo.push(zo.shift())}(++$o);const Wo=function(t,e){return Go[t-=0]};class Ho extends r.View{constructor(t){super(t);const e=this[Wo("0x0")];this[Wo("0x2")](Wo("0x5"),!0),this[Wo("0x6")]=new Bo(this[Wo("0x1")]),this.inlineListView=new Fo(t),this.setTemplate({tag:Wo("0x7"),attributes:{class:["ck","ck-presence-list",Wo("0x3"),"ck-rounded-corners",e.if(Wo("0x5"),Wo("0x4"))]},children:[this[Wo("0x6")],this.inlineListView]})}}var Ko,Zo,Xo=["setTemplate","ck-presence-list__dropdown-list","items"];Ko=Xo,Zo=148,function(t){for(;--t;)Ko.push(Ko.shift())}(++Zo);var Qo=function(t,e){return Xo[t-=0]};class ta extends r.View{constructor(t){super(t),this.items=this.createCollection(),this[Qo("0x2")]({tag:"div",attributes:{class:["ck",Qo("0x0")]},children:[{tag:"div",attributes:{class:["ck","ck-presence-list__dropdown-list-wrapper"]},children:this[Qo("0x1")]}]})}}const ea=["bindTemplate","tag","color","ck-user__full-name","div","userView","getBackgroundColorClass","ck-presence-list__dropdown-list-item","ck-presence-list__marker","fire","button","setTemplate","span"];var sa,ra;sa=ea,ra=286,function(t){for(;--t;)sa.push(sa.shift())}(++ra);const na=function(t,e){return ea[t-=0]};class ia extends r.View{constructor(t,e,s){super(t);const r=this[na("0x0")];this[na("0x5")]=new n.UserView(t,e);const i={tag:na("0x4"),attributes:{class:["ck",na("0x7")]},children:[this.userView,{tag:na("0xc"),attributes:{class:["ck",na("0x3")]},children:[{text:e.name}]},{tag:na("0xc"),attributes:{class:["ck",na("0x8"),e[na("0x2")][na("0x6")]()],"aria-hidden":"true"}}]};s&&(i[na("0x1")]=na("0xa"),i.on={click:r.to((()=>this[na("0x9")]("execute")))}),this[na("0xb")](i)}}const oa=["ck-tooltip_","ck-tooltip__text","bindTemplate","position","setTemplate","text","span","ck-tooltip__text__inner"];var aa,ca;aa=oa,ca=144,function(t){for(;--t;)aa.push(aa.shift())}(++ca);const ua=function(t,e){return oa[t-=0]};class da extends r.TooltipView{constructor(t){super(t);const e=this[ua("0x2")];this[ua("0x4")]({tag:"span",attributes:{class:["ck","ck-tooltip",e.to(ua("0x3"),(t=>ua("0x0")+t))]},children:[{tag:ua("0x6"),attributes:{class:[ua("0x1")]},children:[{tag:ua("0x6"),class:[ua("0x7")],children:[{text:e.to(ua("0x5"))}]}]}]})}}const la=["button","tag","tooltipView","color","span","fire","setTemplate","execute","bindTemplate","true","userView","markerView","ck-presence-list__list-item","div","text"];var ha,fa;ha=la,fa=265,function(t){for(;--t;)ha.push(ha.shift())}(++fa);const pa=function(t,e){return la[t-=0]};class ya extends r.View{constructor(t,e,s){super(t);const r=this[pa("0xd")];this[pa("0x0")]=new n.UserView(t,e),this[pa("0x1")]=new ma(t,e),this.tooltipView=new da(t),this[pa("0x7")][pa("0x4")]=this.userView.name;const i={tag:pa("0x3"),attributes:{class:["ck",pa("0x2")]},children:[this.userView,this[pa("0x1")],this.tooltipView]};s&&(i[pa("0x6")]=pa("0x5"),i.on={click:r.to((()=>this[pa("0xa")](pa("0xc"))))}),this[pa("0xb")](i)}}class ma extends r.View{constructor(t,e){super(t),this[pa("0xb")]({tag:pa("0x9"),attributes:{class:["ck","ck-presence-list__marker",e[pa("0x8")].getBackgroundColorClass()],"aria-hidden":pa("0xe")}})}}const va=["isHidden","_allConnectedUsers","detachFromDom","listenTo","hideDropdown","destroy","element","context","bindTo","isCollapsed","usersCount","config","init","remove","presenceList","define","class","view","execute","presencelist-collapseat-invalid-format","presenceList.container","from","presencelist-missing-container","get","_handleUserAdd","allConnectedUsers","onClick","render","using","content","presenceDropdownView","plugins","_handleUserRemove","number","add","ck ck-presence-list__balloon","isVisible","locale","length","showDropdown","balloonPanelView","bodyCollection","presenceList.collapseAt","inlineListView","appendChild","_createView","attachToDom","counterView","lastConnectedUsers","reverse"];var xa,_a;xa=va,_a=172,function(t){for(;--t;)xa.push(xa.shift())}(++_a);const ga=function(t,e){return va[t-=0]};class ba extends t.ContextPlugin{constructor(t){super(t),t[ga("0x27")][ga("0x2b")]("presenceList",{collapseAt:6});const s=t.config[ga("0x1")]("presenceList.collapseAt");if(ga("0xb")!=typeof s)throw new e.CKEditorError("presencelist-collapseat-invalid-format",this);if(s<1)throw new e.CKEditorError(ga("0x2f"),this)}static get requires(){return[m]}[ga("0x28")](){const t=this.context;this[ga("0x1d")]=t[ga("0x9")][ga("0x1")](m)[ga("0x3")],this.set("usersCount",0),this.lastConnectedUsers=new e.Collection,this[ga("0x12")]=new r.BalloonPanelView,this.balloonPanelView[ga("0x2c")]=ga("0xd"),this[ga("0x2d")]=this[ga("0x17")](),this.presenceDropdownView=void 0;for(const t of this[ga("0x1d")])this[ga("0x2")](t);this.listenTo(this._allConnectedUsers,ga("0xc"),((t,e)=>{this[ga("0x2")](e)})),this[ga("0x1f")](this[ga("0x1d")],ga("0x29"),((t,e)=>{this[ga("0xa")](e)}))}[ga("0x17")](){const t=this.context,s=new Ho(this.context[ga("0xf")]),n=this[ga("0x12")];if(!No(t[ga("0x27")][ga("0x1")](ga("0x30"))))throw new e.CKEditorError(ga("0x0"),this);return s[ga("0x19")].bind(ga("0x26")).to(this),s.bind(ga("0x25")).to(this,"usersCount",(e=>{const r=e>=t[ga("0x27")][ga("0x1")](ga("0x14"));return s[ga("0x19")][ga("0x1c")]=!(1==e||r),r||this[ga("0x20")](),r})),s[ga("0x15")].items[ga("0x24")](this[ga("0x1a")])[ga("0x6")]((e=>{const s=t[ga("0x27")][ga("0x1")](ga("0x2a")),r=new ya(t.locale,e,s[ga("0x4")]);return s[ga("0x4")]&&this[ga("0x1f")](r,ga("0x2e"),(()=>{this.view[ga("0x25")]||s[ga("0x4")](e,r[ga("0x22")])})),r})),this[ga("0x1f")](s[ga("0x15")],"execute",(()=>{this.presenceDropdownView?this[ga("0x20")]():this.view[ga("0x25")]&&this[ga("0x11")]()})),s[ga("0x5")](),n.render(),(0,r.clickOutsideHandler)({emitter:s,activator:()=>n[ga("0xe")],contextElements:[n[ga("0x22")],s[ga("0x15")].element],callback:()=>this[ga("0x20")]()}),t[ga("0x27")][ga("0x1")](ga("0x30"))[ga("0x16")](s[ga("0x22")]),this.bodyCollection=new r.BodyCollection(this.context.locale),this[ga("0x13")][ga("0x18")](),this[ga("0x13")][ga("0xc")](n),s}[ga("0x2")](t){this.usersCount++,5==this[ga("0x1a")][ga("0x10")]&&this[ga("0x1a")][ga("0x29")](0),this.lastConnectedUsers[ga("0xc")](t)}[ga("0xa")](t){if(this[ga("0x26")]--,this[ga("0x1a")][ga("0x1")](t.id)&&(this[ga("0x1a")][ga("0x29")](t.id),this[ga("0x1a")][ga("0x10")]<this[ga("0x26")]))for(const t of Array[ga("0x31")](this[ga("0x1d")])[ga("0x1b")]())if(!this[ga("0x1a")].get(t.id))return void this.lastConnectedUsers[ga("0xc")](t,0)}showDropdown(){if(this[ga("0x8")])return;this.presenceDropdownView=new ta;const t=this.context.config[ga("0x1")](ga("0x2a"));this[ga("0x8")].items[ga("0x24")](this[ga("0x1d")])[ga("0x6")]((e=>{const s=new ia(this[ga("0x23")][ga("0xf")],e,!!t.onClick);return t.onClick&&this.listenTo(s,ga("0x2e"),(()=>{t[ga("0x4")](e,s[ga("0x22")])})),s})),this.balloonPanelView[ga("0x7")].add(this[ga("0x8")]),this[ga("0x12")].pin({target:this[ga("0x2d")][ga("0x15")][ga("0x22")]})}[ga("0x20")](){this[ga("0x8")]&&(this[ga("0x12")].unpin(),this[ga("0x12")].content[ga("0x29")](this.presenceDropdownView),this[ga("0x8")].destroy(),this[ga("0x8")]=void 0)}[ga("0x21")](){super[ga("0x21")](),this[ga("0x2d")]&&this.view.isRendered&&this[ga("0x2d")][ga("0x21")](),this.bodyCollection&&this[ga("0x13")][ga("0x1e")]()}}var wa,Oa,Sa=["pluginName","PresenceList","requires"];wa=Sa,Oa=413,function(t){for(;--t;)wa.push(wa.shift())}(++Oa);var Ea=function(t,e){return Sa[t-=0]};class ka extends t.ContextPlugin{static get[Ea("0x0")](){return[m,ba]}static get[Ea("0x1")](){return Ea("0x2")}}})(),(window.CKEditor5=window.CKEditor5||{}).realTimeCollaboration=__webpack_exports__})();