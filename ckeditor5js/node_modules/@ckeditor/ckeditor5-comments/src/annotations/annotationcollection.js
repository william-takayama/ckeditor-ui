/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5dbf=['destroy','innerView','_innerViewToAnnotation','clear','_items','annotationcollection-not-existing-item','remove','focusTracker','_getOrderInContent','focusableElements','stopListening','listenTo','_sort','updateTargetRect','_viewToAnnotation','view','delete','_focusTracker','targetRect','annotationcollection-duplicated-item','sort','refreshPositioning','get','has','left','change:isFocused','from','blur','getByView','add','top','length','isFocused','getByInnerView','fire'];(function(_0x474a36,_0x5dbf0f){const _0x137208=function(_0x3ff9a7){while(--_0x3ff9a7){_0x474a36['push'](_0x474a36['shift']());}};_0x137208(++_0x5dbf0f);}(_0x5dbf,0x18f));const _0x1372=function(_0x474a36,_0x5dbf0f){_0x474a36=_0x474a36-0x0;let _0x137208=_0x5dbf[_0x474a36];return _0x137208;};import{CKEditorError as _0x31aeae,Collection as _0x2bc692,FocusTracker as _0x4b4b0b}from'ckeditor5/src/utils';export default class x extends _0x2bc692{constructor(_0x470e79=[]){super(),this[_0x1372('0x17')]=new Map(),this[_0x1372('0x0')]=new Map(),this[_0x1372('0x3')]=new _0x4b4b0b(),this[_0x1372('0x3')]['on'](_0x1372('0xb'),(_0x2a4d5e,_0x22fc6d,_0x2be1ee)=>{_0x2be1ee||this['fire'](_0x1372('0xd'));});for(const _0x31455a of _0x470e79)this[_0x1372('0xf')](_0x31455a);}get[_0x1372('0x12')](){return this['_focusTracker'][_0x1372('0x12')];}[_0x1372('0xf')](_0x1768cc){if(this[_0x1372('0x9')](_0x1768cc))throw new _0x31aeae(_0x1372('0x5'),null);this[_0x1372('0x17')]['set'](_0x1768cc[_0x1372('0x16')],_0x1768cc),this[_0x1372('0x0')]['set'](_0x1768cc[_0x1372('0x1')],_0x1768cc);for(const _0x48dbf2 of _0x1768cc[_0x1372('0x1e')])this[_0x1372('0x3')][_0x1372('0xf')](_0x48dbf2);this[_0x1372('0x20')](_0x1768cc['focusableElements'],_0x1372('0xf'),(_0x19b7e7,_0x233947)=>{this[_0x1372('0x3')][_0x1372('0xf')](_0x233947);}),this[_0x1372('0x20')](_0x1768cc['focusableElements'],'remove',(_0x394e26,_0x10b426)=>{this[_0x1372('0x3')][_0x1372('0x1b')](_0x10b426);}),this[_0x1372('0x20')](_0x1768cc[_0x1372('0x1')][_0x1372('0x1c')],'change:isFocused',(_0x21788a,_0x56abf0,_0x37fa7a)=>{_0x37fa7a&&this[_0x1372('0x14')]('focus',_0x1768cc);});const _0x408ed3=this[_0x1372('0x1d')](_0x1768cc);super[_0x1372('0xf')](_0x1768cc,_0x408ed3),_0x1768cc[_0x1372('0x22')]();}['remove'](_0x48b006){if(!this[_0x1372('0x9')](_0x48b006))throw new _0x31aeae(_0x1372('0x1a'),null);this[_0x1372('0x1f')](_0x48b006[_0x1372('0x1')]['focusTracker']),this['stopListening'](_0x48b006[_0x1372('0x1e')]);for(const _0x1e0312 of _0x48b006[_0x1372('0x1e')])this[_0x1372('0x3')][_0x1372('0x1b')](_0x1e0312);this[_0x1372('0x0')][_0x1372('0x2')](_0x48b006[_0x1372('0x1')]),this[_0x1372('0x17')]['delete'](_0x48b006['innerView']),super['remove'](_0x48b006);}[_0x1372('0x13')](_0x34ac0c){return this[_0x1372('0x17')][_0x1372('0x8')](_0x34ac0c);}[_0x1372('0xe')](_0x68cf57){return this[_0x1372('0x0')][_0x1372('0x8')](_0x68cf57);}[_0x1372('0x15')](){super[_0x1372('0x18')](),this[_0x1372('0x1f')](),this[_0x1372('0x17')][_0x1372('0x18')](),this[_0x1372('0x0')][_0x1372('0x18')](),this['_focusTracker'][_0x1372('0x15')]();}[_0x1372('0x7')](){for(const _0x3393aa of this)_0x3393aa[_0x1372('0x22')]();this[_0x1372('0x21')]();}[_0x1372('0x21')](){const _0x5dd13f=Array[_0x1372('0xc')](this)[_0x1372('0x6')]((_0x15f81f,_0x381a0b)=>y(_0x15f81f[_0x1372('0x4')],_0x381a0b['targetRect']));for(let _0x228408=_0x5dd13f[_0x1372('0x11')]-0x1;_0x228408>0x0;_0x228408--){const _0x5a2a2b=_0x5dd13f[_0x228408];_0x228408!==this['getIndex'](_0x5a2a2b)&&(this[_0x1372('0x1b')](_0x5a2a2b),this['add'](_0x5a2a2b,_0x228408));}}['_getOrderInContent'](_0x26abc4){let _0x680b23=0x0;const _0x3fc37d=_0x26abc4[_0x1372('0x4')];if(!_0x3fc37d)return this[_0x1372('0x19')]['length'];for(const _0x2fad9d of this){const _0x425ba3=_0x2fad9d['targetRect'];if(_0x425ba3){if(y(_0x3fc37d,_0x425ba3)<0x0)return _0x680b23;_0x680b23++;}}return _0x680b23;}}export function bindAnnotationCollections({source:_0x3b6433,target:_0x37eca2,filter:_0x98f4a9}){for(const _0xf5d1e2 of _0x3b6433)_0x98f4a9(_0xf5d1e2)&&_0x37eca2['add'](_0xf5d1e2);_0x37eca2['listenTo'](_0x3b6433,_0x1372('0xf'),(_0x25d7b9,_0x3bd665)=>{_0x98f4a9(_0x3bd665)&&_0x37eca2[_0x1372('0xf')](_0x3bd665);}),_0x37eca2[_0x1372('0x20')](_0x3b6433,_0x1372('0x1b'),(_0x5deee5,_0x31d1d4)=>{_0x37eca2['has'](_0x31d1d4)&&_0x37eca2[_0x1372('0x1b')](_0x31d1d4);});}function y(_0x2fa2c0,_0x419ad6){if(null===_0x2fa2c0&&null===_0x419ad6)return 0x0;if(null===_0x2fa2c0)return-0x1;if(null===_0x419ad6)return 0x1;const _0x12b3f4=_0x2fa2c0[_0x1372('0x10')]-_0x419ad6[_0x1372('0x10')];return 0x0==_0x12b3f4?_0x2fa2c0[_0x1372('0xa')]-_0x419ad6[_0x1372('0xa')]:_0x12b3f4;}