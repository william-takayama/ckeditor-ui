/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x22d0=['filter','annotationsuis-activate-missing-ui','push','attach','requires','has','from','annotationsuis-register-already-registered','init','pluginName','_uisData','get','_uis','set','detach','setActiveAnnotation','add','_deactivateAllAnnotations','_setSelectedAnnotations','isActive','activate','destroy','_visibleAnnotations','change:activeAnnotation','_activateAnnotation','deactivate','stopListening','refilterAnnotations','_addActiveAnnotation','length','AnnotationsUIs','switchTo','size','_assertAnnotationDoesNotBelongToMultipleUIs','deactivateAll','activeUIs','collection','function','listenTo','plugins','delete','context'];(function(_0x1aab56,_0x22d012){const _0x2c5d94=function(_0x483b12){while(--_0x483b12){_0x1aab56['push'](_0x1aab56['shift']());}};_0x2c5d94(++_0x22d012);}(_0x22d0,0xd4));const _0x2c5d=function(_0x1aab56,_0x22d012){_0x1aab56=_0x1aab56-0x0;let _0x2c5d94=_0x22d0[_0x1aab56];return _0x2c5d94;};import{ContextPlugin as _0x5c6968}from'ckeditor5/src/core';import{CKEditorError as _0x20c69d}from'ckeditor5/src/utils';import _0x41e3e4,{bindAnnotationCollections as _0x505d13}from'./annotationcollection';import _0x15e37b from'./annotations';export default class I extends _0x5c6968{static get[_0x2c5d('0x2')](){return[_0x15e37b];}static get[_0x2c5d('0x7')](){return _0x2c5d('0x1c');}constructor(_0x1bb737){super(_0x1bb737),this[_0x2c5d('0x21')]=new Set(),this['_uis']=new Map(),this[_0x2c5d('0x8')]=new Map();}[_0x2c5d('0x6')](){const _0x38fd93=this[_0x2c5d('0x27')][_0x2c5d('0x25')]['get'](_0x15e37b);this[_0x2c5d('0x24')](_0x38fd93,_0x2c5d('0x16'),(_0x182303,_0x370bb3)=>{for(const _0x21355f of this[_0x2c5d('0x21')]){const _0x529e42=this[_0x2c5d('0xa')][_0x2c5d('0x9')](_0x21355f);(0x0,this[_0x2c5d('0x8')][_0x2c5d('0x9')](_0x21355f)[_0x2c5d('0x28')])(_0x370bb3)&&_0x529e42[_0x2c5d('0xd')](_0x370bb3);}}),this[_0x2c5d('0x24')](_0x38fd93,_0x2c5d('0xf'),()=>{for(const _0x4f2783 of this['activeUIs']){this[_0x2c5d('0xa')]['get'](_0x4f2783)[_0x2c5d('0xd')](null);}}),this[_0x2c5d('0x24')](_0x38fd93[_0x2c5d('0x14')],_0x2c5d('0xe'),(_0x3cfaa5,_0x2e3da9)=>{this[_0x2c5d('0x1f')](_0x2e3da9);});}['hasActive'](){return this[_0x2c5d('0x21')][_0x2c5d('0x1e')]>0x0;}['isActive'](_0x4d3b8e){return this[_0x2c5d('0x21')][_0x2c5d('0x3')](_0x4d3b8e);}['activate'](_0x4ce587,_0x6f673e=()=>!0x0){const _0x2480fe=this[_0x2c5d('0x27')]['plugins'][_0x2c5d('0x9')](_0x15e37b);if(!this[_0x2c5d('0xa')]['has'](_0x4ce587))throw new _0x20c69d(_0x2c5d('0x29'),this,{'uiName':_0x4ce587});this[_0x2c5d('0x11')](_0x4ce587)&&this[_0x2c5d('0x17')](_0x4ce587),this[_0x2c5d('0x21')][_0x2c5d('0xe')](_0x4ce587);const _0x58f459=new _0x41e3e4(),_0x36e579=_0x2480fe[_0x2c5d('0x14')];_0x505d13({'source':_0x36e579,'target':_0x58f459,'filter':_0x6f673e}),this[_0x2c5d('0x8')][_0x2c5d('0xb')](_0x4ce587,{'collection':_0x58f459,'filter':_0x6f673e});const _0x4b29cb=this[_0x2c5d('0xa')][_0x2c5d('0x9')](_0x4ce587);_0x4b29cb['attach'](_0x58f459),this[_0x2c5d('0x24')](_0x4b29cb,_0x2c5d('0x15'),(_0x5dd907,_0x31b865,_0x42b026,_0x435b58)=>{_0x435b58&&_0x2480fe['_removeActiveAnnotation'](_0x435b58),_0x42b026&&_0x2480fe[_0x2c5d('0x1a')](_0x42b026);});}[_0x2c5d('0x17')](_0xd7bab2){this[_0x2c5d('0x21')][_0x2c5d('0x26')](_0xd7bab2);const _0x198417=this[_0x2c5d('0xa')][_0x2c5d('0x9')](_0xd7bab2);_0x198417[_0x2c5d('0xc')](),this[_0x2c5d('0x18')](_0x198417),this[_0x2c5d('0x8')]['get'](_0xd7bab2)[_0x2c5d('0x22')][_0x2c5d('0x13')](),this[_0x2c5d('0x8')][_0x2c5d('0x26')](_0xd7bab2);}[_0x2c5d('0x1d')](_0x25dd41){const _0x106900=this['context'][_0x2c5d('0x25')][_0x2c5d('0x9')](_0x15e37b),_0x584d8a=Array[_0x2c5d('0x4')](_0x106900['activeAnnotations'])[0x0]||null;this[_0x2c5d('0x20')](),this[_0x2c5d('0x12')](_0x25dd41);const _0x15af2c=this['_uis']['get'](_0x25dd41);_0x15af2c['setActiveAnnotation'](_0x584d8a),_0x15af2c[_0x2c5d('0x10')]&&_0x584d8a&&_0x15af2c[_0x2c5d('0x10')]([_0x584d8a]);}[_0x2c5d('0x20')](){for(const _0x3557f7 of this[_0x2c5d('0x21')])this[_0x2c5d('0x17')](_0x3557f7);}['register'](_0x5d4e74,_0x26a303){if(this['_uis'][_0x2c5d('0x3')](_0x5d4e74))throw new _0x20c69d(_0x2c5d('0x5'));if(_0x2c5d('0x23')!=typeof _0x26a303[_0x2c5d('0x1')]||_0x2c5d('0x23')!=typeof _0x26a303[_0x2c5d('0xc')]||_0x2c5d('0x23')!=typeof _0x26a303[_0x2c5d('0xd')])throw new _0x20c69d('annotationsuis-register-invalid-interface',null);this[_0x2c5d('0xa')][_0x2c5d('0xb')](_0x5d4e74,_0x26a303);}[_0x2c5d('0x19')](){const _0x5f1991=this['context']['plugins'][_0x2c5d('0x9')](_0x15e37b)[_0x2c5d('0x22')],_0x381280=new Map(),_0x3bd8d7=Array[_0x2c5d('0x4')](this['activeUIs']);for(const _0x148516 of this['activeUIs']){const _0x35e586=this[_0x2c5d('0x8')][_0x2c5d('0x9')](_0x148516)[_0x2c5d('0x22')];for(const _0x2944b3 of _0x35e586)_0x381280[_0x2c5d('0xb')](_0x2944b3,_0x148516);}for(const _0x34276d of _0x5f1991){const _0x3c90f5=_0x381280[_0x2c5d('0x9')](_0x34276d);this['_assertAnnotationDoesNotBelongToMultipleUIs'](_0x34276d);const _0x3dc1ca=_0x3bd8d7['find'](_0x798d0f=>this['_uisData'][_0x2c5d('0x9')](_0x798d0f)[_0x2c5d('0x28')](_0x34276d));_0x3c90f5!==_0x3dc1ca&&(_0x3c90f5&&this[_0x2c5d('0x8')]['get'](_0x3c90f5)[_0x2c5d('0x22')]['remove'](_0x34276d),_0x3dc1ca&&this[_0x2c5d('0x8')][_0x2c5d('0x9')](_0x3dc1ca)[_0x2c5d('0x22')][_0x2c5d('0xe')](_0x34276d));}}['destroy'](){this['deactivateAll'](),super[_0x2c5d('0x13')]();}[_0x2c5d('0x1f')](_0x5809a2){const _0x232588=[];for(const _0xfd2e36 of this[_0x2c5d('0x21')]){(0x0,this[_0x2c5d('0x8')][_0x2c5d('0x9')](_0xfd2e36)['filter'])(_0x5809a2)&&_0x232588[_0x2c5d('0x0')](_0xfd2e36);}if(_0x232588[_0x2c5d('0x1b')]>0x1)throw new _0x20c69d('annotationsuis-annotation-mismatch',null,{'matchedUIs':_0x232588,'annotationType':_0x5809a2['type']});}}