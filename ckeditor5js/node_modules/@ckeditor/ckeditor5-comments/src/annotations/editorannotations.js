/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2042=['init','containsRange','get','_editorAnnotationsData','refreshSelectedViews','editor','has','uiUpdate','from','view','editing','selection','keys','addSourceCollector','sort','remove','delete','map','document','focusTracker','innerView','getRanges','blur','isCollapsed','collection','fire','editorannotations-invalid-source-callback','isEqual','directChange','listenTo','isReadOnly','refresh','change:isFocused','getOrderedSelectedAnnotations','update','function','annotation','range','add','pluginName','requires','set','model','element','change:range','EditorAnnotations','getByInnerView','_dataCollectors','push','hasDomSelection'];(function(_0x287f2,_0x204281){const _0x5740b8=function(_0x45d309){while(--_0x45d309){_0x287f2['push'](_0x287f2['shift']());}};_0x5740b8(++_0x204281);}(_0x2042,0x64));const _0x5740=function(_0x287f2,_0x204281){_0x287f2=_0x287f2-0x0;let _0x5740b8=_0x2042[_0x287f2];return _0x5740b8;};import{Plugin as _0x4a5851}from'ckeditor5/src/core';import{CKEditorError as _0x2863d4}from'ckeditor5/src/utils';import{debounce as _0x160f76}from'lodash-es';import _0x29de9b from'./annotations';export default class k extends _0x4a5851{static get[_0x5740('0x28')](){return[_0x29de9b];}static get[_0x5740('0x27')](){return _0x5740('0x2d');}constructor(_0x3a9e75){super(_0x3a9e75),this[_0x5740('0x2f')]=new Set();}[_0x5740('0x0')](){const _0x547a4b=this['editor'],_0x2e1561=_0x547a4b['plugins'][_0x5740('0x2')](_0x29de9b),_0x267e38=_0x547a4b['model'][_0x5740('0x12')][_0x5740('0xb')],_0x5c7edb=_0x160f76(()=>this[_0x5740('0x4')](),0xa);_0x267e38['on'](_0x5740('0x2c'),(_0x279284,_0x237b31)=>{_0x237b31[_0x5740('0x1c')]&&(_0x5c7edb['cancel'](),this[_0x5740('0x4')]());}),this['listenTo'](_0x547a4b['editing']['view']['document'],'change:isFocused',(_0x555f91,_0x58dab3,_0x4bc2d7)=>{_0x4bc2d7&&_0x5c7edb();}),this[_0x5740('0x1d')](_0x547a4b['ui'][_0x5740('0x13')],_0x5740('0x20'),(_0x23aa2a,_0x5227b6,_0x27616e)=>{_0x27616e||_0x547a4b[_0x5740('0x1e')]||this[_0x5740('0x19')](_0x5740('0x16'),{'isAnnotationTracked':_0x40a5e2=>this['_editorAnnotationsData'][_0x5740('0x6')](_0x40a5e2['innerView'])});}),this['listenTo'](this[_0x5740('0x5')]['ui'],_0x5740('0x22'),()=>this[_0x5740('0x19')](_0x5740('0x7')));const _0x1d6c37=new Set();this[_0x5740('0x1d')](_0x2e1561[_0x5740('0x18')],'add',(_0x12723d,_0x123d47)=>{for(const _0x430305 of this[_0x5740('0x3')][_0x5740('0xc')]())if(_0x430305===_0x123d47[_0x5740('0x14')]){_0x547a4b['ui'][_0x5740('0x13')][_0x5740('0x26')](_0x123d47[_0x5740('0x9')]['element']),_0x1d6c37[_0x5740('0x26')](_0x123d47[_0x5740('0x9')]);break;}}),this[_0x5740('0x1d')](_0x2e1561[_0x5740('0x18')],_0x5740('0xf'),(_0x4de0e5,_0x37ae72)=>{_0x1d6c37['has'](_0x37ae72[_0x5740('0x9')])&&(_0x547a4b['ui'][_0x5740('0x13')][_0x5740('0xf')](_0x37ae72[_0x5740('0x9')][_0x5740('0x2b')]),_0x1d6c37[_0x5740('0x10')](_0x37ae72['view']));});}[_0x5740('0x31')](){return this[_0x5740('0x5')][_0x5740('0xa')]['view'][_0x5740('0x31')];}[_0x5740('0xd')](_0x5e8846){if(_0x5740('0x23')!=typeof _0x5e8846)throw new _0x2863d4(_0x5740('0x1a'));this[_0x5740('0x2f')][_0x5740('0x26')](_0x5e8846);}[_0x5740('0x4')](){this[_0x5740('0x19')](_0x5740('0x1f'));}[_0x5740('0x21')]({activeAnnotation:_0x149018,annotations:_0x5b48c5}){const _0x99bad2=[],_0x3783ba=this[_0x5740('0x5')][_0x5740('0x2a')]['document']['selection'],_0x4d3c33=Array[_0x5740('0x8')](_0x3783ba[_0x5740('0x15')]());for(const [_0x59583a,_0x4ce31b]of this[_0x5740('0x3')]){const _0x1917ef=_0x55412f(_0x4ce31b),_0x68162e=_0x5b48c5[_0x5740('0x2e')](_0x59583a);_0x1917ef&&_0x68162e&&_0x99bad2[_0x5740('0x30')]({'annotation':_0x68162e,'range':_0x1917ef});}function _0x55412f(_0x64b001){for(const _0x5c4332 of _0x64b001)for(const _0x25391e of _0x4d3c33)if(_0x5c4332[_0x5740('0x1')](_0x25391e,!_0x3783ba[_0x5740('0x17')]))return _0x5c4332;return null;}return _0x99bad2[_0x5740('0xe')]((_0x509091,_0x3d4f16)=>{const _0x1e96f1=_0x509091[_0x5740('0x25')],_0x470545=_0x3d4f16['range'];if(!_0x1e96f1[_0x5740('0x1b')](_0x470545)){if(_0x1e96f1['containsRange'](_0x470545,!0x0))return 0x1;if(_0x470545[_0x5740('0x1')](_0x1e96f1,!0x0))return-0x1;}return _0x509091[_0x5740('0x24')]==_0x149018?-0x1:_0x3d4f16[_0x5740('0x24')]==_0x149018?0x1:0x0;})[_0x5740('0x11')](_0x55f440=>_0x55f440[_0x5740('0x24')]);}get[_0x5740('0x3')](){const _0x3a4fa4=new Map();for(const _0x3fc842 of Array[_0x5740('0x8')](this[_0x5740('0x2f')]))for(const [_0x11f990,_0x454741]of _0x3fc842())_0x3a4fa4[_0x5740('0x29')](_0x11f990,_0x454741);return _0x3a4fa4;}}