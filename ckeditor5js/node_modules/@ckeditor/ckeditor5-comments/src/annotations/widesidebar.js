/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5b13=['refresh','high','context','_throttledPositioningRefresh','attach','refreshPositioning','_attachToContainer','has','detach','get','add','_destroyEditorAnnotationsIntegration','init','activeAnnotation','stop','_integrateWithEditorAnnotations','annotations','focus','resize','Sidebar','EditorAnnotations','widesidebar-attach-already-attached','hasDomSelection','setActiveAnnotation','_editorAnnotations','isAttached','widesidebar-detach-not-attached','editors','from','addEventListener','wideSidebar','_annotations','removeEventListener','listenTo','updateTargetRect','cancel','stopListening','change:container','getOrderedSelectedAnnotations','set','plugins','container','uiUpdate','_detachFromContainer','remove','blur','register','requires','_activeAnnotation','rearrange','off','WideSidebar'];(function(_0x44ca2e,_0x5b130a){const _0x541c8e=function(_0x4e4cbc){while(--_0x4e4cbc){_0x44ca2e['push'](_0x44ca2e['shift']());}};_0x541c8e(++_0x5b130a);}(_0x5b13,0x185));const _0x541c=function(_0x44ca2e,_0x5b130a){_0x44ca2e=_0x44ca2e-0x0;let _0x541c8e=_0x5b13[_0x44ca2e];return _0x541c8e;};import{ContextPlugin as _0x4e5b96}from'ckeditor5/src/core';import _0x1ce71c from'./annotationsuis';import _0x56ff0d from'./sidebar';import{CKEditorError as _0x1f4264,Collection as _0x24c177}from'ckeditor5/src/utils';import{throttle as _0x220022}from'lodash-es';export default class i extends _0x4e5b96{static get[_0x541c('0x16')](){return[_0x56ff0d,_0x1ce71c];}static get['pluginName'](){return _0x541c('0x1a');}constructor(_0x22e277){super(_0x22e277),this[_0x541c('0x0')]=!0x1,this[_0x541c('0xe')]('activeAnnotation',null),this[_0x541c('0x2b')]=null,this[_0x541c('0x33')]=new _0x24c177(),this['_throttledPositioningRefresh']=_0x220022(()=>{this[_0x541c('0x2b')][_0x541c('0x20')]();},0x190,{'leading':!0x1});}[_0x541c('0x27')](){const _0x402404=this[_0x541c('0x1d')][_0x541c('0xf')]['get'](_0x1ce71c),_0x4b9d56=this['context'][_0x541c('0xf')][_0x541c('0x24')](_0x56ff0d);_0x402404[_0x541c('0x15')]('wideSidebar',this),_0x4b9d56[_0x541c('0x10')]&&_0x402404['switchTo'](_0x541c('0x5'));}[_0x541c('0x32')](_0x157ea4){if(_0x157ea4===this[_0x541c('0x28')])return;const _0x19b422=this[_0x541c('0x1d')][_0x541c('0xf')][_0x541c('0x24')](_0x56ff0d);_0x19b422[_0x541c('0x17')]=_0x157ea4;const _0xfcb62f=this[_0x541c('0x28')];this[_0x541c('0x28')]=_0x157ea4,_0x19b422[_0x541c('0x1b')]({'blurredAnnotation':_0xfcb62f,'activatedAnnotation':this[_0x541c('0x28')]});}[_0x541c('0x1f')](_0xe3c85c){this[_0x541c('0x2b')]=_0xe3c85c;const _0x22d402=this[_0x541c('0x1d')][_0x541c('0xf')][_0x541c('0x24')](_0x541c('0x2e'));if(_0x22d402[_0x541c('0x6')]=_0xe3c85c,this['isAttached'])throw new _0x1f4264(_0x541c('0x30'),this);this[_0x541c('0x0')]=!0x0,this[_0x541c('0x8')](_0x22d402,'set:container',()=>{this['detach'](),this[_0x541c('0x8')](_0x22d402,_0x541c('0xc'),_0x3de28c=>{_0x3de28c[_0x541c('0x19')](),this[_0x541c('0x1f')](_0xe3c85c);});}),_0x22d402[_0x541c('0x21')]({'viewClass':'ck-sidebar--wide'});const _0x45d379=_0x1bdaf2=>{_0x1bdaf2[_0x541c('0x9')](),_0x22d402['addAnnotation'](_0x1bdaf2);};for(const _0x23a860 of _0xe3c85c)_0x45d379(_0x23a860);this[_0x541c('0x8')](_0xe3c85c,'add',(_0x5aa494,_0x586b14)=>{_0x45d379(_0x586b14);}),this['listenTo'](_0xe3c85c,_0x541c('0x13'),(_0x6215f2,_0x598caf,_0x528857)=>{_0x22d402[_0x541c('0x18')]({'removedAnnotation':_0x598caf,'previousAnnotation':_0xe3c85c[_0x541c('0x24')](_0x528857-0x1),'nextAnnotation':_0xe3c85c['get'](_0x528857+0x1)}),_0x598caf===this['activeAnnotation']&&this['setActiveAnnotation'](null);},{'priority':'high'}),this[_0x541c('0x8')](_0xe3c85c,_0x541c('0x2c'),(_0x2c4d76,_0x49074f)=>{this[_0x541c('0x32')](_0x49074f);}),this[_0x541c('0x8')](_0xe3c85c,_0x541c('0x14'),()=>{this[_0x541c('0x32')](null);});const _0x168d68=this[_0x541c('0x1d')]['editors']?this[_0x541c('0x1d')][_0x541c('0x2')]:new _0x24c177([this[_0x541c('0x1d')]]);for(const _0x2e0a53 of _0x168d68)this[_0x541c('0x2a')](_0x2e0a53);this[_0x541c('0x8')](_0x168d68,'add',(_0x377f4d,_0x4c77ac)=>{this[_0x541c('0x8')](_0x4c77ac,'ready',()=>{this[_0x541c('0x2a')](_0x4c77ac);});}),this['listenTo'](_0x168d68,'remove',(_0x37242d,_0x2829e4)=>{_0x2829e4[_0x541c('0xf')][_0x541c('0x22')]('EditorAnnotations')&&this[_0x541c('0x26')](_0x2829e4[_0x541c('0xf')][_0x541c('0x24')]('EditorAnnotations'));}),window[_0x541c('0x4')](_0x541c('0x2d'),this[_0x541c('0x1e')]),this[_0x541c('0x2b')][_0x541c('0x20')]();}[_0x541c('0x23')](){if(!this[_0x541c('0x0')])throw new _0x1f4264(_0x541c('0x1'),this);this[_0x541c('0x32')](null);const _0x43bc74=this[_0x541c('0x1d')][_0x541c('0xf')][_0x541c('0x24')](_0x56ff0d);_0x43bc74[_0x541c('0x12')](this[_0x541c('0x2b')]),this[_0x541c('0xb')](_0x43bc74),this[_0x541c('0xb')](this[_0x541c('0x2b')]),this[_0x541c('0xb')](this[_0x541c('0x1d')][_0x541c('0x2')]);for(const _0xf412c4 of Array[_0x541c('0x3')](this[_0x541c('0x33')]))this['_destroyEditorAnnotationsIntegration'](_0xf412c4);window[_0x541c('0x7')]('resize',this[_0x541c('0x1e')]),this[_0x541c('0x1e')][_0x541c('0xa')](),this[_0x541c('0x28')]=null,this['isAttached']=!0x1,this[_0x541c('0x2b')]=null;}['destroy'](){this[_0x541c('0x0')]&&this['detach']();}[_0x541c('0x2a')](_0x3477b1){const _0x3f4a1f=_0x3477b1[_0x541c('0xf')]['get'](_0x541c('0x2f'));if(!_0x3f4a1f)return;const _0x102e56=()=>{const _0x21354c=_0x3f4a1f[_0x541c('0xd')]({'annotations':this['annotations'],'activeAnnotation':this[_0x541c('0x28')]});this[_0x541c('0x32')](_0x21354c[0x0]||null);};this['listenTo'](_0x3f4a1f,_0x541c('0x1b'),_0x102e56),this['listenTo'](_0x3f4a1f,_0x541c('0x14'),(_0x3d8b95,{isAnnotationTracked:_0x22549a})=>{this[_0x541c('0x28')]&&_0x22549a(this['activeAnnotation'])&&this[_0x541c('0x32')](null);}),this[_0x541c('0x8')](_0x3f4a1f,_0x541c('0x11'),()=>{this[_0x541c('0x2b')][_0x541c('0x20')]();}),this['listenTo'](this[_0x541c('0x2b')],'blur',_0x4be8a2=>{_0x3f4a1f[_0x541c('0x31')]()&&(_0x102e56(),_0x4be8a2[_0x541c('0x29')]());},{'priority':_0x541c('0x1c')}),this[_0x541c('0x33')][_0x541c('0x25')](_0x3f4a1f);}[_0x541c('0x26')](_0x319224){_0x319224&&(this[_0x541c('0xb')](_0x319224),this[_0x541c('0x33')][_0x541c('0x13')](_0x319224));}}