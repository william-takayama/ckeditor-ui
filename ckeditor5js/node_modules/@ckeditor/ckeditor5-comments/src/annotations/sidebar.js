/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1549=['listenTo','add','_alignToTargetRect','length','targetRect','height','updateHeight','clear','delete','sidebar.container','get','container','define','element','_alignAfterItem','bottom','_destroySidebarItemView','change:targetRect','_getItemBefore','_annotationToSidebarItemView','sidebar-setcontainer-invalid-element','_alignBeforeItem','destroy','_createSidebarView','_getMaxAvailableTop','context','view','config','refresh','list','change:bottom','_updateLastItem','content','_spaceBetweenItems','_attachToContainer','unbind','top','_sidebarItemViewToAnnotation','set','locale','remove','bind','_lastItem','_activeAnnotation','pluginName','minHeight','setContainer','sidebar.preventScrollOutOfView','class','_getTargetTop','stopListening','isAnimationDisabled','_setItemTop','change:top','_annotations','addAnnotation','getIndex','last','change:_lastItem','_targetTop','sidebar-attachtocontainer-missing-container','max','rearrange','getSidebarItemView'];(function(_0xf10924,_0x15490d){const _0x2ce7dc=function(_0x4a41d6){while(--_0x4a41d6){_0xf10924['push'](_0xf10924['shift']());}};_0x2ce7dc(++_0x15490d);}(_0x1549,0xa3));const _0x2ce7=function(_0xf10924,_0x15490d){_0xf10924=_0xf10924-0x0;let _0x2ce7dc=_0x1549[_0xf10924];return _0x2ce7dc;};import{ContextPlugin as _0x5f0abb}from'ckeditor5/src/core';import _0x5c03fb from'./view/sidebarview';import _0x324977 from'./view/sidebaritemview';import{Rect as _0x46aa1b,CKEditorError as _0x15d584}from'ckeditor5/src/utils';import{isElement as _0x134f43,throttle as _0x2b543c}from'lodash-es';export default class b extends _0x5f0abb{static get[_0x2ce7('0x9')](){return'Sidebar';}constructor(_0x963f41){super(_0x963f41),this[_0x2ce7('0x3')](_0x2ce7('0x7')),this['view']=this[_0x2ce7('0x34')](),this['set'](_0x2ce7('0x28'),null),this[_0x2ce7('0x3e')]=0x19,this[_0x2ce7('0x2')]=new Map(),this[_0x2ce7('0x30')]=new Map(),this[_0x2ce7('0x36')][_0x2ce7('0x38')][_0x2ce7('0x29')](_0x2ce7('0xc'),!0x1),this[_0x2ce7('0x13')]=null,this[_0x2ce7('0x8')]=null;}['init'](){const _0x4a787f=this[_0x2ce7('0x36')][_0x2ce7('0x38')][_0x2ce7('0x27')](_0x2ce7('0x26'));_0x4a787f&&this[_0x2ce7('0xb')](_0x4a787f);}[_0x2ce7('0xb')](_0x332013){if(!_0x134f43(_0x332013))throw new _0x15d584(_0x2ce7('0x31'));this[_0x2ce7('0x28')]=_0x332013;}[_0x2ce7('0x3f')]({viewClass:_0x5c99f5='',spaceBetweenItems:_0x8a6ced=0x19}={}){if(!_0x134f43(this[_0x2ce7('0x28')]))throw new _0x15d584(_0x2ce7('0x19'),this);this[_0x2ce7('0x28')]['appendChild'](this[_0x2ce7('0x37')][_0x2ce7('0x2a')]),this[_0x2ce7('0x37')][_0x2ce7('0xd')]=_0x5c99f5,this[_0x2ce7('0x3e')]=_0x8a6ced;}[_0x2ce7('0x1b')]({removedAnnotation:_0x534d5d,previousAnnotation:_0x440480,nextAnnotation:_0x2d043d}){const _0x3433aa=this['getSidebarItemView'](_0x534d5d);this[_0x2ce7('0x37')]['list'][_0x2ce7('0x5')](_0x3433aa),this['_destroySidebarItemView'](_0x534d5d),_0x440480&&this[_0x2ce7('0x1f')](this[_0x2ce7('0x1c')](_0x440480)),_0x2d043d&&this[_0x2ce7('0x1f')](this[_0x2ce7('0x1c')](_0x2d043d)),this[_0x2ce7('0x3c')]();}[_0x2ce7('0x39')]({blurredAnnotation:_0x5ccf69,activatedAnnotation:_0x57eae4,disableAnimationOnActivatedAnnotation:_0xbe22a}){if(this['_activeAnnotation']=_0x57eae4,_0x5ccf69){_0x5ccf69['isActive']=!0x1;const _0x1a4b90=this[_0x2ce7('0x1c')](_0x5ccf69);_0x1a4b90&&_0xbe22a&&(_0x1a4b90[_0x2ce7('0x10')]=!0x1);}if(_0x57eae4){const _0xcc8c1=this[_0x2ce7('0x1c')](_0x57eae4);_0xcc8c1&&(_0x57eae4['isActive']=!0x0,_0xbe22a&&(_0xcc8c1[_0x2ce7('0x10')]=!0x0,_0xcc8c1[_0x2ce7('0x1')]+=0x1),this['_alignToTargetRect'](_0xcc8c1));}}['_detachFromContainer'](_0x5d8411){this[_0x2ce7('0xf')](),this['view'][_0x2ce7('0x2a')][_0x2ce7('0x5')]();for(const _0x4431af of _0x5d8411)this[_0x2ce7('0x2d')](_0x4431af);this[_0x2ce7('0x37')][_0x2ce7('0x3a')][_0x2ce7('0x24')](),this['view'][_0x2ce7('0xd')]='',this[_0x2ce7('0x7')]=null;}[_0x2ce7('0x14')](_0x370146,_0x7a244){_0x7a244||(_0x7a244=_0x370146[_0x2ce7('0x37')]);const _0xfb5705=new _0x324977(this[_0x2ce7('0x36')][_0x2ce7('0x4')]);this[_0x2ce7('0x2')][_0x2ce7('0x3')](_0xfb5705,_0x370146),this['_annotationToSidebarItemView'][_0x2ce7('0x3')](_0x370146,_0xfb5705),_0xfb5705[_0x2ce7('0x3d')][_0x2ce7('0x1e')](_0x7a244),this['_alignToTargetRect'](_0xfb5705),this[_0x2ce7('0x1d')](_0x370146[_0x2ce7('0x37')],_0x2ce7('0x2e'),()=>{const _0x3f7ffe=this['_getTargetTop'](_0xfb5705);_0xfb5705[_0x2ce7('0x18')]!=_0x3f7ffe&&(_0xfb5705['_targetTop']=_0x3f7ffe,this['_setItemTop'](_0xfb5705,_0x3f7ffe));}),this[_0x2ce7('0x1d')](_0xfb5705,_0x2ce7('0x12'),_0x2b543c(()=>{if(!_0xfb5705[_0x2ce7('0x3d')][_0x2ce7('0x20')])return;const _0x2a314c=this[_0x2ce7('0x2f')](_0xfb5705);if(!_0x2a314c)return;const _0x267712=this[_0x2ce7('0x2')][_0x2ce7('0x27')](_0x2a314c),_0x1df41b=this[_0x2ce7('0x8')];_0x1df41b&&_0x1df41b===_0x267712?this[_0x2ce7('0x2b')](_0x2a314c,_0xfb5705):this[_0x2ce7('0x32')](_0xfb5705,_0x2a314c);},0xa,{'leading':!0x1})),this[_0x2ce7('0x1d')](_0xfb5705,_0x2ce7('0x3b'),_0x2b543c(()=>{if(!_0xfb5705[_0x2ce7('0x3d')][_0x2ce7('0x20')])return;const _0x18f899=this['_getItemAfter'](_0xfb5705);if(!_0x18f899)return;const _0xccf227=this['_sidebarItemViewToAnnotation'][_0x2ce7('0x27')](_0x18f899),_0x24bd13=this[_0x2ce7('0x36')][_0x2ce7('0x38')][_0x2ce7('0x27')](_0x2ce7('0xc')),_0x3e41f5=this[_0x2ce7('0x8')];_0x3e41f5&&_0x3e41f5===_0xccf227&&_0x24bd13?(this[_0x2ce7('0x32')](_0x18f899,_0xfb5705),this['_alignAfterItem'](_0xfb5705,_0x18f899)):_0x3e41f5&&_0x3e41f5===_0xccf227?this[_0x2ce7('0x32')](_0x18f899,_0xfb5705):this[_0x2ce7('0x2b')](_0xfb5705,_0x18f899);},0xa,{'leading':!0x1}));const _0x2a990d=this[_0x2ce7('0x2f')](_0xfb5705);if(_0x2a990d)this['_alignAfterItem'](_0x2a990d,_0xfb5705)||this['_alignToTargetRect'](_0xfb5705);else this['_alignToTargetRect'](_0xfb5705);return this[_0x2ce7('0x3c')](),this['view']['list']['add'](_0xfb5705),_0xfb5705;}['getSidebarItemView'](_0x1f0817){return this[_0x2ce7('0x30')][_0x2ce7('0x27')](_0x1f0817);}['destroy'](){this[_0x2ce7('0x37')][_0x2ce7('0x33')]();}[_0x2ce7('0x2d')](_0x110673){const _0x536429=this[_0x2ce7('0x1c')](_0x110673);this['stopListening'](_0x536429),this[_0x2ce7('0xf')](_0x110673['view']),_0x536429[_0x2ce7('0x33')](),this['_annotationToSidebarItemView'][_0x2ce7('0x25')](_0x110673),this[_0x2ce7('0x2')][_0x2ce7('0x25')](_0x536429);}[_0x2ce7('0x34')](){const _0x461ad6=new _0x5c03fb(this['context'][_0x2ce7('0x4')]);return _0x461ad6['render'](),this['on'](_0x2ce7('0x17'),(_0x40df4d,_0x5a82ff,_0x4ee22a,_0x3c9b56)=>{_0x3c9b56&&_0x461ad6[_0x2ce7('0x0')]('minHeight'),_0x4ee22a?_0x461ad6[_0x2ce7('0x6')]('minHeight')['to'](_0x4ee22a,_0x2ce7('0x2c')):_0x461ad6[_0x2ce7('0xa')]=null;}),_0x461ad6;}[_0x2ce7('0x3c')](){this[_0x2ce7('0x7')]=this['getSidebarItemView'](this[_0x2ce7('0x13')][_0x2ce7('0x16')]);}[_0x2ce7('0x2f')](_0x28d65b){const _0x14711e=this['_sidebarItemViewToAnnotation']['get'](_0x28d65b),_0x54910b=this[_0x2ce7('0x13')][_0x2ce7('0x27')](this[_0x2ce7('0x13')][_0x2ce7('0x15')](_0x14711e)-0x1);return _0x54910b&&this[_0x2ce7('0x1c')](_0x54910b);}['_getItemAfter'](_0x43db57){const _0x521a95=this[_0x2ce7('0x2')][_0x2ce7('0x27')](_0x43db57),_0x249c6f=this['_annotations'][_0x2ce7('0x27')](this['_annotations'][_0x2ce7('0x15')](_0x521a95)+0x1);return _0x249c6f&&this['getSidebarItemView'](_0x249c6f);}[_0x2ce7('0x32')](_0x385dc7,_0x23e9e8){_0x385dc7[_0x2ce7('0x23')]();const _0x38f454=H(_0x23e9e8['bottom']+this[_0x2ce7('0x3e')],_0x385dc7[_0x2ce7('0x1')]);return!!_0x38f454&&(this[_0x2ce7('0x11')](_0x23e9e8,_0x23e9e8[_0x2ce7('0x1')]-_0x38f454),!0x0);}[_0x2ce7('0x2b')](_0x5550ff,_0x2935c3){_0x5550ff['updateHeight']();const _0x55a8d3=H(_0x5550ff[_0x2ce7('0x2c')]+this[_0x2ce7('0x3e')],_0x2935c3['top']);return!!_0x55a8d3&&(this[_0x2ce7('0x11')](_0x2935c3,_0x2935c3[_0x2ce7('0x1')]+_0x55a8d3,!0x1),!0x0);}[_0x2ce7('0x1f')](_0x35c0db){const _0x54cac4=this[_0x2ce7('0x2')][_0x2ce7('0x27')](_0x35c0db);if(!_0x54cac4||!_0x54cac4['target'])return;const _0x3e9c17=this[_0x2ce7('0xe')](_0x35c0db);this[_0x2ce7('0x11')](_0x35c0db,_0x3e9c17);}[_0x2ce7('0xe')](_0x4581c2){const _0x644612=this[_0x2ce7('0x2')][_0x2ce7('0x27')](_0x4581c2);if(null===_0x644612[_0x2ce7('0x21')])return 0x0;if(_0x644612['target']instanceof _0x46aa1b)return _0x644612[_0x2ce7('0x21')][_0x2ce7('0x1')];{const _0x3d3d94=new _0x46aa1b(this['view'][_0x2ce7('0x2a')])[_0x2ce7('0x1')];return _0x644612['targetRect']['top']-_0x3d3d94;}}[_0x2ce7('0x11')](_0x758b79,_0x41a26f,_0x1c5293=this[_0x2ce7('0x36')][_0x2ce7('0x38')][_0x2ce7('0x27')]('sidebar.preventScrollOutOfView')){_0x1c5293&&(_0x41a26f=Math['max'](_0x41a26f,this[_0x2ce7('0x35')](_0x758b79))),_0x758b79['top']=_0x41a26f;}[_0x2ce7('0x35')](_0x5d7832){let _0x2ef42c=this[_0x2ce7('0x2f')](_0x5d7832),_0xe8676f=0x0;for(;_0x2ef42c;)_0x2ef42c[_0x2ce7('0x23')](),_0xe8676f+=this['_spaceBetweenItems']+_0x2ef42c[_0x2ce7('0x22')],_0x2ef42c=this[_0x2ce7('0x2f')](_0x2ef42c);return _0xe8676f;}}function H(_0x1eff2f,_0x55b945){return Math[_0x2ce7('0x1a')](_0x1eff2f-_0x55b945,0x0);}