/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4691=['comment:','model','add','Comment','commands','execute','highest','componentFactory','map','from','CommentsUI','_createUIButton','push','requires','locale','addCommentThread','CommentThreadInputView','innerView','_viewToController','label','listenTo','plugins','focusTracker','editing','get','getAllMarkersForId','getCommentThread','init','getRange','tooltip','length','bind','hasMarkerForId','focus','stop','CommentsListView','addComment','isFocused','addSourceCollector','isEnabled','pluginName','view','activeMarker','editor'];(function(_0x205fae,_0x469142){const _0x25ecb3=function(_0xf5fb8a){while(--_0xf5fb8a){_0x205fae['push'](_0x205fae['shift']());}};_0x25ecb3(++_0x469142);}(_0x4691,0xec));const _0x25ec=function(_0x205fae,_0x469142){_0x205fae=_0x205fae-0x0;let _0x25ecb3=_0x4691[_0x205fae];return _0x25ecb3;};import{Plugin as _0x19d541}from'ckeditor5/src/core';import _0xf3bb80 from'./commentsrepository';import _0x41d2cb from'./commentsediting';import _0xbfa015 from'../annotations/editorannotations';import{ButtonView as _0x1a4ea8}from'ckeditor5/src/ui';import _0x1874dc from'../../theme/icons/add-comment.svg';import _0x1962ff from'../annotations/annotations';import _0x31ec6a from'./ui/view/commentslistview';import _0x34b0fb from'./ui/view/commentthreadinputview';import{getTranslation as _0x566714}from'../utils/common-translations';export default class n extends _0x19d541{static get[_0x25ec('0x18')](){return _0x25ec('0x26');}static get[_0x25ec('0x29')](){return[_0xf3bb80,_0x41d2cb,_0xbfa015,_0x1962ff];}get[_0x25ec('0x13')](){return _0x31ec6a;}get[_0x25ec('0x0')](){return _0x34b0fb;}[_0x25ec('0xb')](){const _0x490a7c=this['editor'],_0x371c24=_0x490a7c[_0x25ec('0x5')][_0x25ec('0x8')](_0xf3bb80),_0x33717a=_0x490a7c[_0x25ec('0x5')][_0x25ec('0x8')](_0x41d2cb),_0x2ce5fe=_0x490a7c[_0x25ec('0x5')][_0x25ec('0x8')](_0x1962ff),_0x41e3fa=_0x490a7c['plugins'][_0x25ec('0x8')](_0xbfa015);_0x490a7c['ui'][_0x25ec('0x23')][_0x25ec('0x1e')]('comment',()=>this[_0x25ec('0x27')]()),_0x41e3fa[_0x25ec('0x16')](()=>{const _0x9f64c8=[];for(const [_0x31dd8c,_0x214150]of _0x371c24['_threadToController']){const _0x579ce1=_0x33717a[_0x25ec('0x9')](_0x31dd8c['id']),_0x12c5a0=_0x579ce1['map'](_0x225d03=>_0x225d03[_0x25ec('0xc')]());_0x579ce1[_0x25ec('0xe')]>0x0&&_0x9f64c8[_0x25ec('0x28')]([_0x214150['view'],_0x12c5a0]);}return _0x9f64c8;}),this[_0x25ec('0x4')](_0x2ce5fe,'change:activeAnnotations',(_0x509b5f,_0x321df7,_0x823ace)=>{const _0xeca7bd=Array[_0x25ec('0x25')](_0x823ace)[_0x25ec('0x24')](_0x510130=>_0x510130[_0x25ec('0x1')])['find'](_0x1a04ed=>_0x371c24['_viewToController']['has'](_0x1a04ed));if(!_0xeca7bd)return void(_0x33717a['activeMarker']=null);const _0x6ce233=_0x371c24[_0x25ec('0x2')][_0x25ec('0x8')](_0xeca7bd)[_0x25ec('0x1d')]['id'],_0x260250=_0x25ec('0x1c')+_0x6ce233;_0x33717a['hasMarkerForId'](_0x6ce233)?_0x33717a[_0x25ec('0x1a')]=_0x260250:_0x33717a['activeMarker']&&(_0x33717a[_0x25ec('0x1a')]=null);}),this[_0x25ec('0x4')](_0x371c24,'removeCommentThread',(_0x1bea6f,{threadId:_0x19e394,isFromAdapter:_0x22aa3d})=>{!_0x22aa3d&&_0x490a7c['ui'][_0x25ec('0x6')][_0x25ec('0x15')]&&_0x33717a[_0x25ec('0x10')](_0x19e394)&&_0x490a7c[_0x25ec('0x7')][_0x25ec('0x19')][_0x25ec('0x11')]();},{'priority':_0x25ec('0x22')}),this['listenTo'](_0x371c24,_0x25ec('0x14'),(_0xdca7a,{threadId:_0x2a7aaf,isFromAdapter:_0x1ae4bc})=>{if(_0x1ae4bc||!_0x33717a[_0x25ec('0x10')](_0x2a7aaf)||!_0x371c24['hasCommentThread'](_0x2a7aaf))return;0x1===_0x371c24[_0x25ec('0xa')](_0x2a7aaf)[_0x25ec('0xe')]&&(_0x490a7c['editing'][_0x25ec('0x19')][_0x25ec('0x11')](),_0xdca7a[_0x25ec('0x12')]());},{'priority':'low'});}[_0x25ec('0x27')](){const _0x186933=this[_0x25ec('0x1b')],_0x19bc5d=new _0x1a4ea8(_0x186933[_0x25ec('0x2a')]),_0x91d2dd=_0x186933[_0x25ec('0x20')][_0x25ec('0x8')](_0x25ec('0x2b'));return _0x19bc5d[_0x25ec('0x3')]=_0x566714(_0x186933[_0x25ec('0x2a')],'Comment'),_0x19bc5d[_0x25ec('0xd')]=_0x566714(_0x186933[_0x25ec('0x2a')],_0x25ec('0x1f')),_0x19bc5d['icon']=_0x1874dc,_0x19bc5d[_0x25ec('0xf')](_0x25ec('0x17'))['to'](_0x91d2dd),this[_0x25ec('0x4')](_0x19bc5d,_0x25ec('0x21'),()=>_0x91d2dd['execute']()),_0x19bc5d;}}