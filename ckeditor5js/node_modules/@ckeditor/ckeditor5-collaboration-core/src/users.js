/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x10f3=['_getInitial','get','users.colorsCount','licenseKeyTrialLimit','add','init','_getNextColor','users-me-missing-user','config','color','initials','licenseKey','ck-user__selection--','context','licenseKeyValid','getMarkerClass','addUser','Users','defineMe','destroy','split','name','locale','useAnonymousUser','toUpperCase','define','_id','You\x20are\x20using\x20the\x20trial\x20version\x20of\x20CKEditor\x205\x20collaboration\x20plugin\x20with\x20limited\x20usage.\x20Make\x20sure\x20you\x20will\x20not\x20use\x20it\x20in\x20the\x20production\x20environment.','avatar','licenseKeyInvalid','users-add-invalid-id','users.anonymousUserId','_licenseKeyCheckInterval','users','length','_isAnonymous','licenseKeyTrial','getOperationAuthor','getUser','Anonymous','_lastColor','trial-license-key-reached-limit','getSelectionClass','isAnonymous','_addAnonymousUser','_myId','_locale'];(function(_0x8714f4,_0x10f3f5){const _0x104dd3=function(_0x32949f){while(--_0x32949f){_0x8714f4['push'](_0x8714f4['shift']());}};_0x104dd3(++_0x10f3f5);}(_0x10f3,0x87));const _0x104d=function(_0x8714f4,_0x10f3f5){_0x8714f4=_0x8714f4-0x0;let _0x104dd3=_0x10f3[_0x8714f4];return _0x104dd3;};import{ContextPlugin as _0x3c1f23}from'ckeditor5/src/core';import{Collection as _0x104b43,CKEditorError as _0x19a7aa}from'ckeditor5/src/utils';import _0x2701f0 from'./permissions';import{getTranslation as _0x484639}from'./utils/common-translations';import'../theme/usercolors.css';export default class l extends _0x3c1f23{static get['pluginName'](){return _0x104d('0x17');}static get['requires'](){return[_0x2701f0];}constructor(_0x534f24){super(_0x534f24),_0x534f24['config']['define']('users.anonymousUserId','anonymous-user'),_0x534f24['config'][_0x104d('0x1f')](_0x104d('0x8'),0x8),this[_0x104d('0x27')]=new _0x104b43(),this[_0x104d('0x5')]=_0x534f24[_0x104d('0x1c')],this[_0x104d('0x26')]=null,this[_0x104d('0x2e')]=0x0,this[_0x104d('0x4')]=null,this['decorate'](_0x104d('0x2b'));}[_0x104d('0xb')](){const _0x22336c=this['context'];this[_0x104d('0x11')]=_0x22336c['config'][_0x104d('0x7')](_0x104d('0x11')),this['_licenseKeyCheckInterval']=setInterval(()=>{let _0xb666aa;for(const _0x75ae26 in _0x22336c){const _0xcef565=_0x22336c[_0x75ae26];if(_0x104d('0x2a')===_0xcef565||'licenseKeyInvalid'===_0xcef565||'licenseKeyValid'===_0xcef565||_0x104d('0x9')==_0xcef565){delete _0x22336c[_0x75ae26],_0xb666aa=_0xcef565;break;}}if(_0x104d('0x23')===_0xb666aa)throw clearInterval(this[_0x104d('0x26')]),new _0x19a7aa('invalid-license-key',null);if(_0x104d('0x2a')===_0xb666aa&&console['info'](_0x104d('0x21')),_0x104d('0x9')===_0xb666aa)throw clearInterval(this[_0x104d('0x26')]),new _0x19a7aa(_0x104d('0x0'),null);_0x104d('0x14')===_0xb666aa&&clearInterval(this['_licenseKeyCheckInterval']);},0x3e8),this[_0x104d('0x3')]();}get['me'](){return null==this['_myId']?null:this['getUser'](this[_0x104d('0x4')]);}[_0x104d('0x16')](_0x4fcf7b){if(!(_0x4fcf7b=Object['assign']({},_0x4fcf7b,{'color':this[_0x104d('0xc')]()}))['id']||'string'!=typeof _0x4fcf7b['id'])throw new _0x19a7aa(_0x104d('0x24'));if(this['users']['has'](_0x4fcf7b['id']))throw new _0x19a7aa('users-add-duplicated-id',null,{'id':_0x4fcf7b['id']});_0x4fcf7b[_0x104d('0x1b')]=function(_0x2a3a53,_0x221397=''){return''==(_0x221397=_0x221397['trim']())?_0x484639(_0x2a3a53,_0x104d('0x2d')):_0x221397;}(this[_0x104d('0x5')],_0x4fcf7b['name']);const _0x16254d=new u(_0x4fcf7b);return this[_0x104d('0x27')][_0x104d('0xa')](_0x16254d),_0x16254d;}['getUser'](_0x48a777){return this[_0x104d('0x27')]['get'](_0x48a777);}[_0x104d('0x1d')](){const _0x12c239=this[_0x104d('0x13')]['config'][_0x104d('0x7')](_0x104d('0x25'));this[_0x104d('0x4')]||this[_0x104d('0x18')](_0x12c239);}[_0x104d('0x18')](_0x202211){if(this['_myId'])throw new _0x19a7aa('users-me-already-defined',null);if(!this[_0x104d('0x2c')](_0x202211))throw new _0x19a7aa(_0x104d('0xd'),null);this[_0x104d('0x4')]=_0x202211;}[_0x104d('0x2b')](){return this['me'];}[_0x104d('0x19')](){super[_0x104d('0x19')](),clearInterval(this[_0x104d('0x26')]);}['_getNextColor'](){const _0x3db09a=this['context'][_0x104d('0xe')][_0x104d('0x7')](_0x104d('0x8'));return this[_0x104d('0x2e')]>=_0x3db09a&&(this['_lastColor']=0x0),new h(this[_0x104d('0x2e')]++);}[_0x104d('0x3')](){const _0x38682c=this[_0x104d('0x13')]['config'][_0x104d('0x7')](_0x104d('0x25'));this['addUser']({'id':_0x38682c,'name':_0x484639(this['_locale'],_0x104d('0x2d'))})['_isAnonymous']=!0x0;}}class u{constructor(_0x2efaf4){this['id']=_0x2efaf4['id'],this[_0x104d('0xf')]=_0x2efaf4[_0x104d('0xf')],this[_0x104d('0x1b')]=_0x2efaf4[_0x104d('0x1b')],this[_0x104d('0x22')]=_0x2efaf4['avatar'],this[_0x104d('0x29')]=!0x1;}get[_0x104d('0x2')](){return this[_0x104d('0x29')];}get[_0x104d('0x10')](){const _0x4d3c5c=this[_0x104d('0x1b')][_0x104d('0x1a')]('\x20');return 0x1===_0x4d3c5c[_0x104d('0x28')]?this[_0x104d('0x6')](_0x4d3c5c[0x0]):this[_0x104d('0x6')](_0x4d3c5c[0x0])+this[_0x104d('0x6')](_0x4d3c5c[_0x4d3c5c['length']-0x1]);}[_0x104d('0x6')](_0x440dad){return _0x440dad['charAt'](0x0)[_0x104d('0x1e')]();}}class h{constructor(_0x3cfdff){this[_0x104d('0x20')]=_0x3cfdff;}['getBackgroundColorClass'](){return'ck-user__bg-color--'+this[_0x104d('0x20')];}[_0x104d('0x1')](){return _0x104d('0x12')+this[_0x104d('0x20')];}[_0x104d('0x15')](){return'ck-user__marker--'+this[_0x104d('0x20')];}}