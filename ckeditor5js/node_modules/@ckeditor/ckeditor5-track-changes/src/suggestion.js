/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x4e8c=['nodeAfter','onDiscard','removeMarkers','suggestion:','removeMarker','get','substr','push','removeAttribute','map','_onDiscard','getRange','hasComments','from','commentThread','next','getMarkerNames','getMarkers','head','type','addRange','addMarker','length','createdAt','clear','discard','author','isIntersecting','getAllAdjacentSuggestions','change','decorate','end','_onAccept','isInContent','onAttributesChange','getFirstRange','_onAttributesChange','addMarkerName','setAttribute','_markerNames','previous','getFirstMarker','filter','accept','getMultiRangeId','getItems','delete','subType','getRanges','start','set','data','split','isMultiRange','attributes','_saved','_model','toJSON'];(function(_0x9285b5,_0x4e8c99){const _0x42b801=function(_0x36e6bc){while(--_0x36e6bc){_0x9285b5['push'](_0x9285b5['shift']());}};_0x42b801(++_0x4e8c99);}(_0x4e8c,0x8a));const _0x42b8=function(_0x9285b5,_0x4e8c99){_0x9285b5=_0x9285b5-0x0;let _0x42b801=_0x4e8c[_0x9285b5];return _0x42b801;};import{Element as _0x24f920}from'ckeditor5/src/engine';import{ObservableMixin as _0x1c7b2c,mix as _0x60bc66,uid as _0x584190}from'ckeditor5/src/utils';import{cloneDeep as _0x33df78,isEqual as _0x47fc50,set as _0x4c5465,unset as _0x217561}from'lodash-es';export default class o{constructor(_0x300493,_0x4d6c77){this['id']=_0x4d6c77['id'],this[_0x42b8('0x37')]=_0x4d6c77[_0x42b8('0x37')],this['subType']=_0x4d6c77['subType']||null,this[_0x42b8('0x4')]=_0x4d6c77[_0x42b8('0x4')],this[_0x42b8('0x1d')]=null,this[_0x42b8('0x22')]=_0x300493,this['_onAccept']=_0x4d6c77['onAccept'],this[_0x42b8('0x2e')]=_0x4d6c77[_0x42b8('0x25')],this[_0x42b8('0xe')]=_0x4d6c77[_0x42b8('0xc')],this['_markerNames']=new Set(),this['set'](_0x42b8('0x1'),null),this[_0x42b8('0x1c')]('attributes',_0x4d6c77['attributes']||{}),this['set'](_0x42b8('0x12'),null),this[_0x42b8('0x1c')](_0x42b8('0x33'),null),this[_0x42b8('0x1c')](_0x42b8('0x32'),null),this[_0x42b8('0x1c')](_0x42b8('0x21'),!0x1),this[_0x42b8('0x8')](_0x42b8('0x15')),this['decorate']('discard');}get['head'](){let _0x42624e=this;for(;_0x42624e['previous'];)_0x42624e=_0x42624e['previous'];return _0x42624e;}get[_0x42b8('0x30')](){return!!this[_0x42b8('0x32')]&&this[_0x42b8('0x32')][_0x42b8('0x0')]>0x0;}get[_0x42b8('0x1f')](){if(0x0==this['_markerNames']['size'])return!0x1;return 0x6==Array[_0x42b8('0x31')](this[_0x42b8('0x11')])[0x0][_0x42b8('0x1e')](':')['length'];}get[_0x42b8('0xb')](){return null!==this[_0x42b8('0x13')]();}[_0x42b8('0xf')](_0xea01b4){this['_markerNames']['add'](_0xea01b4);}[_0x42b8('0x34')](){return Array['from'](this[_0x42b8('0x11')]);}[_0x42b8('0x35')](){return this[_0x42b8('0x34')]()['map'](_0x3cfef2=>this[_0x42b8('0x22')]['markers'][_0x42b8('0x29')](_0x3cfef2))[_0x42b8('0x14')](_0x15fbc3=>_0x15fbc3);}[_0x42b8('0x13')](){return this[_0x42b8('0x35')]()[0x0]||null;}[_0x42b8('0x26')](){this[_0x42b8('0x22')][_0x42b8('0x7')](_0x8d8bc6=>{for(const _0x32126c of this[_0x42b8('0x35')]())_0x8d8bc6[_0x42b8('0x28')](_0x32126c);}),this['_markerNames'][_0x42b8('0x2')]();}[_0x42b8('0x28')](_0x47f4ef){this['_model'][_0x42b8('0x7')](_0x503cb3=>{_0x503cb3['removeMarker'](_0x47f4ef);}),this['_markerNames'][_0x42b8('0x18')](_0x47f4ef);}[_0x42b8('0x38')](_0x227672){const _0x41e26c=_0x42b8('0x27')+this[_0x42b8('0x37')]+':'+this[_0x42b8('0x19')]+':'+this['id']+':'+this['author']['id']+':'+o[_0x42b8('0x16')]();this[_0x42b8('0xf')](_0x41e26c),this[_0x42b8('0x22')]['change'](_0x16a599=>{_0x16a599[_0x42b8('0x39')](_0x41e26c,{'range':_0x227672,'usingOperation':!0x0,'affectsData':!0x0});});}['isIntersectingWithRange'](_0x30418c){for(const _0xaf132b of this[_0x42b8('0x1a')]())if(_0xaf132b[_0x42b8('0x5')](_0x30418c))return!0x0;return!0x1;}[_0x42b8('0x1a')](){return this[_0x42b8('0x35')]()[_0x42b8('0x2d')](_0x559a7a=>_0x559a7a[_0x42b8('0x2f')]());}[_0x42b8('0x17')](){return this[_0x42b8('0x1a')]()['reduce']((_0x4d37ff,_0x2fab77)=>[..._0x4d37ff,..._0x2fab77[_0x42b8('0x17')]()],[]);}[_0x42b8('0xd')](){return this['getFirstMarker']()['getRange']();}['getContainedElement'](){const _0x17e227=this[_0x42b8('0x1a')]();if(0x1!=_0x17e227[_0x42b8('0x0')])return null;const _0x4dfd28=_0x17e227[0x0],_0x19e4ac=_0x4dfd28[_0x42b8('0x1b')][_0x42b8('0x24')],_0x196bf3=_0x4dfd28[_0x42b8('0x9')]['nodeBefore'];return _0x19e4ac instanceof _0x24f920?_0x19e4ac!=_0x196bf3?null:_0x19e4ac:null;}[_0x42b8('0x15')](){this[_0x42b8('0xa')](this[_0x42b8('0x1a')](),this[_0x42b8('0x1d')],this[_0x42b8('0x20')]),this['removeMarkers']();}[_0x42b8('0x3')](){this[_0x42b8('0x2e')](this[_0x42b8('0x1a')](),this['data'],this[_0x42b8('0x20')]),this['removeMarkers']();}[_0x42b8('0x6')](){const _0x128326=[];let _0x2b7210=this[_0x42b8('0x36')];for(;_0x2b7210;)_0x128326[_0x42b8('0x2b')](_0x2b7210),_0x2b7210=_0x2b7210[_0x42b8('0x33')];return _0x128326;}[_0x42b8('0x10')](_0x39cde2,_0x7e87a9){const _0x1fa0e9=_0x33df78(this[_0x42b8('0x20')]);_0x4c5465(_0x1fa0e9,_0x39cde2,_0x7e87a9),_0x47fc50(_0x1fa0e9,this[_0x42b8('0x20')])||(this[_0x42b8('0x20')]=_0x1fa0e9,this[_0x42b8('0xe')](_0x1fa0e9));}[_0x42b8('0x2c')](_0x2bd969){const _0x5c959d=_0x33df78(this[_0x42b8('0x20')]);_0x217561(_0x5c959d,_0x2bd969),_0x47fc50(_0x5c959d,this[_0x42b8('0x20')])||(this[_0x42b8('0x20')]=_0x5c959d,this[_0x42b8('0xe')](this['attributes']));}[_0x42b8('0x23')](){return{'id':this['id'],'type':this[_0x42b8('0x19')]?this['type']+':'+this[_0x42b8('0x19')]:this['type'],'authorId':this[_0x42b8('0x4')]['id'],'createdAt':this['createdAt'],'hasComments':this['hasComments'],'data':this[_0x42b8('0x1d')],'attributes':this[_0x42b8('0x20')]};}static[_0x42b8('0x16')](){return _0x584190()[_0x42b8('0x2a')](0x1,0x5);}}_0x60bc66(o,_0x1c7b2c);