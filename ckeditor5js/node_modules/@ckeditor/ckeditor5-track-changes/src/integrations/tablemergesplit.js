/*
 *             Copyright (c) 2016 - 2022, CKSource Holding sp. z o.o. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x1ba6=['registerDescriptionCallback','markMultiRangeBlockFormat','subType','mergeTableCellDown','$graveyard','change','markBlockFormat','from','accept','TableEditing','*Split\x20cell:*\x20vertically','isInContent','enableCommand','length','commands','value','document','createRangeOn','map','_suggestionFactory','trackChanges','size','containsRange','_areMergableCells','getAncestors','execute','splitTableCellVertically','*Merge\x20cells*','selection','push','fromRange','return','element','findAncestor','forceDefaultExecution','splitTableCellHorizontally','createTableWalker','_tablePostFixingSubtypes','stop','mergeTableCellLeft','model','refresh','plugins','isEnabled','mergeTableCellUp','rootName','mergeTableCells','registerCustomCallback','editor','tableCell','insertion','format','highest','TableUtils','mergeTableCellRight','cell','has','_areSelectedCellsMergable','type','low','commandName','getFirstPosition','author','get','add','_descriptionFactory','locale','TrackChangesEditing','setSelection','getSelectionAffectedTableCells','detach','formatBlock','find','getRanges'];(function(_0x211cf6,_0x1ba627){const _0x658bcd=function(_0x56f409){while(--_0x56f409){_0x211cf6['push'](_0x211cf6['shift']());}};_0x658bcd(++_0x1ba627);}(_0x1ba6,0xef));const _0x658b=function(_0x211cf6,_0x1ba627){_0x211cf6=_0x211cf6-0x0;let _0x658bcd=_0x1ba6[_0x211cf6];return _0x658bcd;};import{Plugin as _0x200229}from'ckeditor5/src/core';import _0x37633c from'./table';import{LiveRange as _0x205e47}from'ckeditor5/src/engine';import{getTranslation as _0x67cf9b}from'../utils/common-translations';export default class ht extends _0x200229{static get['requires'](){return[_0x37633c];}['afterInit'](){const _0x4a0a31=this[_0x658b('0x1f')],_0x3615f1=_0x4a0a31[_0x658b('0x17')]['document'][_0x658b('0xb')],_0x2f9036=_0x4a0a31[_0x658b('0x31')];if(!_0x4a0a31['plugins'][_0x658b('0x27')](_0x658b('0x42')))return;const _0x10961c=_0x4a0a31[_0x658b('0x19')]['get'](_0x658b('0x32')),_0x395278=_0x4a0a31[_0x658b('0x19')][_0x658b('0x2e')](_0x658b('0x24')),_0x1f1bb7=_0x4a0a31[_0x658b('0x19')]['get'](_0x37633c);_0x1f1bb7[_0x658b('0x14')][_0x658b('0xc')](_0x658b('0x1d')),_0x10961c[_0x658b('0x45')](_0x658b('0x1d'),()=>{const _0x2ca9ac=_0x395278[_0x658b('0x34')](_0x4a0a31[_0x658b('0x17')][_0x658b('0x49')]['selection']);_0x4a0a31['model']['change'](()=>{_0x10961c[_0x658b('0x3a')](_0x2ca9ac,{'commandName':'mergeTableCells','commandParams':[]},[],_0x658b('0x1d'));});}),_0x4a0a31['commands'][_0x658b('0x2e')]('mergeTableCells')['on'](_0x658b('0x8'),(_0x21c817,_0x510c49)=>{_0x4a0a31[_0x658b('0x47')]['get'](_0x658b('0x3'))['value']&&(_0x510c49[_0x658b('0x46')]>0x0&&_0x510c49[_0x510c49['length']-0x1]&&_0x510c49[_0x510c49[_0x658b('0x46')]-0x1][_0x658b('0x11')]||_0x10961c['_isForcedDefaultExecutionBlock']||this[_0x658b('0x28')]()||_0x21c817[_0x658b('0x15')]());},{'priority':_0x658b('0x23')});for(const _0x3c8fb1 of[_0x658b('0x1b'),_0x658b('0x25'),_0x658b('0x3c'),_0x658b('0x16')]){const _0x407b14=_0x4a0a31['commands']['get'](_0x3c8fb1);_0x10961c[_0x658b('0x45')](_0x3c8fb1,()=>{const _0x5850c6=_0x4a0a31[_0x658b('0x17')][_0x658b('0x49')][_0x658b('0xb')][_0x658b('0x2c')]()['getAncestors']()[_0x658b('0x37')](_0x3455de=>_0x3455de['is'](_0x658b('0xf'),_0x658b('0x20'))),_0x1189fe=_0x407b14['value'];_0x4a0a31['model'][_0x658b('0x3e')](()=>{_0x10961c[_0x658b('0x3a')]([_0x5850c6,_0x1189fe],{'commandName':_0x658b('0x1d'),'commandParams':[]},[],'mergeTableCells');});});}for(const _0x157ac7 of[_0x658b('0x9'),_0x658b('0x12')]){const _0x9d9403=_0x4a0a31[_0x658b('0x47')][_0x658b('0x2e')](_0x157ac7);_0x10961c[_0x658b('0x45')](_0x157ac7,()=>{const _0x5f2eba=_0x395278[_0x658b('0x34')](_0x4a0a31[_0x658b('0x17')][_0x658b('0x49')][_0x658b('0xb')])[0x0],_0x40486f=_0x5f2eba[_0x658b('0x10')]('table'),{column:_0x22204e,row:_0x2f6ccc}=_0x395278['getCellLocation'](_0x5f2eba);let _0x1fb804=[];if('horizontally'==_0x9d9403['direction']){const _0x57a188=_0x395278['createTableWalker'](_0x40486f,{'startRow':_0x2f6ccc,'endRow':_0x2f6ccc,'includeAllSlots':!0x0});_0x1fb804=Array[_0x658b('0x40')](_0x57a188)[_0x658b('0x1')](_0x144590=>_0x144590[_0x658b('0x26')]);}else{const _0x2beacd=_0x395278[_0x658b('0x13')](_0x40486f,{'column':_0x22204e,'includeAllSlots':!0x0});_0x1fb804=Array[_0x658b('0x40')](_0x2beacd)['map'](_0x633cd6=>_0x633cd6[_0x658b('0x26')]);}_0x4a0a31[_0x658b('0x17')][_0x658b('0x3e')](_0xcee008=>{_0x10961c[_0x658b('0x3f')](_0xcee008[_0x658b('0x0')](_0x5f2eba),{'commandName':_0x157ac7,'commandParams':[]},_0x1fb804,_0x157ac7);});});}_0x10961c[_0x658b('0x30')][_0x658b('0x39')](_0x28df79=>{const {data:_0x21483a}=_0x28df79;if(_0x21483a)return _0x658b('0x1d')==_0x21483a[_0x658b('0x2b')]?{'type':_0x658b('0x22'),'content':_0x67cf9b(_0x2f9036,_0x658b('0xa'))}:void 0x0;}),_0x10961c[_0x658b('0x30')][_0x658b('0x39')](_0x264b60=>{const {data:_0x344cae}=_0x264b60;if(_0x344cae)return'splitTableCellVertically'==_0x344cae[_0x658b('0x2b')]?{'type':_0x658b('0x22'),'content':_0x67cf9b(_0x2f9036,_0x658b('0x43'))}:_0x658b('0x12')==_0x344cae[_0x658b('0x2b')]?{'type':'format','content':_0x67cf9b(_0x2f9036,'*Split\x20cell:*\x20horizontally')}:void 0x0;});const _0x99663e=_0x1f1bb7['_acceptFormatSuggestionCallbackFactory']();for(const _0x29ca57 of[_0x658b('0x1b'),_0x658b('0x25'),_0x658b('0x3c'),'mergeTableCellLeft'])_0x10961c['_suggestionFactory'][_0x658b('0x1e')](_0x658b('0x36'),_0x29ca57,'accept',_0x99663e);for(const _0x576f08 of[_0x658b('0x9'),'splitTableCellHorizontally'])_0x10961c[_0x658b('0x2')][_0x658b('0x1e')](_0x658b('0x36'),_0x576f08,_0x658b('0x41'),_0x99663e);_0x10961c[_0x658b('0x2')][_0x658b('0x1e')](_0x658b('0x36'),_0x658b('0x1d'),_0x658b('0x41'),_0x5ed496=>{_0x4a0a31['model'][_0x658b('0x3e')](_0x37ca4f=>{const _0x12fb8a=Array[_0x658b('0x40')](_0x3615f1[_0x658b('0x38')]())[_0x658b('0x1')](_0x2fd5ae=>_0x205e47[_0x658b('0xd')](_0x2fd5ae));_0x37ca4f[_0x658b('0x33')](_0x5ed496),_0x4a0a31[_0x658b('0x47')][_0x658b('0x2e')](_0x658b('0x1d'))[_0x658b('0x18')](),_0x4a0a31[_0x658b('0x8')](_0x658b('0x1d'),{'forceDefaultExecution':!0x0});const _0x1af728=_0x12fb8a['filter'](_0xb4cbcd=>_0x658b('0x3d')!=_0xb4cbcd['root'][_0x658b('0x1c')]);_0x1af728[_0x658b('0x46')]>0x0&&_0x37ca4f['setSelection'](_0x1af728);for(const _0x4ccae9 of _0x12fb8a)_0x4ccae9[_0x658b('0x35')]();});});for(const _0x31ea46 of[_0x658b('0x1b'),'mergeTableCellDown',_0x658b('0x16'),_0x658b('0x25')]){const _0x45a019=_0x4a0a31[_0x658b('0x47')][_0x658b('0x2e')](_0x31ea46);_0x45a019['on']('set:isEnabled',(_0x34223b,_0x4002bb,_0xdf7341)=>{if(_0xdf7341){const _0x300aa0=_0x4a0a31[_0x658b('0x17')][_0x658b('0x49')][_0x658b('0xb')][_0x658b('0x2c')]()[_0x658b('0x7')]()['find'](_0x2f1e70=>_0x2f1e70['is'](_0x658b('0xf'),_0x658b('0x20')));this['_areMergableCells'](_0x45a019[_0x658b('0x48')],_0x300aa0)||(_0x34223b[_0x658b('0xe')]=!0x1,_0x34223b[_0x658b('0x15')]());}},{'priority':_0x658b('0x2a')});}}[_0x658b('0x28')](){const _0x3688a9=this[_0x658b('0x1f')][_0x658b('0x47')][_0x658b('0x2e')]('mergeTableCells'),_0x1b2bb5=this[_0x658b('0x1f')]['plugins'][_0x658b('0x2e')]('TableUtils');if(!_0x3688a9[_0x658b('0x1a')])return!0x1;const _0x1312d1=_0x1b2bb5[_0x658b('0x34')](this['editor'][_0x658b('0x17')][_0x658b('0x49')][_0x658b('0xb')]);for(const _0x5a8fa7 of _0x1312d1)for(const _0x3a7bba of _0x1312d1)if(_0x5a8fa7!=_0x3a7bba&&!this[_0x658b('0x6')](_0x5a8fa7,_0x3a7bba))return!0x1;return!0x0;}[_0x658b('0x6')](_0x5587aa,_0x1894ff){const _0x380691=this[_0x658b('0x1f')]['plugins'][_0x658b('0x2e')](_0x658b('0x32')),_0x1760a6=this[_0x658b('0x1f')][_0x658b('0x17')][_0x658b('0x0')](_0x5587aa),_0x108686=this['editor'][_0x658b('0x17')][_0x658b('0x0')](_0x1894ff),_0x5d0a2e=new Set(),_0x52f593=new Set();for(const _0x23bc2c of _0x380691['getSuggestions']())if((_0x658b('0x21')==_0x23bc2c[_0x658b('0x29')]||'deletion'==_0x23bc2c[_0x658b('0x29')]||_0x658b('0x1d')==_0x23bc2c[_0x658b('0x3b')])&&_0x23bc2c[_0x658b('0x44')])for(const _0x238f76 of _0x23bc2c[_0x658b('0x38')]())_0x238f76[_0x658b('0x5')](_0x1760a6,!0x0)&&_0x5d0a2e[_0x658b('0x2f')](_0x23bc2c[_0x658b('0x29')]+':'+_0x23bc2c[_0x658b('0x2d')]['id']),_0x238f76[_0x658b('0x5')](_0x108686,!0x0)&&_0x52f593[_0x658b('0x2f')](_0x23bc2c[_0x658b('0x29')]+':'+_0x23bc2c[_0x658b('0x2d')]['id']);if(_0x5d0a2e[_0x658b('0x4')]!=_0x52f593[_0x658b('0x4')])return!0x1;for(const _0x40a479 of _0x5d0a2e)if(!_0x52f593[_0x658b('0x27')](_0x40a479))return!0x1;return!0x0;}}